<?xml version="1.0" encoding="UTF-8"?>
<story>
  <metadata>
    <id>6.7</id>
    <title>Quality Hold Notifications</title>
    <batch>06A-2</batch>
    <status>drafted</status>
  </metadata>

  <description>Notify relevant users when quality holds are created</description>

  <dependencies>
    <requires>
      <story id="6.6">Quality Hold Creation</story>
    </requires>
  </dependencies>

  <technical_context>
    <settings>
      <setting name="enable_hold_notifications" type="boolean" default="true">
        Toggle in quality_settings table
      </setting>
    </settings>

    <notification_logic>
      <trigger>On hold creation</trigger>
      <recipients>
        <recipient>QC Manager role</recipient>
        <recipient>Users in notify_users array</recipient>
      </recipients>
      <content>LP number, Product, Reason, Severity, Link to hold</content>
    </notification_logic>
  </technical_context>

  <acceptance_criteria>
    <ac id="1">When hold created, notification sent to: QC Manager role, Users in notify_users</ac>
    <ac id="2">Notification includes: LP number, Product, Reason, Severity, Link</ac>
  </acceptance_criteria>

  <functional_requirements>
    <fr id="QC-FR-08">System shall notify on hold creation when enabled</fr>
  </functional_requirements>
</story>
