<?xml version="1.0" encoding="UTF-8"?>
<story>
  <metadata>
    <id>6.3</id>
    <title>Prevent Shipping Non-Passed LPs</title>
    <batch>06A-1</batch>
    <status>drafted</status>
  </metadata>

  <description>Block shipping of non-passed LPs to ensure only approved inventory ships</description>

  <dependencies>
    <requires>
      <story id="6.1">LP QA Status Management</story>
    </requires>
    <integration>
      <epic id="7">Shipping workflow (Phase 2)</epic>
    </integration>
  </dependencies>

  <technical_context>
    <services>
      <service name="validateLPForShipping">
        <input>lpId: uuid</input>
        <output>{ valid: boolean, error?: string }</output>
        <logic>Returns error if qa_status != 'passed'</logic>
      </service>
      <service name="getShippableLPs">
        <output>LP[] where qa_status = 'passed'</output>
      </service>
    </services>
  </technical_context>

  <acceptance_criteria>
    <ac id="1">LP with qa_status != 'passed' blocked from shipping (SO, TO)</ac>
    <ac id="2">Error shown: "LP must have QA status: passed"</ac>
    <ac id="3">Only passed LPs shown in picker</ac>
  </acceptance_criteria>

  <implementation_notes>
    <note>Phase 1 (Epic 6): Implement validation logic in LP service</note>
    <note>Phase 2 (Epic 7): Integrate with shipping workflow</note>
  </implementation_notes>

  <functional_requirements>
    <fr id="QC-FR-03">System shall prevent shipping non-passed LPs</fr>
  </functional_requirements>
</story>
