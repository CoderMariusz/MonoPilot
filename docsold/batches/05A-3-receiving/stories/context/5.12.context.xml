<?xml version="1.0" encoding="UTF-8"?>
<story>
  <metadata><id>5.12</id><title>Auto-Print Labels</title><batch>5A-3</batch><points>5</points><effort_hours>5-6</effort_hours><status>todo</status></metadata>
  <description>Auto-generate and print ZPL labels for LPs created during receiving via Zebra printer</description>
  <dependencies><requires><story id="5.11">GRN Creation</story></requires></dependencies>
  <technical_context>
    <label_format>ZPL (Zebra Programming Language), 4x6 label size</label_format>
    <label_content>LP number (large barcode), product, batch, expiry, qty, UoM, location, manufacture date</label_content>
    <printer_config>
      - printer_ip: IP address of Zebra printer
      - printer_port: TCP port (default 9100)
      - copies_per_label: 1-5 (default 1)
      - auto_print_on_receive: BOOLEAN (default true)
    </printer_config>
    <error_handling>
      - If printer offline: Log error, notify user, LP still created
      - Manual print button: Click to print existing LP label
    </error_handling>
  </technical_context>
  <acceptance_criteria>
    <ac id="1">Auto-print on LP creation if warehouse_settings.auto_print_on_receive=true</ac>
    <ac id="2">Label includes: LP#, product, batch, expiry, qty, UoM, location, mfg date</ac>
    <ac id="3">ZPL format valid for Zebra printers</ac>
    <ac id="4">Printer IP, port, copies configurable in /settings/warehouse</ac>
    <ac id="5">Printer offline: Error logged, LP still created, user can print later</ac>
  </acceptance_criteria>
  <test_plan>
    <unit_tests>ZPL generation, format validation</unit_tests>
    <integration_tests>Mock printer, verify ZPL sent to TCP socket</integration_tests>
    <e2e_tests>Auto-print enabled/disabled, manual print button</e2e_tests>
  </test_plan>
</story>
