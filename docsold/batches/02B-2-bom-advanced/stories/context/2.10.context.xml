<?xml version="1.0" encoding="UTF-8"?>
<story>
  <metadata>
    <id>2.10</id>
    <title>BOM Clone</title>
    <batch>02B-2</batch>
    <points>3</points>
    <effort_hours>4-5</effort_hours>
    <status>pending</status>
  </metadata>

  <description>Copy existing BOM with all items, auto-increment version, and new effective dates.</description>

  <dependencies>
    <requires>
      <story id="2.6">BOM CRUD</story>
      <story id="2.7">BOM Items</story>
    </requires>
  </dependencies>

  <technical_context>
    <api_endpoints>
      <endpoint method="POST" path="/api/technical/boms/:id/clone">
        <body>effective_from, effective_to</body>
        <response>New BOM with incremented version and all items copied</response>
        <side_effects>
          - Clone BOM record (new id, version++)
          - Clone all bom_items (new ids, same data)
          - Status = Draft
        </side_effects>
      </endpoint>
    </api_endpoints>

    <version_logic>
      Current: 1.0 → New: 1.1
      Current: 1.9 → New: 2.0
    </version_logic>
  </technical_context>

  <acceptance_criteria>
    <ac id="2.10.1">Clone button on BOM detail page</ac>
    <ac id="2.10.2">Clone modal asks for new effective dates</ac>
    <ac id="2.10.3">Cloned BOM has new version (1.0→1.1), all items copied, status=Draft</ac>
    <ac id="2.10.4">Navigate to new BOM after clone</ac>
  </acceptance_criteria>
</story>
