# Epic 06 - Quality Module (Food Safety Compliance First)

**Epic ID:** 06
**Module:** Quality
**Status:** STORIES TO BE CREATED
**Type:** Core Module (Food Safety & Compliance)
**CRITICAL:** This module enables HACCP compliance and batch release for food safety

**Primary References:**
- PRD: `docs/1-BASELINE/product/modules/quality.md`
- Architecture: `docs/1-BASELINE/architecture/modules/quality.md`
- Story Brief: `docs/2-MANAGEMENT/epics/current/06-quality/06.0.story-creation-brief.md`
- Dependency Analysis: `docs/2-MANAGEMENT/epics/current/06-quality/MVP-DEPENDENCY-ANALYSIS.md`

---

## Goal

Deliver the **Quality Module** with **Food Safety Compliance FIRST** to enable regulatory compliance. This module provides:

- **Quality Status Management** - Pending/Passed/Failed/Hold/Quarantine states
- **Quality Holds** - Inventory blocking with NCR linkage
- **Product Specifications** - Test parameters and acceptance criteria
- **Inspections** - Incoming/In-Process/Final inspection workflows
- **HACCP Plans & CCPs** - Critical Control Point monitoring
- **NCR Lifecycle** - Non-Conformance Report workflow
- **CAPA** - Corrective and Preventive Action management
- **CoA Generation** - Certificate of Analysis for batches
- **Supplier Quality** - Ratings, audits, and scorecards
- **Operation Quality Checkpoints** - In-process quality checks at routing operations

**CRITICAL PRIORITY:** Phase 1 (Core Quality + Incoming Inspection) enables basic QA workflow. Phase 2 (HACCP/CCP) enables food safety compliance.

---

## Food Safety Compliance Context

**Why Quality Module is Critical:**

1. **Food Safety Modernization Act (FSMA)** - Requires preventive controls, hazard analysis
2. **HACCP Compliance** - Critical Control Points must be monitored and documented
3. **FDA 21 CFR Part 11** - Electronic records and signatures for audits
4. **Traceability** - Quality events linked to batch genealogy
5. **Customer Requirements** - CoA documents required for shipments

### Common CCPs in Food Manufacturing

| CCP | Hazard Type | Typical Limits | Monitoring Frequency |
|-----|-------------|----------------|----------------------|
| Receiving Temperature | Biological | 0-4C (chilled) | Every receipt |
| Cooking Temperature | Biological | 75C core temp | Every batch |
| Metal Detection | Physical | 1.5mm Fe, 2.5mm Non-Fe | Continuous |
| pH Control | Chemical | 4.0-4.5 | Hourly |
| Cold Storage | Biological | 0-4C | Every 4 hours |
| Pasteurization | Biological | 72C for 15s | Continuous |

---

## Phase Strategy (Compliance First)

### Phase 1 - Core Quality (Weeks 1-4)

**Goal:** Basic QA workflow + Incoming inspection
**Timeline:** 12-16 days
**Stories:** 10

| Story | Name | PRD FRs | Complexity | Enables |
|-------|------|---------|------------|---------|
| 06.0 | Quality Settings | FR-QA-* | M | All Quality |
| 06.1 | Quality Status Types | FR-QA-001 | S | Status management |
| 06.2 | Quality Holds CRUD | FR-QA-002 | M | Inventory blocking |
| 06.3 | Product Specifications | FR-QA-003 | M | Test templates |
| 06.4 | Test Parameters | FR-QA-004 | M | Acceptance criteria |
| 06.5 | Incoming Inspection | FR-QA-005 | L | GRN QA workflow |
| 06.6 | Test Results Recording | FR-QA-004 | M | Inspection data capture |
| 06.7 | Sampling Plans (AQL) | FR-QA-008 | M | Statistical sampling |
| 06.8 | Scanner QA Pass/Fail | FR-QA-025 | M | Mobile QA |
| 06.9 | Basic NCR Creation | FR-QA-009 | M | Non-conformance capture |

**Deliverables:**
- `quality_specifications` table with RLS
- `quality_spec_parameters` table
- `quality_inspections` table
- `quality_test_results` table
- `quality_holds` table
- `quality_hold_items` table
- `sampling_plans` table
- Basic NCR creation (workflow in Phase 2)
- Incoming inspection workflow

### Phase 2 - In-Process & Final (Weeks 5-8)

**Goal:** Full inspection cycle + NCR workflow
**Timeline:** 14-18 days
**Stories:** 11

| Story | Name | PRD FRs | Complexity | Dependencies |
|-------|------|---------|------------|--------------|
| 06.10 | In-Process Inspection | FR-QA-006 | L | Epic 04 (WO) |
| 06.11 | Final Inspection | FR-QA-007 | L | Epic 04 (WO) |
| 06.12 | Batch Release Approval | FR-QA-010 | M | 06.11 |
| 06.13 | NCR Workflow | FR-QA-009 | L | 06.9 |
| 06.14 | NCR Root Cause Analysis | FR-QA-009 | M | 06.13 |
| 06.15 | NCR Corrective Action | FR-QA-009 | M | 06.14 |
| 06.16 | NCR Verification & Close | FR-QA-009 | M | 06.15 |
| 06.17 | Quality Alerts | FR-QA-* | M | 06.1-06.16 |
| 06.18 | Test Result Trending | FR-QA-004 | M | 06.6 |
| 06.19 | Operation Quality Checkpoints | FR-QA-026 | L | Epic 02 (Routing) |
| 06.20 | Checkpoint Results & Sign-off | FR-QA-026 | M | 06.19 |

**Deliverables:**
- In-process inspection tied to WO operations
- Final inspection and batch release gate
- Full NCR workflow (Draft -> Close)
- Operation checkpoints in routing
- Quality alerts and notifications

### Phase 3 - HACCP & CoA (Weeks 9-12)

**Goal:** HACCP compliance + CoA generation
**Timeline:** 14-18 days
**Stories:** 10

| Story | Name | PRD FRs | Complexity | Dependencies |
|-------|------|---------|------------|--------------|
| 06.21 | HACCP Plan Setup | FR-QA-013 | L | 06.0, Epic 02 |
| 06.22 | CCP Definition | FR-QA-014 | M | 06.21 |
| 06.23 | CCP Monitoring Desktop | FR-QA-014 | M | 06.22 |
| 06.24 | CCP Monitoring Scanner | FR-QA-014 | L | 06.22, 06.23 |
| 06.25 | CCP Deviation Handling | FR-QA-015 | M | 06.24 |
| 06.26 | CCP Deviation Alerts | FR-QA-015 | M | 06.25 |
| 06.27 | CoA Templates | FR-QA-012 | M | 06.11 |
| 06.28 | CoA Generation | FR-QA-011 | L | 06.27 |
| 06.29 | CoA PDF Export | FR-QA-011 | M | 06.28 |
| 06.30 | HACCP Verification Records | FR-QA-013 | M | 06.21 |

**Deliverables:**
- HACCP plan management
- CCP definition and monitoring
- Real-time CCP deviation alerts
- CoA templates and PDF generation
- HACCP verification workflow

### Phase 4 - CAPA & Supplier Quality (Weeks 13-16)

**Goal:** CAPA workflow + Supplier quality + Analytics
**Timeline:** 12-16 days
**Stories:** 10

| Story | Name | PRD FRs | Complexity | Dependencies |
|-------|------|---------|------------|--------------|
| 06.31 | CAPA Creation | FR-QA-016 | M | 06.13 (NCR) |
| 06.32 | CAPA Actions | FR-QA-017 | M | 06.31 |
| 06.33 | CAPA Effectiveness Check | FR-QA-017 | M | 06.32 |
| 06.34 | Supplier Quality Ratings | FR-QA-018 | M | Epic 03 |
| 06.35 | Supplier Audits | FR-QA-019 | M | 06.34 |
| 06.36 | Supplier Audit Findings | FR-QA-019 | M | 06.35 |
| 06.37 | Quality Dashboard | FR-QA-020 | L | All |
| 06.38 | Audit Trail Reports | FR-QA-021 | M | All |
| 06.39 | Quality Analytics | FR-QA-022 | L | All |
| 06.40 | Document Control | FR-QA-024 | M | 06.3 |

**Deliverables:**
- Full CAPA workflow with effectiveness
- Supplier quality scorecard
- Supplier audit management
- Quality dashboard with KPIs
- Audit trail for compliance

---

## External Dependencies (Cross-Epic)

### Required from Epic 01 (Settings)

| Dependency | Story | What It Provides | Status |
|------------|-------|------------------|--------|
| `organizations` table | 01.1 | Multi-tenancy foundation | **REQUIRED** |
| `users` table | 01.1 | Inspector assignments, audit trail | **REQUIRED** |
| `roles` table | 01.1 | QA Inspector, QA Manager roles | **REQUIRED** |
| Base RLS policies | 01.1 | org_id isolation | **REQUIRED** |
| `machines` table | 01.10 | CCP equipment reference | OPTIONAL |

### Required from Epic 02 (Technical)

| Dependency | Story | What It Provides | Status |
|------------|-------|------------------|--------|
| `products` table | 02.1 | Specifications linked to products | **REQUIRED** |
| `routings` table | 02.7 | Operation checkpoints | **REQUIRED** |
| `routing_operations` table | 02.8 | CCP step mapping | **REQUIRED** |

### Required from Epic 03 (Planning)

| Dependency | Story | What It Provides | Status |
|------------|-------|------------------|--------|
| `purchase_orders` table | 03.3 | Incoming inspection source | **REQUIRED** |
| `suppliers` table | 03.1 | Supplier quality reference | **REQUIRED** |

### Required from Epic 04 (Production)

| Dependency | Story | What It Provides | Status |
|------------|-------|------------------|--------|
| `work_orders` table | 03.10 | In-process/final inspection | **REQUIRED** |
| WO operations | 04.3 | CCP monitoring at operations | **REQUIRED** |

### Required from Epic 05 (Warehouse)

| Dependency | Story | What It Provides | Status |
|------------|-------|------------------|--------|
| `license_plates` table | 05.1 | QA status field updates | **REQUIRED** |
| LP QA status management | 05.7 | Hold/release inventory | **REQUIRED** |

### Quality Provides To (Downstream)

| Module | What Quality Provides |
|--------|----------------------|
| **Warehouse (Epic 05)** | LP QA status updates, hold/release workflow |
| **Shipping (Epic 07)** | CoA documents, batch release status |
| **Production (Epic 04)** | CCP deviation alerts, hold triggers |

---

## Story Index

### Phase 1 - Core Quality

| Story | Name | PRD FRs | Complexity | Status |
|------:|------|---------|------------|--------|
| 06.0 | Quality Settings | FR-QA-* | M | TO CREATE |
| 06.1 | Quality Status Types | FR-QA-001 | S | TO CREATE |
| 06.2 | Quality Holds CRUD | FR-QA-002 | M | TO CREATE |
| 06.3 | Product Specifications | FR-QA-003 | M | TO CREATE |
| 06.4 | Test Parameters | FR-QA-004 | M | TO CREATE |
| 06.5 | Incoming Inspection | FR-QA-005 | L | TO CREATE |
| 06.6 | Test Results Recording | FR-QA-004 | M | TO CREATE |
| 06.7 | Sampling Plans (AQL) | FR-QA-008 | M | TO CREATE |
| 06.8 | Scanner QA Pass/Fail | FR-QA-025 | M | TO CREATE |
| 06.9 | Basic NCR Creation | FR-QA-009 | M | TO CREATE |

**Total Phase 1 Stories:** 10
**Estimated Effort:** 12-16 days (1 developer)

### Phase 2 - In-Process & Final

| Story | Name | PRD FRs | Complexity | Status |
|------:|------|---------|------------|--------|
| 06.10 | In-Process Inspection | FR-QA-006 | L | TO CREATE |
| 06.11 | Final Inspection | FR-QA-007 | L | TO CREATE |
| 06.12 | Batch Release Approval | FR-QA-010 | M | TO CREATE |
| 06.13 | NCR Workflow | FR-QA-009 | L | TO CREATE |
| 06.14 | NCR Root Cause Analysis | FR-QA-009 | M | TO CREATE |
| 06.15 | NCR Corrective Action | FR-QA-009 | M | TO CREATE |
| 06.16 | NCR Verification & Close | FR-QA-009 | M | TO CREATE |
| 06.17 | Quality Alerts | FR-QA-* | M | TO CREATE |
| 06.18 | Test Result Trending | FR-QA-004 | M | TO CREATE |
| 06.19 | Operation Quality Checkpoints | FR-QA-026 | L | TO CREATE |
| 06.20 | Checkpoint Results & Sign-off | FR-QA-026 | M | TO CREATE |

**Total Phase 2 Stories:** 11
**Estimated Effort:** 14-18 days (1 developer)

### Phase 3 - HACCP & CoA

| Story | Name | PRD FRs | Complexity | Status |
|------:|------|---------|------------|--------|
| 06.21 | HACCP Plan Setup | FR-QA-013 | L | TO CREATE |
| 06.22 | CCP Definition | FR-QA-014 | M | TO CREATE |
| 06.23 | CCP Monitoring Desktop | FR-QA-014 | M | TO CREATE |
| 06.24 | CCP Monitoring Scanner | FR-QA-014 | L | TO CREATE |
| 06.25 | CCP Deviation Handling | FR-QA-015 | M | TO CREATE |
| 06.26 | CCP Deviation Alerts | FR-QA-015 | M | TO CREATE |
| 06.27 | CoA Templates | FR-QA-012 | M | TO CREATE |
| 06.28 | CoA Generation | FR-QA-011 | L | TO CREATE |
| 06.29 | CoA PDF Export | FR-QA-011 | M | TO CREATE |
| 06.30 | HACCP Verification Records | FR-QA-013 | M | TO CREATE |

**Total Phase 3 Stories:** 10
**Estimated Effort:** 14-18 days (1 developer)

### Phase 4 - CAPA & Supplier Quality

| Story | Name | PRD FRs | Complexity | Status |
|------:|------|---------|------------|--------|
| 06.31 | CAPA Creation | FR-QA-016 | M | TO CREATE |
| 06.32 | CAPA Actions | FR-QA-017 | M | TO CREATE |
| 06.33 | CAPA Effectiveness Check | FR-QA-017 | M | TO CREATE |
| 06.34 | Supplier Quality Ratings | FR-QA-018 | M | TO CREATE |
| 06.35 | Supplier Audits | FR-QA-019 | M | TO CREATE |
| 06.36 | Supplier Audit Findings | FR-QA-019 | M | TO CREATE |
| 06.37 | Quality Dashboard | FR-QA-020 | L | TO CREATE |
| 06.38 | Audit Trail Reports | FR-QA-021 | M | TO CREATE |
| 06.39 | Quality Analytics | FR-QA-022 | L | TO CREATE |
| 06.40 | Document Control | FR-QA-024 | M | TO CREATE |

**Total Phase 4 Stories:** 10
**Estimated Effort:** 12-16 days (1 developer)

---

## Story Dependency Graph

```
Epic 01.1 (Org Context + RLS)
    |
    +---> Epic 02.1 (Products)
    |           |
    |           +---> Epic 02.7/02.8 (Routings/Operations)
    |           |
    +---> Epic 03.1 (Suppliers)
    |           |
    |           +---> Epic 03.3 (Purchase Orders)
    |           |
    +---> Epic 05.1/05.7 (LP Table + QA Status)
    |           |
    +---> 06.0 (Quality Settings)
                |
                +---> 06.1 (Quality Status Types)
                |       |
                |       +---> 06.2 (Quality Holds)
                |
                +---> 06.3 (Product Specifications)
                |       |
                |       +---> 06.4 (Test Parameters)
                |       |       |
                |       |       +---> 06.5 (Incoming Inspection) <---- PO
                |       |       |       |
                |       |       |       +---> 06.6 (Test Results)
                |       |       |       |
                |       |       |       +---> 06.7 (Sampling Plans)
                |       |       |       |
                |       |       |       +---> 06.8 (Scanner QA)
                |       |       |
                |       |       +---> 06.9 (Basic NCR)
                |       |               |
                |       |               +---> 06.13 (NCR Workflow)
                |       |               |       |
                |       |               |       +---> 06.14-06.16 (Root Cause -> Close)
                |       |               |
                |       |               +---> 06.31 (CAPA Creation)
                |       |                       |
                |       |                       +---> 06.32-06.33 (Actions + Effectiveness)
                |       |
                |       +---> 06.10 (In-Process Inspection) <---- WO
                |       |       |
                |       |       +---> 06.11 (Final Inspection)
                |       |               |
                |       |               +---> 06.12 (Batch Release)
                |       |                       |
                |       |                       +---> 06.27-06.29 (CoA)
                |       |
                |       +---> 06.19-06.20 (Operation Checkpoints) <---- Routing
                |
                +---> 06.21 (HACCP Plans)
                        |
                        +---> 06.22 (CCP Definition)
                        |       |
                        |       +---> 06.23-06.24 (CCP Monitoring)
                        |               |
                        |               +---> 06.25-06.26 (Deviation + Alerts)
                        |
                        +---> 06.30 (HACCP Verification)
```

---

## Database Tables (Created in Epic 06)

### Tables Created by Epic 06

| Table | Phase | Story | Notes |
|-------|-------|-------|-------|
| `quality_settings` | 1 | 06.0 | Module configuration |
| `quality_specifications` | 1 | 06.3 | Product specs |
| `quality_spec_parameters` | 1 | 06.4 | Test parameters |
| `quality_inspections` | 1 | 06.5 | Inspection headers |
| `quality_test_results` | 1 | 06.6 | Test result data |
| `quality_holds` | 1 | 06.2 | Hold headers |
| `quality_hold_items` | 1 | 06.2 | Items on hold |
| `sampling_plans` | 1 | 06.7 | AQL-based sampling |
| `sampling_records` | 1 | 06.7 | Sample tracking |
| `ncr_reports` | 1 | 06.9 | NCR headers |
| `ncr_workflow` | 2 | 06.13 | Workflow steps |
| `operation_quality_checkpoints` | 2 | 06.19 | Routing checkpoints |
| `operation_checkpoint_results` | 2 | 06.20 | Checkpoint results |
| `haccp_plans` | 3 | 06.21 | HACCP plan headers |
| `haccp_ccps` | 3 | 06.22 | CCP definitions |
| `haccp_monitoring_records` | 3 | 06.23 | CCP values |
| `haccp_deviations` | 3 | 06.25 | Deviation records |
| `haccp_verification_records` | 3 | 06.30 | Verification audit |
| `coa_templates` | 3 | 06.27 | CoA templates |
| `certificates_of_analysis` | 3 | 06.28 | CoA documents |
| `coa_parameters` | 3 | 06.28 | CoA test results |
| `capa_records` | 4 | 06.31 | CAPA headers |
| `capa_actions` | 4 | 06.32 | Action items |
| `capa_effectiveness_checks` | 4 | 06.33 | Effectiveness |
| `supplier_quality_ratings` | 4 | 06.34 | Supplier scores |
| `supplier_audits` | 4 | 06.35 | Audit headers |
| `supplier_audit_findings` | 4 | 06.36 | Audit findings |
| `quality_audit_log` | 4 | 06.38 | Immutable audit |

---

## Key Services

| Service | Phase | Story | Purpose |
|---------|-------|-------|---------|
| `quality-settings-service.ts` | 1 | 06.0 | Settings CRUD |
| `quality-status-service.ts` | 1 | 06.1 | Status management |
| `quality-hold-service.ts` | 1 | 06.2 | Hold CRUD, release |
| `specification-service.ts` | 1 | 06.3 | Spec CRUD, approval |
| `inspection-service.ts` | 1 | 06.5 | Inspection CRUD |
| `test-results-service.ts` | 1 | 06.6 | Results recording |
| `sampling-service.ts` | 1 | 06.7 | Sampling plans |
| `ncr-service.ts` | 1 | 06.9 | NCR CRUD, workflow |
| `batch-release-service.ts` | 2 | 06.12 | Release approval |
| `operation-checkpoint-service.ts` | 2 | 06.19 | Checkpoint CRUD |
| `haccp-service.ts` | 3 | 06.21 | HACCP plans, CCPs |
| `ccp-monitoring-service.ts` | 3 | 06.23 | CCP data entry |
| `coa-service.ts` | 3 | 06.28 | CoA generation |
| `capa-service.ts` | 4 | 06.31 | CAPA workflow |
| `supplier-quality-service.ts` | 4 | 06.34 | Supplier ratings |
| `quality-dashboard-service.ts` | 4 | 06.37 | KPIs, reports |

---

## Delivery Order Recommendation

### Sprint 1: Phase 1 Core (Days 1-16)

**Goal:** Incoming inspection operational

| Day | Story | Complexity | Notes |
|-----|-------|------------|-------|
| 1-2 | 06.0 Quality Settings | M | Configure first |
| 2-3 | 06.1 Quality Status Types | S | Status enum |
| 3-5 | 06.2 Quality Holds CRUD | M | Hold workflow |
| 5-7 | 06.3 Product Specifications | M | Spec headers |
| 7-9 | 06.4 Test Parameters | M | Parameters |
| 9-12 | 06.5 Incoming Inspection | L | Core workflow |
| 12-14 | 06.6 Test Results Recording | M | Data capture |
| 14-15 | 06.7 Sampling Plans | M | AQL |
| 15-16 | 06.8 Scanner QA Pass/Fail | M | Mobile |
| 16-18 | 06.9 Basic NCR Creation | M | NCR draft |

### Sprint 2: Phase 2 In-Process (Days 17-34)

| Day | Story | Complexity | Notes |
|-----|-------|------------|-------|
| 17-20 | 06.10 In-Process Inspection | L | WO integration |
| 20-23 | 06.11 Final Inspection | L | Batch gate |
| 23-25 | 06.12 Batch Release | M | Approval |
| 25-28 | 06.13 NCR Workflow | L | State machine |
| 28-30 | 06.14-06.16 Root Cause to Close | M+M+M | NCR complete |
| 30-32 | 06.17 Quality Alerts | M | Notifications |
| 32-34 | 06.18 Test Trending | M | Charts |
| 34-38 | 06.19-06.20 Op Checkpoints | L+M | Routing QC |

### Sprint 3-4: Phases 3-4 (Days 35-70)

HACCP plans, CCP monitoring, CoA, CAPA, Supplier quality, Dashboard.

---

## Definition of Done (Epic 06)

### Phase 1 (Core Quality)

- [ ] `quality_specifications` table created with RLS
- [ ] `quality_inspections` table created with RLS
- [ ] `quality_holds` table created with RLS
- [ ] Incoming inspection workflow operational
- [ ] Test results recording works
- [ ] Scanner QA pass/fail functional
- [ ] Basic NCR creation works
- [ ] Unit tests >80% coverage

### Phase 2 (In-Process & Final)

- [ ] In-process inspection tied to WO operations
- [ ] Final inspection gates batch release
- [ ] NCR full workflow: Draft -> Investigation -> Root Cause -> Corrective Action -> Verification -> Close
- [ ] Operation checkpoints in routing
- [ ] Quality alerts sent on critical events

### Phase 3 (HACCP & CoA)

- [ ] HACCP plans with CCPs defined
- [ ] CCP monitoring (desktop + scanner)
- [ ] CCP deviation alerts within 30 seconds
- [ ] CoA template configuration
- [ ] CoA PDF generation <5 seconds

### Phase 4 (CAPA & Supplier)

- [ ] CAPA workflow with effectiveness checks
- [ ] Supplier quality ratings calculated
- [ ] Supplier audit management
- [ ] Quality dashboard with KPIs
- [ ] Audit trail immutable

---

## Risk Assessment

| Risk | Impact | Likelihood | Mitigation |
|------|--------|------------|------------|
| **Epic 05 LP QA status not ready** | HIGH | MEDIUM | Phase 1 can use mock LP status |
| **CCP monitoring latency** | CRITICAL | LOW | Optimize real-time inserts |
| **NCR workflow complexity** | MEDIUM | MEDIUM | Simple state machine first |
| **CoA PDF performance** | MEDIUM | MEDIUM | Pre-render template |
| **Audit trail compliance** | HIGH | LOW | Immutable table, no UPDATE |
| **HACCP integration with Production** | MEDIUM | MEDIUM | Clear Epic 04 dependency |

---

## Success Metrics

- [ ] Incoming inspection cycle time <5 minutes
- [ ] CCP monitoring record <300ms response
- [ ] NCR escalation <24 hours for critical
- [ ] CoA generation <5 seconds
- [ ] Quality dashboard loads <2 seconds
- [ ] Zero missed CCP deviations

---

## Handoff to DEV Agents

```yaml
epic: "06-quality"
epic_folder: docs/2-MANAGEMENT/epics/current/06-quality/
stories_count: 41 (10 Phase 1 + 11 Phase 2 + 10 Phase 3 + 10 Phase 4)
stories_ready: 0 (to be created)
start_story: "06.0.quality-settings"
critical_path: "Phase 1 (stories 06.0-06.9) enables incoming QA"
brief: docs/2-MANAGEMENT/epics/current/06-quality/06.0.story-creation-brief.md
technical_notes: |
  - Phase 1 enables basic QA workflow
  - Phase 2 requires Epic 04 Production (WO operations)
  - Phase 3 HACCP requires Epic 02 Technical (Routings)
  - Epic 05 LP QA status integration critical for holds
  - CCP monitoring must be real-time (<300ms)
  - Audit trail MUST be immutable (FDA 21 CFR Part 11)
  - Scanner UI: 48px+ touch targets, audio feedback
dependencies:
  - Epic 01 / 01.1: organizations, users, roles, RLS
  - Epic 01 / 01.10: machines (optional, for CCP equipment)
  - Epic 02 / 02.1: products (for specifications)
  - Epic 02 / 02.7-02.8: routings, operations (for checkpoints, CCPs)
  - Epic 03 / 03.1: suppliers (for supplier quality)
  - Epic 03 / 03.3: purchase_orders (for incoming inspection)
  - Epic 04 / 03.10: work_orders (for in-process inspection)
  - Epic 05 / 05.1, 05.7: license_plates, QA status (for holds)
unblocks:
  - Epic 07 Shipping: CoA documents, batch release
```

---

## Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 1.0 | 2025-12-16 | Initial epic overview with compliance-first strategy | ARCHITECT-AGENT |
