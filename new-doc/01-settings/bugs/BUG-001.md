# BUG-001: Missing Security UI Page

| Field | Value |
|-------|-------|
| **ID** | BUG-001 |
| **Severity** | HIGH |
| **Priority** | P1 - Critical |
| **Feature** | TD-106: Security UI (Sessions & Password) |
| **Status** | Open |
| **Blocking Deployment** | Yes |
| **Found Date** | 2024-12-24 |
| **Found By** | QA-AGENT |
| **Sprint** | Sprint 2 |

---

## Summary

No Security page exists in the application UI to allow users to view and manage their active sessions or change their password, despite the backend services and API routes being fully implemented.

---

## Description

The Security UI feature (TD-106) requires users to be able to:
1. View their active sessions with device/browser info
2. Terminate individual sessions
3. Terminate all other sessions
4. Change their password with strength validation

While all backend services (`session-service.ts`, `password-service.ts`) and API routes (`/api/v1/settings/sessions/*`, `/api/v1/settings/password/*`) are fully implemented and functional, there is no frontend page to expose this functionality to users.

---

## Expected Behavior

1. User navigates to `/settings/security`
2. Page displays:
   - **Active Sessions Section**: Table showing all active sessions with columns for Device, Browser, OS, IP Address, Last Activity, and a Terminate button
   - **Current Session**: Highlighted with a badge, no terminate button
   - **Terminate All Button**: Terminates all sessions except current
   - **Password Change Section**: Form with current password, new password (with strength indicator), confirm password fields

---

## Actual Behavior

1. No file exists at `apps/frontend/app/(authenticated)/settings/security/page.tsx`
2. Navigating to `/settings/security` would result in a 404 or fallback page
3. Users have no way to:
   - View their active sessions
   - Terminate suspicious sessions
   - Change their password through the UI

---

## Steps to Reproduce

1. Start the application
2. Log in as any user
3. Navigate to `/settings/security`
4. Observe: Page not found or 404 error

---

## Technical Details

### Existing Backend Implementation

**Session Service** (`apps/frontend/lib/services/session-service.ts`):
- `createSession()` - Create new session with secure token
- `getSessions()` - Get all active sessions for user
- `terminateSession()` - Terminate single session
- `terminateAllSessions()` - Terminate all except current
- `parseUserAgent()` - Extract device/browser info

**Password Service** (`apps/frontend/lib/services/password-service.ts`):
- `validatePassword()` - Check 5 complexity requirements
- `checkPasswordHistory()` - Verify against last 5 passwords
- `changePassword()` - Full password change with security measures

**API Routes**:
- `GET /api/v1/settings/sessions` - List sessions
- `DELETE /api/v1/settings/sessions` - Terminate all
- `DELETE /api/v1/settings/sessions/[id]` - Terminate one
- `GET /api/v1/settings/sessions/current` - Get current session
- `POST /api/v1/settings/password/change` - Change password
- `GET /api/v1/settings/password/policy` - Get password policy
- `POST /api/v1/settings/password/validate` - Validate password strength

### Missing Frontend Components

1. `apps/frontend/app/(authenticated)/settings/security/page.tsx`
2. `apps/frontend/components/settings/security/ActiveSessionsTable.tsx`
3. `apps/frontend/components/settings/security/PasswordChangeForm.tsx`
4. `apps/frontend/components/settings/security/PasswordStrengthMeter.tsx`

---

## Impact

- **Security Risk**: Users cannot detect or revoke unauthorized sessions
- **User Experience**: No self-service password management
- **Feature Incompleteness**: TD-106 requirements not met from user perspective

---

## Resolution

### Required Work

1. Create Security page at `/settings/security`
2. Create ActiveSessionsTable component using existing API
3. Create PasswordChangeForm component using existing API
4. Add Security link to Settings navigation

### Estimated Effort

4-6 hours

### Acceptance Criteria

- [ ] Security page loads at `/settings/security`
- [ ] Active sessions table displays with correct data
- [ ] Current session highlighted, cannot be terminated
- [ ] Terminate button works for other sessions
- [ ] Terminate All button terminates all except current
- [ ] Password change form validates requirements in real-time
- [ ] Password strength meter shows weak/medium/strong
- [ ] Password change submits successfully
- [ ] All sessions terminated after password change
- [ ] Error states handled gracefully
- [ ] Loading states displayed during API calls

---

## Related Issues

- BUG-002: Missing Password Change UI (same root cause)

---

## References

- Story: TD-106 - Security UI (Sessions & Password)
- PRD: Sprint 2 Feature Requirements
- Services: `session-service.ts`, `password-service.ts`
- API Routes: `/api/v1/settings/sessions/*`, `/api/v1/settings/password/*`
