{
  "response": "I'll implement the `LabelPrintService` to make all 25 tests pass. Here's the complete implementation:\n\n```typescript\nimport type { LicensePlate } from '@/lib/types/license-plate';\n\nexport type LabelSize = '4x6' | '4x3' | '3x2';\n\nexport interface PrintLabelOptions {\n  size: LabelSize;\n  copies: number;\n  includeQR?: boolean;\n}\n\nexport class LabelPrintService {\n  private static readonly LABEL_DIMENSIONS = {\n    '4x6': { width: 812, length: 1218 },\n    '4x3': { width: 812, length: 609 },\n    '3x2': { width: 609, length: 406 },\n  };\n\n  static generateZPL(lp: LicensePlate, options: PrintLabelOptions): string {\n    this.validatePrintRequest(options);\n\n    const dimensions = this.LABEL_DIMENSIONS[options.size];\n    const qrData = options.includeQR !== false ? this.generateQRData(lp) : null;\n\n    return `^XA\n^PW${dimensions.width}\n^LL${dimensions.length}\n^PQ${options.copies}\n\n${this.generateQRCode(qrData)}\n${this.generateBarcode(lp.lp_number)}\n${this.generateTextFields(lp)}\n^XZ`;\n  }\n\n  static generateBulkZPL(lps: LicensePlate[], options: PrintLabelOptions): string {\n    if (lps.length > 100) {\n      throw new Error('Maximum 100 license plates per bulk print');\n    }\n\n    return lps.map(lp => this.generateZPL(lp, options)).join('\\n');\n  }\n\n  static validatePrintRequest(options: PrintLabelOptions): void {\n    const validSizes: LabelSize[] = ['4x6', '4x3', '3x2'];\n    \n    if (!validSizes.includes(options.size)) {\n      throw new Error('Invalid label size');\n    }\n\n    if (options.copies < 1 || options.copies > 100) {\n      throw new Error('Copies must be between 1 and 100');\n    }\n  }\n\n  private static generateQRData(lp: LicensePlate): string {\n    const qrData = {\n      lp_number: lp.lp_number,\n      product_code: lp.product.code,\n      product_name: lp.product.name.length > 40 \n        ? lp.product.name.substring(0, 40) \n        : lp.product.name,\n      batch: lp.batch_number || '--',\n      expiry: lp.expiry_date || 'N/A',\n      quantity: lp.quantity,\n      uom: lp.uom,\n      warehouse: lp.warehouse.code,\n      location: lp.location.name,\n    };\n\n    return JSON.stringify(qrData);\n  }\n\n  private static generateQRCode(qrData: string | null): string {\n    if (!qrData) {\n      return '';\n    }\n\n    return `^FO600,50\n^BQN,2,6\n^FD${qrData}^FS`;\n  }\n\n  private static generateBarcode(lpNumber: string): string {\n    return `^FO50,500\n^BCN,100,Y,N,N\n^FD${lpNumber}^FS`;\n  }\n\n  private static generateTextFields(lp: LicensePlate): string {\n    const productName = lp.product.name.length > 40 \n      ? lp.product.name.substring(0, 40) \n      : lp.product.name;\n\n    const batch = lp.batch_number || '--';\n    const expiry = lp.expiry_date || 'N/A';\n    const manufacture = lp.manufacture_date ? `Mfg: ${lp.manufacture_date}` : '';\n    const quantity = `${lp.quantity.toFixed(1)} ${lp.uom}`;\n    const warehouse = lp.warehouse.code;\n    const location = lp.location.name;\n\n    return `^FO50,150\n^A,N,24,24\n^FDProduct: ${productName}^FS\n\n^FO50,200\n^A,N,18,18\n^FDLP#: ${lp.lp_number}^FS\n\n^FO50,240\n^A,N,18,18\n^FDBatch: ${batch}^FS\n\n^FO50,280\n^A,N,18,18\n^FDExp: ${expiry}^FS\n\n${manufacture ? `^FO50,320\n^A,N,18,18\n^FD${manufacture}^FS` : ''}\n\n^FO50,${manufacture ? 360 : 320}\n^A,N,24,24\n^FDQty: ${quantity}^FS\n\n^FO50,${manufacture ? 400 : 360}\n^A,N,18,18\n^FDWH: ${warehouse}^FS\n\n^FO50,${manufacture ? 440 : 400}\n^A,N,18,18\n^FDLoc: ${location}^FS`;\n  }\n}\n```",
  "usage": {
    "completion_tokens": 1021,
    "prompt_tokens": 4227,
    "total_tokens": 5248
  },
  "model": "glm-4-plus",
  "finish_reason": "stop"
}