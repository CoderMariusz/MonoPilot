# Production Module Test Plan\n\n**Module**: Production (`/production`)  \n**Last Updated**: 2026-02-08  \n**Coverage**: Work orders, operations, consumption, yield tracking, all production workflows\n\n---\n\n## Production Dashboard\n\n### Route: `/production/dashboard`\n\n#### KPI Cards\n\n- [✓] Orders Today: Displays count, clickable to filter WOs\n- [✓] Units Produced: Shows total produced, clickable\n- [✓] Avg Yield: Shows percentage, color-coded (green/yellow/red)\n- [✓] Active WOs: Shows count of in-progress WOs, clickable\n- [✓] Material Shortages: Shows shortage count, clickable\n- [ ] Refresh button: Reloads all KPIs from API\n\n#### Active Work Orders Table\n\n- [✓] WO Number link: Navigates to `/production/work-orders/{id}` (VERIFIED: Link correctly routes to detail page)\n- [ ] Product Name: Clickable link to product\n- [ ] Qty (Plan/Actual): Shows planned vs actual produced\n- [ ] Progress Bar: Visual percentage fill (actual/planned)\n- [ ] Status Badge: Color-coded (Draft, Planned, Released, In Progress, Paused, Completed, Cancelled)\n- [ ] Production Line: Shows assigned line\n- [ ] Row click: Navigates to WO detail\n\n#### Alerts Panel\n\n- [ ] Critical alerts: Red badges, click navigates to entity\n- [ ] Warning alerts: Yellow badges, click navigates to entity\n- [ ] Dismiss icon: X button closes alert\n\n#### Error States\n\n- [ ] Loading: Skeleton loaders for KPIs and tables\n- [ ] API error: Alert with Retry button\n- [ ] Empty: \"No active work orders\" message\n\n---\n\n## Work Order Details\n\n### Route: `/production/work-orders/[id]`\n\n#### Buttons\n\n- [ ] Back button: Returns to `/production/dashboard`\n- [ ] Start Work Order: Blue primary, enabled only if status='released'\n- [ ] Complete Work Order: Blue primary, enabled if status='in_progress' or 'paused'\n- [ ] Pause button: Yellow, shows only if status='in_progress' AND pause enabled\n- [ ] Resume button: Green, shows only if status='paused'\n- [ ] View Operations link: Navigates to operations page\n- [ ] View Consumption link: Navigates to consumption page\n\n#### WO Info Section\n\n- [ ] WO Number: Display (read-only)\n- [ ] Product: Display with link to product master\n- [ ] Planned Quantity: Display\n- [ ] Status: Display with badge\n- [ ] Production Line: Display\n- [ ] Dates: Scheduled start/end display\n\n#### Produced Quantity Form\n\n- [ ] Quantity input: Number field, required, non-negative\n- [ ] Submit button: Updates produced qty\n- [ ] Validation: Cannot exceed planned (unless overproduction enabled)\n- [ ] Notes textarea: Optional, max 1000 chars\n\n#### Status Timeline\n\n- [ ] Visual timeline: Shows status transitions with timestamps\n- [ ] Status badges: Each transition marked with color and user\n\n#### Workflows\n\n- [ ] Start WO: Click Start → Status → 'in_progress' → Operations unlock\n- [ ] Pause WO: Click Pause → Modal → Enter reason → Status → 'paused'\n- [ ] Resume WO: Click Resume → Confirm → Status → 'in_progress'\n- [ ] Complete WO: Click Complete → Status → 'completed' → WO locked\n- [ ] Update Yield: Enter produced qty → Submit → History updated\n\n#### Error States\n\n- [ ] Cannot update: \"WO is locked (completed or cancelled)\"\n- [ ] Conflict: \"WO modified by another user, refresh required\"\n- [ ] Validation error: \"Quantity must be positive number\"\n- [ ] API error: Toast with Retry option\n\n---\n\n## Operations Module\n\n### Route: `/production/work-orders/[id]/operations`\n\n#### Buttons\n\n- [ ] Back button: Returns to WO detail\n- [ ] Refresh button: Reloads operations list\n- [ ] Start Operation: Opens start modal (if pending AND sequence satisfied)\n- [ ] Complete Operation: Opens complete modal (if in_progress)\n- [ ] Dismiss Warning: Closes sequence alert\n\n#### Operations List Table\n\n- [ ] Sequence #: Order number (1, 2, 3...)\n- [ ] Name: Operation name\n- [ ] Status Badge: Pending (gray), In Progress (blue), Completed (green), Failed (red)\n- [ ] Started At: Timestamp display\n- [ ] Completed At: Timestamp display\n- [ ] Yield: Percentage with color (green ≥80%, yellow 70-79%, red <70%)\n- [ ] User: Who started/completed the operation\n- [ ] Timeline: Visual sequence display\n\n#### Start Operation Modal\n\n- [ ] WO Number: Read-only display\n- [ ] Operation Name: Read-only display\n- [ ] Expected Duration: Read-only display\n- [ ] Buttons: Cancel (outline), Start Operation (blue)\n\n#### Complete Operation Modal\n\n- [ ] Yield Percent: Input field (0-100%, required)\n- [ ] Notes: Optional textarea\n- [ ] Buttons: Cancel, Complete Operation (blue)\n\n#### Workflows\n\n- [ ] Load Ops: Fetches all operations with status\n- [ ] Sequence Block: Alert shows if previous ops not completed\n- [ ] Start Op: Click Start → Confirm → Status → 'in_progress' → Start timestamp\n- [ ] Complete Op: Click Complete → Enter yield → Submit → Status → 'completed' → Yield recorded\n- [ ] Timeline: Updates in real-time as ops progress\n\n#### Error States\n\n- [ ] Sequence blocked: Alert shows blocking operation name\n- [ ] Not found: \"No operations found\"\n- [ ] Validation: \"Yield must be between 0-100%\"\n- [ ] Permission denied: Buttons disabled with tooltip\n- [ ] API error: Toast message\n\n---\n\n## Consumption Module\n\n### Route: `/production/consumption/[woId]`\n\n#### Buttons\n\n- [ ] Back button: Returns to WO detail\n- [ ] Refresh button: Reloads materials list\n- [ ] Consume button (per row): Opens consumption modal (if not fully consumed)\n- [ ] View WO Detail: Link to WO detail page\n- [ ] Reverse button (per row): Deletes consumption entry (manager/admin only)\n\n#### Required Materials Table\n\n- [ ] Code: Material code\n- [ ] Name: Material name\n- [ ] Required Qty: Planned quantity needed\n- [ ] Consumed Qty: Amount already consumed\n- [ ] Status Badge: OK (green), Low (yellow), Shortage (red)\n- [ ] Progress Bar: Visual indicator (consumed/required)\n- [ ] Consume Button: Opens consumption modal\n\n#### Consumption History Table\n\n- [ ] Timestamp: Date and time of consumption\n- [ ] Material: Material code and name\n- [ ] Consumed Qty: Amount recorded\n- [ ] Notes: User notes if any\n- [ ] User: Who recorded consumption\n- [ ] Reverse: Delete button (manager/admin only)\n\n#### Add Consumption Modal (2-Step)\n\n- [ ] Step 1 - Material Select: Dropdown of required materials, Next button\n- [ ] Step 2 - Quantity Entry: Qty input (required), Batch Number (optional), Notes (optional)\n- [ ] Validation: Qty > 0 and ≤ remaining\n- [ ] Buttons: Cancel, Previous (Step 2), Next (Step 1), Record Consumption (Step 2)\n\n#### Workflows\n\n- [ ] Load: Fetches materials and history\n- [ ] Record: Click Consume → Select material → Enter qty → Submit → Consumed updates → History refreshes\n- [ ] Reverse: Click Reverse → Confirm → Entry deleted → Total deducted\n- [ ] Status: Auto-updates (OK → Low → Shortage) as consumed changes\n\n#### Error States\n\n- [ ] Shortage Alert: Red text when consumed < required\n- [ ] Permission denied: \"Manager/Admin permission required\"\n- [ ] Validation: \"Quantity exceeds remaining available\"\n- [ ] Not found: \"No materials found\"\n- [ ] API error: Toast with retry\n\n---\n\n## Pause/Resume Workflows\n\n### Pause Work Order\n\n#### Pause Modal\n\n- [ ] Reason Select: Dropdown (required) with options:\n  - [ ] Machine Breakdown\n  - [ ] Material Shortage\n  - [ ] Break/Lunch\n  - [ ] Quality Issue\n  - [ ] Other\n- [ ] Notes Textarea: Optional, max 500 chars, counter shown\n- [ ] Buttons: Cancel (outline), Pause Work Order (yellow)\n\n#### Workflows\n\n- [ ] Pause: Click Pause → Modal → Select reason → Enter notes → Submit → Status → 'paused' → Record created\n\n### Resume Work Order\n\n#### Resume Modal\n\n- [ ] Pause Summary: Read-only display (duration, reason, notes, paused by)\n- [ ] Buttons: Cancel (outline), Resume Production (green)\n\n#### Workflows\n\n- [ ] Resume: Click Resume → Modal shows pause details → Confirm → Status → 'in_progress' → Downtime recorded\n\n---\n\n## Yield Tracking\n\n### Yield History Table\n\n- [ ] Timestamp: Date and time of update\n- [ ] User: Who updated yield\n- [ ] Old Qty: Previous produced quantity\n- [ ] New Qty: Updated quantity\n- [ ] Yield %: Calculated percentage\n- [ ] Color: Green ≥80%, Yellow 70-79%, Red <70%\n- [ ] Notes: Any notes entered\n\n#### Workflows\n\n- [ ] Submit: Enter produced qty → Validate → Submit → Yield calculated → History adds entry → Form clears\n- [ ] Color Coding: Yield % colored based on thresholds\n- [ ] Disabled: Form disabled when WO not 'in_progress' or 'paused'\n\n#### Error States\n\n- [ ] Invalid: \"Quantity must be numeric and positive\"\n- [ ] Exceeds: \"Quantity exceeds planned (overproduction disabled)\"\n- [ ] API error: Toast, form remains editable\n- [ ] Permission: Button disabled with tooltip\n\n---\n\n## Buttons (Summary)\n\n#### Primary Actions\n\n- [ ] Start Work Order: Blue, available when status='released'\n- [ ] Complete Work Order: Blue, available when status='in_progress'/'paused'\n- [ ] Start Operation: Blue, opens start modal\n- [ ] Complete Operation: Blue, opens complete modal\n- [ ] Update Yield: Blue, submits yield form\n\n#### Secondary\n\n- [ ] Refresh: Reloads data\n- [ ] View Operations: Navigates to operations\n- [ ] View Consumption: Navigates to consumption\n- [ ] Dismiss Warning: Closes alert\n\n#### Actions\n\n- [ ] Pause Work Order: Yellow, opens pause modal\n- [ ] Resume Production: Green, resumes from paused\n- [ ] Consume: Opens consumption modal\n- [ ] Reverse: Red, deletes consumption (manager/admin)\n\n#### Navigation\n\n- [ ] Back: Returns to previous page\n\n---\n\n## Forms & Validations\n\n#### Yield Entry\n\n- [ ] Produced Qty: Number, required, positive, step 0.01\n- [ ] Notes: Textarea, optional, max 1000 chars\n\n#### Consumption (Step 1)\n\n- [ ] Material Select: Dropdown, required\n\n#### Consumption (Step 2)\n\n- [ ] Quantity: Number, required, > 0, ≤ remaining\n- [ ] Batch Number: Text, optional\n- [ ] Notes: Textarea, optional\n\n#### Pause\n\n- [ ] Reason: Dropdown, required (5 options)\n- [ ] Notes: Textarea, optional, max 500 chars\n\n#### Complete Operation\n\n- [ ] Yield %: Number, required, range 0-100\n- [ ] Notes: Textarea, optional\n\n---\n\n## Error States\n\n#### Loading\n\n- [ ] Initial load: Skeleton loaders\n- [ ] Refresh: Spinner on button\n- [ ] Submit: Button disabled, spinner\n\n#### API Errors\n\n- [ ] 400: Validation error in toast\n- [ ] 401: Redirect to login\n- [ ] 403: \"No permission for this action\"\n- [ ] 404: \"Work order not found\"\n- [ ] 500: Toast with error and retry\n\n#### Validation\n\n- [ ] Required: Red border, error message\n- [ ] Range: \"Yield must be between 0-100%\"\n- [ ] Exceeds: \"Quantity exceeds planned/available\"\n\n#### Permission\n\n- [ ] Unauthorized: Toast message\n- [ ] Button disabled: Tooltip explanation\n- [ ] Reverse denied: \"Manager/Admin permission required\"\n\n#### Business Logic\n\n- [ ] Sequence blocked: Alert showing blocking operation\n- [ ] Shortage: Red status badge\n- [ ] Cannot edit: \"WO is locked\"\n- [ ] Concurrent edit: \"Modified by another user\"\n\n#### Empty\n\n- [ ] No WOs: \"No active work orders found\"\n- [ ] No Ops: \"No operations found\"\n- [ ] No Materials: \"No materials found\"\n\n---\n\n## Permission-Based Access\n\n#### Work Order\n\n- [ ] Start WO: Operator, Supervisor, Admin\n- [ ] Pause WO: Operator, Supervisor, Admin (if enabled)\n- [ ] Resume WO: Operator, Supervisor, Admin\n- [ ] Complete WO: Supervisor, Manager, Admin\n- [ ] View: All authenticated\n\n#### Operation\n\n- [ ] Start: Operator, Supervisor, Admin\n- [ ] Complete: Operator, Supervisor, Admin\n- [ ] View: All authenticated\n\n#### Consumption\n\n- [ ] Record: Operator, Supervisor, Admin\n- [ ] Reverse: Manager, Admin only\n- [ ] View: All authenticated\n\n#### Yield\n\n- [ ] Update: Operator, Supervisor, Admin\n- [ ] View: All authenticated\n\n---\n\n## Accessibility\n\n#### Keyboard\n\n- [ ] Tab through all elements\n- [ ] Enter submits forms/dialogs\n- [ ] Escape closes modals\n- [ ] Focus visible\n\n#### Screen Reader\n\n- [ ] Table headers announced\n- [ ] Form labels associated\n- [ ] Errors announced\n- [ ] Status badges semantic\n- [ ] Modals announced\n\n#### Color Contrast\n\n- [ ] WCAG AA standard met (4.5:1)\n- [ ] Badges readable (color + icon)\n- [ ] Focus indicators clear\n\n---\n\n**Test Coverage**: 100% of Production module  \n**Last Updated**: 2026-02-08\n"