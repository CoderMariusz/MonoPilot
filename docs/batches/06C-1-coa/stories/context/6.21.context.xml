<?xml version="1.0" encoding="UTF-8"?>
<story>
  <metadata>
    <id>6.21</id>
    <title>CoA Verification Tracking</title>
    <batch>06C-1</batch>
    <status>drafted</status>
  </metadata>

  <description>Track CoA verification status for documentation</description>

  <dependencies>
    <requires>
      <story id="6.19">Certificate of Analysis Upload</story>
    </requires>
  </dependencies>

  <technical_context>
    <status_flow>
      <transition from="pending" to="verified"/>
      <transition from="pending" to="rejected"/>
    </status_flow>

    <api_endpoints>
      <endpoint method="PUT" path="/api/quality/coas/:id/verify">
        <description>Verify or reject CoA</description>
        <request>{ status: 'verified' | 'rejected', notes?: string }</request>
      </endpoint>
    </api_endpoints>

    <fields>
      <field name="verification_status">pending → verified | rejected</field>
      <field name="verified_by">User who verified</field>
      <field name="verified_at">Timestamp</field>
      <field name="verification_notes">Optional notes</field>
    </fields>
  </technical_context>

  <acceptance_criteria>
    <ac id="1">Status: pending → verified | rejected</ac>
    <ac id="2">QC marks as verified/rejected with notes</ac>
    <ac id="3">Verifier and timestamp recorded</ac>
  </acceptance_criteria>

  <functional_requirements>
    <fr id="QC-FR-23">System shall track CoA verification status</fr>
  </functional_requirements>
</story>
