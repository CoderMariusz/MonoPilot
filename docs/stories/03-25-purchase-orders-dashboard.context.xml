<story-context id="3-25-purchase-orders-dashboard" v="1.0">
  <metadata>
    <epicId>3</epicId>
    <storyId>25</storyId>
    <title>Purchase Orders Dashboard View</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-11-27</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <template>UI Component Pattern</template>
    <estimatedEffort>1 day</estimatedEffort>
  </metadata>

  <story>
    <asA>Planner</asA>
    <iWant>to see recent POs in compact cards, then a full table of all POs</iWant>
    <soThat>I can quickly see recent activity and find specific orders</soThat>
    <tasks>
      <task id="1" ac="AC-3.25.1">Create TopPOCards component (3 recent POs)</task>
      <task id="2" ac="AC-3.25.2">Create/refactor PurchaseOrdersTable with sorting/filtering</task>
      <task id="3" ac="AC-3.25.3">Implement mobile card view for table</task>
      <task id="4" ac="AC-3.25.4">Apply PlanningHeader to PO pages</task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="AC-3.25.1">Top 3 PO cards (max 80px each): PO#, Supplier, Date, Status badge. 3 columns desktop</criterion>
    <criterion id="AC-3.25.2">Table: PO#|Supplier|Date|Status|Total|Actions. Sortable, filterable (Status, Date, Supplier)</criterion>
    <criterion id="AC-3.25.3">Mobile: Table converts to expandable cards with smooth animation</criterion>
    <criterion id="AC-3.25.4">PlanningHeader visible, Create PO button, consistent px-6 py-6 padding</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/stories/03-25-purchase-orders-dashboard.md</path>
        <title>Story 3.25: Purchase Orders Dashboard</title>
        <section>Design Notes</section>
        <snippet>Top 3 PO cards + full table with filters and mobile card view</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>apps/frontend/components/planning/TopPOCards.tsx</path>
        <kind>component</kind>
        <symbol>TopPOCards</symbol>
        <reason>NEW - Recent PO cards component</reason>
      </artifact>
      <artifact>
        <path>apps/frontend/components/planning/PurchaseOrdersTable.tsx</path>
        <kind>component</kind>
        <symbol>PurchaseOrdersTable</symbol>
        <reason>CREATE/REFACTOR - Table with sorting, filtering, mobile view</reason>
      </artifact>
      <artifact>
        <path>apps/frontend/app/(authenticated)/planning/purchase-orders/page.tsx</path>
        <kind>page</kind>
        <symbol>PurchaseOrdersPage</symbol>
        <reason>UPDATE - Add header, table, consistent layout</reason>
      </artifact>
      <artifact>
        <path>apps/frontend/app/(authenticated)/planning/page.tsx</path>
        <kind>page</kind>
        <symbol>PlanningDashboard</symbol>
        <reason>UPDATE - Add TopPOCards section</reason>
      </artifact>
    </code>
    <dependencies>
      <node>
        <package name="@tanstack/react-table" version="^8.0.0" usage="Table sorting/filtering (optional)" />
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="ui">Top cards max 80px height</constraint>
    <constraint type="ui">Mobile breakpoint: &lt;768px triggers card view</constraint>
    <constraint type="architecture">Reuse existing API: GET /api/planning/purchase-orders</constraint>
  </constraints>

  <tests>
    <standards>E2E tests for PO listing, filtering, mobile view</standards>
    <locations>tests/e2e/purchase-orders.spec.ts</locations>
    <ideas>
      <idea ac="AC-3.25.1">Test top cards render with correct data</idea>
      <idea ac="AC-3.25.2">Test table sorting and filtering</idea>
      <idea ac="AC-3.25.3">Test mobile card view expansion</idea>
    </ideas>
  </tests>
</story-context>
