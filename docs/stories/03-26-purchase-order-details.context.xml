<story-context id="3-26-purchase-order-details" v="1.0">
  <metadata>
    <epicId>3</epicId>
    <storyId>26</storyId>
    <title>Purchase Order Details + Line Items Overview</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-11-27</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <template>UI Component Pattern</template>
    <estimatedEffort>1 day</estimatedEffort>
  </metadata>

  <story>
    <asA>Planner</asA>
    <iWant>to see PO details and line items in one overview screen</iWant>
    <soThat>I can quickly review orders without multiple clicks</soThat>
    <tasks>
      <task id="1" ac="AC-3.26.1">Create PODetailView component with overview section</task>
      <task id="2" ac="AC-3.26.2">Create POLineItemsTable component (readonly)</task>
      <task id="3" ac="AC-3.26.3">Link Edit button to separate edit page</task>
      <task id="4" ac="AC-3.26.4">Implement responsive layout for mobile</task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="AC-3.26.1">Overview: PO#, Status badge, Supplier, dates, total, notes, Edit button</criterion>
    <criterion id="AC-3.26.2">Line items table: Product|SKU|Qty|Unit|Price|Total|Status. Readonly in overview</criterion>
    <criterion id="AC-3.26.3">Edit button navigates to /planning/purchase-orders/[id]/edit</criterion>
    <criterion id="AC-3.26.4">Responsive: stacked layout, card view for lines on mobile</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/stories/03-26-purchase-order-details.md</path>
        <title>Story 3.26: PO Details</title>
        <section>Design Notes</section>
        <snippet>Overview section + readonly line items table in one view</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>apps/frontend/components/planning/PODetailView.tsx</path>
        <kind>component</kind>
        <symbol>PODetailView</symbol>
        <reason>NEW - PO overview component</reason>
      </artifact>
      <artifact>
        <path>apps/frontend/components/planning/POLineItemsTable.tsx</path>
        <kind>component</kind>
        <symbol>POLineItemsTable</symbol>
        <reason>NEW - Readonly line items table</reason>
      </artifact>
      <artifact>
        <path>apps/frontend/app/(authenticated)/planning/purchase-orders/[id]/page.tsx</path>
        <kind>page</kind>
        <symbol>PODetailPage</symbol>
        <reason>UPDATE - Use new components with header</reason>
      </artifact>
    </code>
    <dependencies>
      <node>
        <package name="react" version="^18.0.0" usage="React components" />
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="ui">Line items readonly in overview mode</constraint>
    <constraint type="architecture">Reuse existing API: GET /api/planning/purchase-orders/[id]</constraint>
  </constraints>

  <tests>
    <standards>E2E tests for PO detail view</standards>
    <locations>tests/e2e/purchase-orders.spec.ts</locations>
    <ideas>
      <idea ac="AC-3.26.1">Test overview section displays correct data</idea>
      <idea ac="AC-3.26.2">Test line items table renders correctly</idea>
      <idea ac="AC-3.26.3">Test Edit button navigation</idea>
    </ideas>
  </tests>
</story-context>
