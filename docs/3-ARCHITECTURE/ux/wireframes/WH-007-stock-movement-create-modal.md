# WH-007: Stock Movement Create Modal

**Module**: Warehouse
**Feature**: Manual Stock Movement (WH-FR-005)
**Status**: Ready for Implementation
**Last Updated**: 2025-12-14

---

## ASCII Wireframe

### Success State - LP Selected

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Move License Plate                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  License Plate Information                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  LP Number *                                                                  â”‚
â”‚  [LP-20241214-00000234                                    ] ğŸ”  [ğŸ“· Scan]    â”‚
â”‚                                                                               â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  LP#: LP-20241214-00000234                      Status: [Available] âœ“ â”‚    â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚    â”‚
â”‚  â”‚  Quantity: 100 kg                               QA Status: Passed      â”‚    â”‚
â”‚  â”‚  Batch: BATCH-2024-1214 | Expiry: 2025-06-14                           â”‚    â”‚
â”‚  â”‚  Current Location: WH-MAIN-A01 (Aisle A, Row 1)                        â”‚    â”‚
â”‚  â”‚  Warehouse: Main Warehouse                                              â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  [View LP Detail]                                                       â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚  Movement Details                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  From Location                                                                â”‚
â”‚  [WH-MAIN-A01 (Aisle A, Row 1)                            ] ğŸ”’ (read-only)   â”‚
â”‚  â„¹ï¸ Auto-filled from LP current location                                     â”‚
â”‚                                                                               â”‚
â”‚  To Location *                                                                â”‚
â”‚  [WH-MAIN-B05                                             â–¼]  ğŸ“             â”‚
â”‚    - WH-MAIN-RECV (Receiving Dock) - 85% capacity                            â”‚
â”‚    - WH-MAIN-A05 (Aisle A, Row 5) - 40% capacity                             â”‚
â”‚    - WH-MAIN-B05 (Aisle B, Row 5) - 60% capacity                             â”‚
â”‚    - WH-MAIN-STAGING (Staging Area) - 90% capacity âš ï¸                        â”‚
â”‚    - WH-MAIN-QC (Quality Control) - 10% capacity                             â”‚
â”‚                                                                               â”‚
â”‚  Move Quantity *                                                              â”‚
â”‚  [100                    ]  kg    â„¹ï¸ Max: 100 kg (full LP)                   â”‚
â”‚                                                                               â”‚
â”‚  ( ) Partial Move (qty < 100 kg) - will split LP automatically               â”‚
â”‚  (â€¢) Full Move (entire LP)                                                   â”‚
â”‚                                                                               â”‚
â”‚  â„¹ï¸ Partial moves create a new LP at destination with specified qty,         â”‚
â”‚     original LP qty reduced by moved amount                                  â”‚
â”‚                                                                               â”‚
â”‚  Move Type *                                                                  â”‚
â”‚  (â€¢) Manual         ( ) Transfer      ( ) Adjustment                          â”‚
â”‚                                                                               â”‚
â”‚  â„¹ï¸ Manual: User-initiated movement                                          â”‚
â”‚     Transfer: Part of Transfer Order                                         â”‚
â”‚     Adjustment: Inventory correction/relocation                              â”‚
â”‚                                                                               â”‚
â”‚  Reason                                                                       â”‚
â”‚  [Relocating to optimize FIFO flow                       ]                   â”‚
â”‚  [                                                        ]                   â”‚
â”‚                                                                               â”‚
â”‚  Location Capacity Check                                                      â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  Destination: WH-MAIN-B05 (Aisle B, Row 5)                             â”‚    â”‚
â”‚  â”‚  Current Occupancy: 60% (60/100 kg)                                    â”‚    â”‚
â”‚  â”‚  After Move: 160/100 kg (160%) âš ï¸ OVER CAPACITY                        â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  âš ï¸ Warning: Destination will exceed capacity by 60 kg                 â”‚    â”‚
â”‚  â”‚     Override capacity check? â˜‘                                         â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚  Movement Preview                                                             â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  Move#: SM-20241214-00156 (auto-generated)                             â”‚    â”‚
â”‚  â”‚  LP: LP-20241214-00000234                                              â”‚    â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚    â”‚
â”‚  â”‚  Quantity: 100 kg (full LP)                                            â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  FROM: WH-MAIN-A01 (Aisle A, Row 1)                                    â”‚    â”‚
â”‚  â”‚    â†“                                                                    â”‚    â”‚
â”‚  â”‚  TO:   WH-MAIN-B05 (Aisle B, Row 5)                                    â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  Type: Manual | Reason: Relocating to optimize FIFO flow               â”‚    â”‚
â”‚  â”‚  Date: Dec 14, 2024 11:45 AM                                           â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      [Cancel]  [Complete Move]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

* Required fields
```

### Success State - LP Selection Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Move License Plate                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  Select License Plate to Move                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  Search or Scan LP                                                            â”‚
â”‚  [Type LP number or scan barcode...                       ] ğŸ”  [ğŸ“· Scan]    â”‚
â”‚                                                                               â”‚
â”‚  Filters: [All Products â–¼]  [All Locations â–¼]  [Available Only â˜‘]           â”‚
â”‚                                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  Available License Plates                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LP-20241214-00000234  â”‚  Sugar White       â”‚  100 kg  â”‚  WH-MAIN-A01 â”‚  â”‚
â”‚  â”‚  Batch: BATCH-2024-1214 â”‚  Expiry: 2025-06-14 â”‚  QA: Passed           â”‚  â”‚
â”‚  â”‚                                                          [Select] â–¶    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  LP-20241210-00000198  â”‚  Flour Type A      â”‚  250 kg  â”‚  WH-MAIN-A03 â”‚  â”‚
â”‚  â”‚  Batch: BATCH-2024-1210 â”‚  Expiry: 2025-12-10 â”‚  QA: Passed          â”‚  â”‚
â”‚  â”‚                                                          [Select] â–¶    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  LP-20241208-00000145  â”‚  Salt Industrial   â”‚  50 kg   â”‚  WH-MAIN-B02 â”‚  â”‚
â”‚  â”‚  Batch: BATCH-2024-1208 â”‚  Expiry: N/A        â”‚  QA: Passed          â”‚  â”‚
â”‚  â”‚                                                          [Select] â–¶    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                               â”‚
â”‚  Showing 3 of 47 available LPs                              [Load More...]   â”‚
â”‚                                                                               â”‚
â”‚  â„¹ï¸ Only showing LPs with status='available' and qa_status='passed'          â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            [Cancel]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Loading State - Creating Movement

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Move License Plate                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”‚                          [ğŸ“¦ Package Icon + â³]                               â”‚
â”‚                                                                               â”‚
â”‚                      Processing Stock Movement...                             â”‚
â”‚                                                                               â”‚
â”‚       Moving LP-20241214-00000234 to WH-MAIN-B05                             â”‚
â”‚                                                                               â”‚
â”‚                          [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80%                                     â”‚
â”‚                                                                               â”‚
â”‚       Steps:                                                                  â”‚
â”‚       âœ“ Validating LP availability                                           â”‚
â”‚       âœ“ Validating destination location                                      â”‚
â”‚       âœ“ Checking location capacity                                           â”‚
â”‚       â³ Creating stock_move record                                           â”‚
â”‚       â³ Updating LP location                                                 â”‚
â”‚       â—‹ Recording movement audit trail                                       â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Error State - Validation Errors

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Move License Plate                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  âš ï¸ Cannot complete movement. Please fix the following errors:               â”‚
â”‚                                                                               â”‚
â”‚  License Plate Information                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  LP Number *                                                                  â”‚
â”‚  [LP-20241214-00000987                                    ] ğŸ”               â”‚
â”‚                                                                               â”‚
â”‚  âŒ LP not found or not available for movement                               â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  LP#: LP-20241214-00000987                      Status: [Reserved] âŒ  â”‚    â”‚
â”‚  â”‚  Product: Flour Type A (RM-FLOUR-001)                                  â”‚    â”‚
â”‚  â”‚  Reserved for: WO-2024-00234                                            â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  âŒ This LP is reserved for Work Order WO-2024-00234                    â”‚    â”‚
â”‚  â”‚     Cannot move reserved LPs. Please release reservation first.        â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚  Movement Details                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  To Location *                                                                â”‚
â”‚  [Select location...                                      â–¼]                  â”‚
â”‚  âŒ Destination location is required                                         â”‚
â”‚                                                                               â”‚
â”‚  Move Quantity *                                                              â”‚
â”‚  [150                    ]  kg                                                â”‚
â”‚  âŒ Move quantity exceeds available quantity (max: 100 kg)                   â”‚
â”‚                                                                               â”‚
â”‚  Move Type *                                                                  â”‚
â”‚  ( ) Manual         ( ) Transfer      ( ) Adjustment                          â”‚
â”‚  âŒ Move type is required                                                    â”‚
â”‚                                                                               â”‚
â”‚  Location Capacity Check                                                      â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  Destination: WH-MAIN-STAGING (Staging Area)                           â”‚    â”‚
â”‚  â”‚  Current Occupancy: 95% (95/100 kg)                                    â”‚    â”‚
â”‚  â”‚  After Move: 195/100 kg (195%) âš ï¸ OVER CAPACITY                        â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  âŒ Location capacity exceeded (current: 95 kg, max: 100 kg)           â”‚    â”‚
â”‚  â”‚     After move: 195 kg (95% over capacity)                             â”‚    â”‚
â”‚  â”‚     Override capacity check? â˜ (unchecked - required to proceed)      â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      [Cancel]  [Complete Move]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Error State - LP Not Available

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Move License Plate                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  License Plate Information                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  LP Number *                                                                  â”‚
â”‚  [LP-20241214-00000567                                    ] ğŸ”               â”‚
â”‚                                                                               â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  LP#: LP-20241214-00000567                      Status: [Consumed] âŒ  â”‚    â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚    â”‚
â”‚  â”‚  Consumed by: WO-2024-00189                                             â”‚    â”‚
â”‚  â”‚  Consumption Date: Dec 12, 2024 09:15 AM                                â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  âŒ This LP has been consumed and cannot be moved                       â”‚    â”‚
â”‚  â”‚     Status: consumed | Consumed by WO-2024-00189                        â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  [View LP History]  [Select Different LP]                               â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            [Cancel]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Success State - Partial Move with Split Preview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Move License Plate (Partial Move - Will Split LP)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  License Plate Information                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  LP#: LP-20241214-00000234                      Status: [Available] âœ“ â”‚    â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚    â”‚
â”‚  â”‚  Quantity: 100 kg                               QA Status: Passed      â”‚    â”‚
â”‚  â”‚  Batch: BATCH-2024-1214 | Expiry: 2025-06-14                           â”‚    â”‚
â”‚  â”‚  Current Location: WH-MAIN-A01 (Aisle A, Row 1)                        â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚  Movement Details                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                               â”‚
â”‚  To Location *                                                                â”‚
â”‚  [WH-MAIN-B05 (Aisle B, Row 5)                            â–¼]                 â”‚
â”‚                                                                               â”‚
â”‚  Move Quantity *                                                              â”‚
â”‚  [60                     ]  kg    âš ï¸ Partial move - will split LP            â”‚
â”‚                                                                               â”‚
â”‚  (â€¢) Partial Move (qty < 100 kg) - will split LP automatically               â”‚
â”‚  ( ) Full Move (entire LP)                                                   â”‚
â”‚                                                                               â”‚
â”‚  Move Type *                                                                  â”‚
â”‚  (â€¢) Manual         ( ) Transfer      ( ) Adjustment                          â”‚
â”‚                                                                               â”‚
â”‚  Reason                                                                       â”‚
â”‚  [Moving partial qty to production staging            ]                      â”‚
â”‚                                                                               â”‚
â”‚  âš ï¸ LP Split Preview                                                         â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚  â”‚  Original LP will be split into TWO license plates:                    â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  NEW LP (at destination WH-MAIN-B05):                                  â”‚    â”‚
â”‚  â”‚  LP#: LP-20241214-00000456 (auto-generated)                            â”‚    â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚    â”‚
â”‚  â”‚  Quantity: 60 kg                                                       â”‚    â”‚
â”‚  â”‚  Batch: BATCH-2024-1214 | Expiry: 2025-06-14                           â”‚    â”‚
â”‚  â”‚  Location: WH-MAIN-B05                                                 â”‚    â”‚
â”‚  â”‚  QA Status: Passed (inherited)                                         â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  ORIGINAL LP (remains at WH-MAIN-A01):                                 â”‚    â”‚
â”‚  â”‚  LP#: LP-20241214-00000234 (unchanged)                                 â”‚    â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚    â”‚
â”‚  â”‚  Quantity: 40 kg (reduced from 100 kg)                                 â”‚    â”‚
â”‚  â”‚  Batch: BATCH-2024-1214 | Expiry: 2025-06-14                           â”‚    â”‚
â”‚  â”‚  Location: WH-MAIN-A01 (unchanged)                                     â”‚    â”‚
â”‚  â”‚  QA Status: Passed (unchanged)                                         â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  Genealogy: Parent LP-20241214-00000234 â†’ Child LP-20241214-00000456  â”‚    â”‚
â”‚  â”‚             Operation: split | Quantity: 60 kg                         â”‚    â”‚
â”‚  +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+    â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      [Cancel]  [Complete Move & Split]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Success State - Movement Completed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Movement Completed                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”‚                          [âœ“ Success Icon - Green]                            â”‚
â”‚                                                                               â”‚
â”‚                   Stock Movement Completed Successfully                       â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Move Number: SM-20241214-00156                                        â”‚  â”‚
â”‚  â”‚  Move Date: Dec 14, 2024 11:45 AM                                      â”‚  â”‚
â”‚  â”‚  Type: Manual                                                           â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  License Plate: LP-20241214-00000234                                   â”‚  â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚  â”‚
â”‚  â”‚  Quantity Moved: 100 kg (full LP)                                      â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  FROM: WH-MAIN-A01 (Aisle A, Row 1)                                    â”‚  â”‚
â”‚  â”‚    â†“                                                                    â”‚  â”‚
â”‚  â”‚  TO:   WH-MAIN-B05 (Aisle B, Row 5)                                    â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  Reason: Relocating to optimize FIFO flow                              â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  âœ“ LP location updated to WH-MAIN-B05                                  â”‚  â”‚
â”‚  â”‚  âœ“ Stock move record created                                           â”‚  â”‚
â”‚  â”‚  âœ“ Audit trail recorded                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                               â”‚
â”‚  What would you like to do next?                                             â”‚
â”‚                                                                               â”‚
â”‚  [View Movement Details]  [Move Another LP]  [View LP Detail]                â”‚
â”‚                                                                               â”‚
â”‚  [View Movement History]  [Back to LP List]  [Close]                         â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Success State - Partial Move Completed with Split

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X] Movement Completed (LP Split)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”‚                          [âœ“ Success Icon - Green]                            â”‚
â”‚                                                                               â”‚
â”‚              Stock Movement Completed with LP Split                           â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Move Number: SM-20241214-00157                                        â”‚  â”‚
â”‚  â”‚  Move Date: Dec 14, 2024 11:50 AM                                      â”‚  â”‚
â”‚  â”‚  Type: Manual (Partial Move with Split)                                â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  Original LP: LP-20241214-00000234                                     â”‚  â”‚
â”‚  â”‚  Product: Sugar White (RM-SUGAR-001)                                   â”‚  â”‚
â”‚  â”‚  Quantity Moved: 60 kg (partial)                                       â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  âœ“ NEW LP Created:                                                     â”‚  â”‚
â”‚  â”‚    LP#: LP-20241214-00000456                                           â”‚  â”‚
â”‚  â”‚    Quantity: 60 kg                                                     â”‚  â”‚
â”‚  â”‚    Location: WH-MAIN-B05 (Aisle B, Row 5)                              â”‚  â”‚
â”‚  â”‚    Status: Available | QA: Passed                                      â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  âœ“ Original LP Updated:                                                â”‚  â”‚
â”‚  â”‚    LP#: LP-20241214-00000234                                           â”‚  â”‚
â”‚  â”‚    Quantity: 40 kg (reduced from 100 kg)                               â”‚  â”‚
â”‚  â”‚    Location: WH-MAIN-A01 (unchanged)                                   â”‚  â”‚
â”‚  â”‚    Status: Available | QA: Passed                                      â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  âœ“ Genealogy recorded (parent â†’ child relationship)                    â”‚  â”‚
â”‚  â”‚  âœ“ Stock move record created                                           â”‚  â”‚
â”‚  â”‚  âœ“ Audit trail recorded                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                               â”‚
â”‚  What would you like to do next?                                             â”‚
â”‚                                                                               â”‚
â”‚  [View New LP (456)]  [View Original LP (234)]  [View Movement Details]      â”‚
â”‚                                                                               â”‚
â”‚  [View Genealogy Tree]  [Move Another LP]  [Close]                           â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile View (<768px)

```
+----------------------------------+
|  < Move License Plate            |
|  [X]                             |
+----------------------------------+
|                                  |
|  LP Information                  |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      |
|                                  |
|  LP Number *                     |
|  [LP-20241214-00000234]          |
|  [ğŸ” Search] [ğŸ“· Scan]           |
|                                  |
|  +----------------------------+  |
|  | LP-20241214-00000234       |  |
|  | Status: Available âœ“        |  |
|  | Product: Sugar White       |  |
|  | Qty: 100 kg                |  |
|  | QA: Passed                 |  |
|  |                            |  |
|  | Current Location:          |  |
|  | WH-MAIN-A01                |  |
|  | (Aisle A, Row 1)           |  |
|  |                            |  |
|  | [View Details]             |  |
|  +----------------------------+  |
|                                  |
|  Movement Details                |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      |
|                                  |
|  From Location                   |
|  [WH-MAIN-A01      ] ğŸ”’          |
|  (read-only)                     |
|                                  |
|  To Location *                   |
|  [WH-MAIN-B05     â–¼]             |
|                                  |
|  Move Quantity *                 |
|  [100              ]  kg         |
|  Max: 100 kg                     |
|                                  |
|  Move Type *                     |
|  (â€¢) Manual                      |
|  ( ) Transfer                    |
|  ( ) Adjustment                  |
|                                  |
|  Reason                          |
|  [Relocating for   ]             |
|  [FIFO optimization]             |
|                                  |
|  Capacity Check                  |
|  +----------------------------+  |
|  | Destination: WH-MAIN-B05   |  |
|  | Current: 60% (60/100 kg)   |  |
|  | After move: 160 kg         |  |
|  | âš ï¸ Over capacity           |  |
|  | Override? â˜‘                |  |
|  +----------------------------+  |
|                                  |
|  Movement Preview                |
|  +----------------------------+  |
|  | Move#: SM-20241214-00156   |  |
|  | LP: LP-20241214-00000234   |  |
|  | Qty: 100 kg (full)         |  |
|  |                            |  |
|  | FROM: WH-MAIN-A01          |  |
|  |   â†“                        |  |
|  | TO: WH-MAIN-B05            |  |
|  |                            |  |
|  | Type: Manual               |  |
|  +----------------------------+  |
|                                  |
|  +----------------------------+  |
|  | [Cancel]                   |  |
|  +----------------------------+  |
|  | [Complete Move]            |  |
|  +----------------------------+  |
|                                  |
+----------------------------------+
```

---

## Key Components

### 1. LP Information Section

| Field | Source | Display | Editable |
|-------|--------|---------|----------|
| lp_number | license_plates.lp_number | "LP-20241214-00000234" | Yes (search/scan) |
| status | license_plates.status | Badge with color | No |
| product_name | products.name via license_plates.product_id | "Sugar White (RM-SUGAR-001)" | No |
| quantity | license_plates.quantity | "100 kg" | No (but used for validation) |
| uom | license_plates.uom | "kg" | No |
| batch_number | license_plates.batch_number | "BATCH-2024-1214" | No |
| expiry_date | license_plates.expiry_date | "2025-06-14" | No |
| qa_status | license_plates.qa_status | "Passed" | No |
| current_location | locations.code via license_plates.location_id | "WH-MAIN-A01 (Aisle A, Row 1)" | No |
| warehouse | warehouses.name via license_plates.warehouse_id | "Main Warehouse" | No |

### 2. Movement Details Form Fields

| Field | Type | Required | Default | Validation |
|-------|------|----------|---------|------------|
| lp_number | String (Autocomplete) | Yes | - | Must exist, status='available' |
| from_location_id | UUID (Readonly) | Yes | LP.location_id | Auto-filled, read-only |
| to_location_id | UUID (Dropdown) | Yes | - | Must be active location, different from source |
| move_qty | Numeric | Yes | LP.quantity | > 0, <= LP.quantity |
| move_type | Enum | Yes | 'manual' | One of: manual, transfer, adjustment |
| reason | Text | No | - | Max 250 chars |

### 3. Location Dropdown Display

| Field | Source | Display |
|-------|--------|---------|
| location_code | locations.code | "WH-MAIN-B05" |
| location_name | locations.name | "(Aisle B, Row 5)" |
| capacity_pct | Calculated | "60% capacity" |
| capacity_indicator | Calculated | âš ï¸ if >90%, normal if <90% |

### 4. Move Quantity Validation Logic

```typescript
// Validation function
function validateMoveQuantity(
  moveQty: number,
  lpQty: number
): ValidationResult {
  if (moveQty <= 0) {
    return {
      valid: false,
      error: 'Move quantity must be greater than 0'
    };
  }

  if (moveQty > lpQty) {
    return {
      valid: false,
      error: `Move quantity exceeds available quantity (max: ${lpQty} ${uom})`
    };
  }

  // Check if partial move
  if (moveQty < lpQty) {
    return {
      valid: true,
      warning: 'Partial move - will split LP automatically',
      requiresSplit: true
    };
  }

  // Full move
  return {
    valid: true,
    requiresSplit: false
  };
}
```

### 5. Location Capacity Validation Logic

```typescript
// Capacity check function
function validateLocationCapacity(
  toLocationId: string,
  moveQty: number,
  enableLocationCapacity: boolean
): ValidationResult {
  if (!enableLocationCapacity) {
    return { valid: true }; // Capacity checking disabled
  }

  const location = await getLocation(toLocationId);

  if (!location.max_capacity) {
    return { valid: true }; // No capacity limit set
  }

  const currentOccupancy = await getLocationCurrentOccupancy(toLocationId);
  const afterMove = currentOccupancy + moveQty;
  const capacityPct = (afterMove / location.max_capacity) * 100;

  if (afterMove > location.max_capacity) {
    return {
      valid: false,
      error: `Location capacity exceeded (current: ${currentOccupancy} ${uom}, max: ${location.max_capacity} ${uom})`,
      warning: `After move: ${afterMove} ${uom} (${capacityPct.toFixed(0)}% over capacity)`,
      requiresOverride: true,
      capacityData: {
        current: currentOccupancy,
        max: location.max_capacity,
        afterMove: afterMove,
        overageQty: afterMove - location.max_capacity,
        overagePct: capacityPct - 100
      }
    };
  }

  if (capacityPct >= 90) {
    return {
      valid: true,
      warning: `Location will be at ${capacityPct.toFixed(0)}% capacity after move`
    };
  }

  return { valid: true };
}
```

### 6. LP Split Logic (Partial Move)

```typescript
// Split operation for partial move
function executeSplitMove(
  lpId: string,
  moveQty: number,
  toLocationId: string,
  moveType: string,
  reason: string
): SplitMoveResult {
  const originalLP = await getLP(lpId);
  const remainingQty = originalLP.quantity - moveQty;

  // Create new LP at destination with moveQty
  const newLP = await createLP({
    product_id: originalLP.product_id,
    quantity: moveQty,
    uom: originalLP.uom,
    location_id: toLocationId,
    warehouse_id: originalLP.warehouse_id,
    status: 'available',
    qa_status: originalLP.qa_status,
    batch_number: originalLP.batch_number,
    supplier_batch_number: originalLP.supplier_batch_number,
    expiry_date: originalLP.expiry_date,
    manufacture_date: originalLP.manufacture_date,
    catch_weight_kg: (originalLP.catch_weight_kg / originalLP.quantity) * moveQty, // proportional
    parent_lp_id: lpId
  });

  // Update original LP quantity (reduce)
  await updateLP(lpId, {
    quantity: remainingQty,
    catch_weight_kg: (originalLP.catch_weight_kg / originalLP.quantity) * remainingQty // proportional
  });

  // Record genealogy
  await createGenealogy({
    parent_lp_id: lpId,
    child_lp_id: newLP.id,
    operation_type: 'split',
    quantity: moveQty,
    operation_date: new Date()
  });

  // Create stock_move record
  await createStockMove({
    lp_id: newLP.id,
    move_type: moveType,
    from_location_id: originalLP.location_id,
    to_location_id: toLocationId,
    quantity: moveQty,
    reason: `${reason} (split from ${originalLP.lp_number})`,
    status: 'completed'
  });

  return {
    newLP: newLP,
    updatedLP: originalLP,
    stockMove: stockMove
  };
}
```

### 7. Movement Preview

| Field | Value |
|-------|-------|
| move_number | Auto-generated: "SM-20241214-00156" |
| lp_number | From selected LP: "LP-20241214-00000234" |
| product | From LP: "Sugar White (RM-SUGAR-001)" |
| quantity | User input: "100 kg (full LP)" or "60 kg (partial)" |
| from_location | From LP: "WH-MAIN-A01 (Aisle A, Row 1)" |
| to_location | User selection: "WH-MAIN-B05 (Aisle B, Row 5)" |
| move_type | User selection: "Manual" |
| reason | User input: "Relocating to optimize FIFO flow" |
| move_date | Current timestamp: "Dec 14, 2024 11:45 AM" |

---

## Main Actions

### Primary Actions

| Action | Validation | Result |
|--------|------------|--------|
| **[Complete Move]** (Full) | LP available, location valid, qty valid | Creates stock_move, updates LP.location_id, shows success |
| **[Complete Move & Split]** (Partial) | LP available, location valid, qty < LP.qty | Creates new LP, updates original LP qty, creates genealogy, creates stock_move, shows success |
| **[Cancel]** | None | Closes modal, no changes saved |

### Secondary Actions

| Action | Description |
|--------|-------------|
| **[View LP Detail]** | Opens LP detail modal/page |
| **[Select Different LP]** | Returns to LP selection mode |
| **[View LP History]** | Shows movement history for LP |
| **[ğŸ“· Scan]** | Opens camera/scanner for barcode scan |

### Post-Move Actions (Success Modal)

| Action | Description |
|--------|-------------|
| **[View Movement Details]** | Navigate to stock move detail |
| **[Move Another LP]** | Close success, reopen move modal |
| **[View LP Detail]** | Navigate to moved LP detail |
| **[View New LP]** (split) | Navigate to newly created LP detail |
| **[View Original LP]** (split) | Navigate to original LP detail |
| **[View Genealogy Tree]** (split) | Navigate to genealogy tree view |
| **[View Movement History]** | Navigate to stock moves list |
| **[Back to LP List]** | Navigate to LP list page |
| **[Close]** | Close modal, refresh parent page |

---

## States

| State | Description | Elements Shown |
|-------|-------------|----------------|
| **Loading - LP Selection** | Loading available LPs | Skeleton for LP list |
| **Success - LP Selection** | User selects from available LPs | LP list with search/filter |
| **Success - Movement Form** | LP selected, user fills movement details | Full form with LP info, destination, qty |
| **Loading - Creating Movement** | Submitting movement | Progress indicator with steps |
| **Error - LP Not Available** | LP reserved/consumed/blocked | Error message with LP status, alternative actions |
| **Error - Validation** | Form validation errors | Error messages inline + summary banner |
| **Success - Partial Move Preview** | User entered qty < LP.qty | Split preview showing both LPs after operation |
| **Success - Completed (Full)** | Full LP moved successfully | Success message with movement details |
| **Success - Completed (Split)** | Partial move with split completed | Success message with new LP and updated original LP |

---

## API Endpoints

### Get Available LPs for Movement

```
GET /api/warehouse/license-plates/available?warehouse_id={uuid}

Query Params:
- warehouse_id (optional): filter by warehouse
- product_id (optional): filter by product
- location_id (optional): filter by location
- status=available (default)
- qa_status=passed (optional filter)

Response:
{
  "success": true,
  "data": [
    {
      "id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "product": {
        "id": "uuid-sugar",
        "code": "RM-SUGAR-001",
        "name": "Sugar White"
      },
      "quantity": 100,
      "uom": "kg",
      "batch_number": "BATCH-2024-1214",
      "expiry_date": "2025-06-14",
      "qa_status": "passed",
      "status": "available",
      "location": {
        "id": "uuid-loc-a01",
        "code": "WH-MAIN-A01",
        "name": "Aisle A, Row 1"
      },
      "warehouse": {
        "id": "uuid-wh-main",
        "code": "WH-MAIN",
        "name": "Main Warehouse"
      }
    }
  ],
  "total_count": 47
}
```

### Get LP Details for Movement

```
GET /api/warehouse/license-plates/:lpId/move-details

Response:
{
  "success": true,
  "data": {
    "lp": {
      "id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "product_id": "uuid-sugar",
      "product_code": "RM-SUGAR-001",
      "product_name": "Sugar White",
      "quantity": 100,
      "uom": "kg",
      "batch_number": "BATCH-2024-1214",
      "supplier_batch_number": "SUP-BATCH-456",
      "expiry_date": "2025-06-14",
      "manufacture_date": "2024-12-10",
      "catch_weight_kg": null,
      "qa_status": "passed",
      "status": "available",
      "location_id": "uuid-loc-a01",
      "location_code": "WH-MAIN-A01",
      "location_name": "Aisle A, Row 1",
      "warehouse_id": "uuid-wh-main",
      "warehouse_name": "Main Warehouse",
      "is_reserved": false,
      "reservation_ref": null
    },
    "available_locations": [
      {
        "id": "uuid-loc-recv",
        "code": "WH-MAIN-RECV",
        "name": "Receiving Dock",
        "active": true,
        "max_capacity": 500,
        "current_occupancy": 425,
        "capacity_pct": 85,
        "available_capacity": 75
      },
      {
        "id": "uuid-loc-b05",
        "code": "WH-MAIN-B05",
        "name": "Aisle B, Row 5",
        "active": true,
        "max_capacity": 100,
        "current_occupancy": 60,
        "capacity_pct": 60,
        "available_capacity": 40
      }
    ],
    "warehouse_settings": {
      "enable_location_capacity": true,
      "enable_split_merge": true,
      "auto_generate_lp_number": true,
      "lp_number_prefix": "LP-",
      "lp_number_sequence_length": 8
    }
  }
}

Response (Error - LP Not Available):
{
  "success": false,
  "error": {
    "code": "LP_NOT_AVAILABLE",
    "message": "License plate is not available for movement",
    "details": {
      "lp_id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "current_status": "reserved",
      "reason": "Reserved for Work Order WO-2024-00234",
      "available_statuses": ["available"]
    }
  }
}
```

### Create Stock Movement

```
POST /api/warehouse/stock-moves

Request:
{
  "lp_id": "uuid-lp-234",
  "to_location_id": "uuid-loc-b05",
  "move_qty": 100,
  "move_type": "manual",
  "reason": "Relocating to optimize FIFO flow",
  "override_capacity": false
}

Response (Success - Full Move):
{
  "success": true,
  "data": {
    "stock_move": {
      "id": "uuid-move-156",
      "move_number": "SM-20241214-00156",
      "lp_id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "move_type": "manual",
      "from_location_id": "uuid-loc-a01",
      "from_location_code": "WH-MAIN-A01",
      "to_location_id": "uuid-loc-b05",
      "to_location_code": "WH-MAIN-B05",
      "quantity": 100,
      "uom": "kg",
      "move_date": "2024-12-14T11:45:00Z",
      "status": "completed",
      "reason": "Relocating to optimize FIFO flow"
    },
    "lp_updated": {
      "id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "location_id": "uuid-loc-b05",
      "location_code": "WH-MAIN-B05",
      "quantity": 100,
      "status": "available"
    },
    "operation_type": "full_move"
  },
  "message": "Stock movement completed successfully"
}

Response (Success - Partial Move with Split):
{
  "success": true,
  "data": {
    "stock_move": {
      "id": "uuid-move-157",
      "move_number": "SM-20241214-00157",
      "lp_id": "uuid-lp-456",
      "lp_number": "LP-20241214-00000456",
      "move_type": "manual",
      "from_location_id": "uuid-loc-a01",
      "from_location_code": "WH-MAIN-A01",
      "to_location_id": "uuid-loc-b05",
      "to_location_code": "WH-MAIN-B05",
      "quantity": 60,
      "uom": "kg",
      "move_date": "2024-12-14T11:50:00Z",
      "status": "completed",
      "reason": "Moving partial qty to production staging (split from LP-20241214-00000234)"
    },
    "new_lp": {
      "id": "uuid-lp-456",
      "lp_number": "LP-20241214-00000456",
      "product_id": "uuid-sugar",
      "product_name": "Sugar White",
      "quantity": 60,
      "uom": "kg",
      "location_id": "uuid-loc-b05",
      "location_code": "WH-MAIN-B05",
      "status": "available",
      "qa_status": "passed",
      "batch_number": "BATCH-2024-1214",
      "expiry_date": "2025-06-14",
      "parent_lp_id": "uuid-lp-234"
    },
    "original_lp_updated": {
      "id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "quantity": 40,
      "location_id": "uuid-loc-a01",
      "location_code": "WH-MAIN-A01",
      "status": "available",
      "previous_quantity": 100
    },
    "genealogy": {
      "id": "uuid-gen-123",
      "parent_lp_id": "uuid-lp-234",
      "child_lp_id": "uuid-lp-456",
      "operation_type": "split",
      "quantity": 60,
      "operation_date": "2024-12-14T11:50:00Z"
    },
    "operation_type": "partial_move_with_split"
  },
  "message": "Stock movement completed with LP split"
}

Response (Error - Validation):
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Movement validation failed",
    "details": [
      {
        "field": "move_qty",
        "error": "Move quantity exceeds available quantity (max: 100 kg)"
      },
      {
        "field": "to_location_id",
        "error": "Destination location is required"
      },
      {
        "field": "lp_id",
        "error": "LP is reserved for Work Order WO-2024-00234 and cannot be moved"
      }
    ]
  }
}

Response (Error - Capacity Exceeded):
{
  "success": false,
  "error": {
    "code": "LOCATION_CAPACITY_EXCEEDED",
    "message": "Destination location capacity exceeded",
    "details": {
      "location_id": "uuid-loc-staging",
      "location_code": "WH-MAIN-STAGING",
      "current_occupancy": 95,
      "max_capacity": 100,
      "move_qty": 100,
      "after_move": 195,
      "overage_qty": 95,
      "overage_pct": 95,
      "override_required": true
    }
  }
}

Response (Error - LP Status):
{
  "success": false,
  "error": {
    "code": "INVALID_LP_STATUS",
    "message": "Cannot move LP with current status",
    "details": {
      "lp_id": "uuid-lp-234",
      "lp_number": "LP-20241214-00000234",
      "current_status": "consumed",
      "required_status": "available",
      "consumed_by": "WO-2024-00189",
      "consumption_date": "2024-12-12T09:15:00Z"
    }
  }
}
```

### Check Location Capacity

```
GET /api/warehouse/locations/:locationId/capacity?move_qty={number}

Response:
{
  "success": true,
  "data": {
    "location": {
      "id": "uuid-loc-b05",
      "code": "WH-MAIN-B05",
      "name": "Aisle B, Row 5",
      "max_capacity": 100,
      "current_occupancy": 60,
      "capacity_pct": 60,
      "available_capacity": 40
    },
    "after_move": {
      "occupancy": 160,
      "capacity_pct": 160,
      "available_capacity": -60,
      "over_capacity": true,
      "overage_qty": 60,
      "overage_pct": 60
    },
    "capacity_check": {
      "can_accept": false,
      "requires_override": true,
      "warning_message": "Location will exceed capacity by 60 kg (60%)"
    }
  }
}
```

---

## Business Rules

### Movement Validation Rules

| Rule | Condition | Action |
|------|-----------|--------|
| **LP exists** | LP not found | Block with error |
| **LP available** | status != 'available' | Block with error showing current status |
| **LP not reserved** | is_reserved = true | Block with error showing reservation ref |
| **LP not blocked** | status = 'blocked' | Block with error |
| **LP not consumed** | status = 'consumed' | Block with error showing consumption ref |
| **QA approved** | qa_status != 'passed' (optional strict mode) | Warn or block based on settings |
| **Destination different** | to_location_id = from_location_id | Block with error |
| **Destination active** | location.active = false | Block with error |
| **Move qty valid** | move_qty <= 0 OR move_qty > LP.qty | Block with error |
| **Capacity check** | enable_location_capacity AND after_move > max_capacity | Block unless override checked |

### LP Split Rules (Partial Move)

- **Automatic split** when move_qty < LP.quantity
- **New LP created** at destination with move_qty
- **Original LP qty reduced** by move_qty, remains at original location
- **Genealogy recorded** with operation_type='split'
- **All attributes inherited**: batch, expiry, QA status, product
- **Catch weight proportionally split** if applicable
- **New LP number auto-generated** per settings

### Stock Move Record Rules

- **One stock_move record created** per operation
- **For full move**: lp_id references original LP
- **For partial move**: lp_id references newly created LP
- **Status**: Always 'completed' (instant execution)
- **Audit trail**: Records from_location, to_location, qty, reason, moved_by, timestamp

---

## Accessibility

### Touch Targets
- All buttons: 48x48dp minimum
- Form inputs: 48dp height minimum
- Radio buttons: 48x48dp touch area
- Dropdown triggers: 48dp height minimum
- LP card: 64dp minimum tap area

### Contrast
- Header text: 4.5:1 minimum
- Form labels: 4.5:1 minimum
- Error messages: Red text with 4.5:1 contrast (#C41E3A on white)
- Success messages: Green text with 4.5:1 contrast (#2E7D32 on white)
- Warning messages: Orange text with 4.5:1 contrast (#F57C00 on white)
- Disabled/readonly fields: 3:1 minimum with visual cue (lock icon)

### Screen Reader
- Modal title: "Move License Plate Modal"
- LP info: "License Plate LP-20241214-00000234, Status Available, Product Sugar White, Quantity 100 kilograms, Current Location WH-MAIN-A01 Aisle A Row 1"
- Movement form: "From Location WH-MAIN-A01, read-only. To Location dropdown, required field"
- Capacity warning: "Warning: Destination location will exceed capacity by 60 kilograms. Override capacity check checkbox, unchecked"
- Partial move: "Warning: Partial move will split License Plate. New LP will be created at destination with 60 kilograms, original LP will have 40 kilograms remaining"
- Errors: "Error: Move quantity exceeds available quantity. Maximum 100 kilograms"
- Success: "Stock movement SM-20241214-00156 completed successfully. License Plate LP-20241214-00000234 moved to WH-MAIN-B05"

### Keyboard Navigation
- Tab: Navigate between form fields
- Enter: Submit form, expand/collapse sections
- Escape: Close modal, cancel operation
- Arrow keys: Navigate dropdown options, radio buttons
- Space: Toggle checkboxes, select radio buttons

### Focus Indicators
- All interactive elements have visible focus ring (2px blue outline)
- Focus trap within modal (cannot tab outside)
- Focus returns to trigger button on modal close
- Initial focus on LP number search field

---

## Responsive Breakpoints

| Breakpoint | Layout Changes |
|------------|----------------|
| **Desktop (>1024px)** | Full 2-column layout, LP info and form side-by-side |
| **Tablet (768-1024px)** | Single column, stacked sections, full-width inputs |
| **Mobile (<768px)** | Full stack, collapsible LP info card, one field per row, large buttons |

### Mobile Optimizations
- LP info collapses into expandable card (tap to expand)
- Location dropdown shows abbreviated names
- Capacity check collapses into expandable section
- Movement preview collapses until form valid
- Scan button prominent and large (64x64dp)
- Number inputs use numeric keyboard

---

## Performance Requirements

### Load Time Targets
- Modal open (with LP pre-selected): <200ms
- Modal open (LP selection mode): <500ms
- LP details fetch: <100ms
- Available locations fetch: <200ms
- Capacity check: <100ms
- Form validation (client-side): <50ms
- Movement creation API (full): <300ms
- Movement creation API (split): <500ms
- Genealogy creation: <100ms

### Caching Strategy
```typescript
// Cache available LPs list
'org:{orgId}:warehouse:available-lps'  // 30 sec TTL

// Cache LP details
'org:{orgId}:lp:{lpId}:move-details'  // 20 sec TTL

// Cache location capacity
'org:{orgId}:location:{locationId}:capacity'  // 10 sec TTL

// Cache warehouse settings
'org:{orgId}:warehouse:settings'  // 5 min TTL

// Invalidate on actions
// - Stock move creation â†’ Clear LP cache + location capacity cache
// - LP split â†’ Clear LP cache + genealogy cache
// - Settings update â†’ Clear settings cache
```

---

## Testing Requirements

### Unit Tests
- Move quantity validation (zero, negative, exceeds LP qty)
- LP status validation (available, reserved, consumed, blocked)
- Location capacity calculation and validation
- Partial move split logic (qty calculation, proportional catch weight)
- Move type validation
- Destination location validation (active, different from source)
- Capacity override logic
- LP number search/filter logic

### Integration Tests
- `GET /api/warehouse/license-plates/available` - List available LPs
- `GET /api/warehouse/license-plates/:lpId/move-details` - Get LP for movement
- `POST /api/warehouse/stock-moves` - Create full movement
- `POST /api/warehouse/stock-moves` - Create partial movement (split)
- `GET /api/warehouse/locations/:locationId/capacity` - Check capacity
- `GET /api/warehouse/settings` - Get warehouse settings
- RLS enforcement (user can only move LPs in their org)
- LP status validation (reserved LP blocked)
- Capacity validation (over-capacity blocked without override)
- Split LP creation with genealogy
- Audit trail recording

### E2E Tests
- Open modal from LP List "Move" button (LP pre-selected)
- Open modal from LP Detail "Move LP" button (LP pre-selected)
- Open modal from Movement List "Create Movement" (LP selection mode)
- Search/scan LP by number
- Select LP from available list
- Fill destination location
- Enter full move quantity (qty = LP.qty)
- Submit full move successfully
- View success modal with movement details
- Enter partial move quantity (qty < LP.qty)
- View split preview
- Submit partial move successfully
- View success modal with new LP and original LP details
- Validate capacity error shown when over capacity
- Override capacity check and submit successfully
- Validate reserved LP error shown
- Validate consumed LP error shown
- Validate move qty exceeds available error shown
- Navigate to LP detail from success modal
- Navigate to genealogy tree from success modal (split)
- Mobile responsive layout
- Keyboard navigation works
- Screen reader announces errors and success
- Barcode scan integration works

---

## Quality Gates

Before handoff to FRONTEND-DEV:
- [x] All 4 states defined (Loading, Success Form, Validation Errors, Success Completed)
- [x] Additional states for partial move split preview and split success
- [x] API endpoints documented with full request/response schemas
- [x] Move quantity validation logic specified
- [x] LP status validation logic specified
- [x] Location capacity validation logic specified
- [x] LP split logic fully documented (partial move)
- [x] Genealogy creation logic specified
- [x] Stock move creation rules defined
- [x] Error handling comprehensive (LP status, capacity, validation)
- [x] Success modal with next actions defined
- [x] Mobile responsive design specified
- [x] Accessibility requirements met (WCAG 2.1 AA)
- [x] Performance targets defined
- [x] Testing requirements comprehensive
- [x] Integration with WH-002 (LP List), WH-003 (LP Detail) specified

---

## Handoff to FRONTEND-DEV

```yaml
feature: Stock Movement Create Modal
story: WH-007
fr_coverage: WH-FR-005, WH-FR-006
approval_status:
  mode: "auto_approve"
  user_approved: true  # AUTO-APPROVED per user request
deliverables:
  wireframe: docs/3-ARCHITECTURE/ux/wireframes/WH-007-stock-movement-create-modal.md
  api_endpoints:
    - GET /api/warehouse/license-plates/available
    - GET /api/warehouse/license-plates/:lpId/move-details
    - POST /api/warehouse/stock-moves
    - GET /api/warehouse/locations/:locationId/capacity
    - GET /api/warehouse/settings
states_per_screen:
  - loading_lp_list
  - success_lp_selection
  - success_movement_form
  - loading_creation
  - validation_errors
  - lp_not_available_error
  - partial_move_split_preview
  - success_completed_full
  - success_completed_split
validation_rules:
  - lp_exists_and_available
  - lp_not_reserved
  - lp_not_consumed
  - lp_not_blocked
  - move_qty_greater_than_zero
  - move_qty_not_exceeds_lp_qty
  - destination_location_required
  - destination_different_from_source
  - destination_location_active
  - location_capacity_check
  - capacity_override_required_if_exceeded
  - move_type_required
business_logic:
  - auto_split_on_partial_move
  - genealogy_creation_on_split
  - stock_move_record_creation
  - lp_location_update_on_full_move
  - lp_qty_reduction_on_split
  - new_lp_creation_on_split
  - proportional_catch_weight_split
breakpoints:
  mobile: "<768px"
  tablet: "768-1024px"
  desktop: ">1024px"
accessibility:
  touch_targets: "48dp minimum"
  contrast: "4.5:1 minimum"
  wcag_level: "AA"
  keyboard_navigation: "full support"
  screen_reader: "comprehensive announcements"
  focus_management: "focus trap, initial focus on LP search"
related_screens:
  - WH-002: License Plate List (trigger for this modal)
  - WH-003: License Plate Detail (trigger for this modal, navigation target)
  - WH-008: Stock Movement List (navigation target)
  - WH-009: Genealogy Tree View (navigation target for splits)
integration_points:
  - Technical Module: Product details
  - Settings Module: Warehouse locations, capacity settings
  - Settings: Warehouse settings (capacity, auto-generate LP number)
database_tables:
  - stock_moves (creates record)
  - license_plates (updates location_id on full move, updates qty on split, creates record on split)
  - lp_genealogy (creates record on split)
  - lp_reservations (checks for active reservations)
  - locations (reads capacity, checks active status)
  - warehouse_settings (reads validation rules)
```

---

**Status**: Ready for Implementation
**Approval Mode**: auto_approve
**User Approved**: Yes (Auto-approved per user request)
**Iterations**: 0 of 3
**Estimated Effort**: 12-14 hours
**Quality Target**: 95/100
**Complexity**: High (complex validation, LP split logic, capacity checking, multi-entity operations)

---

## Notes

### Design Decisions

1. **LP Pre-selection vs Selection Mode**: Modal supports both - opened from LP List/Detail (pre-selected) or from Movement List (selection required)

2. **Automatic Split on Partial Move**: When user enters qty < LP.qty, system automatically triggers split operation creating new LP at destination (per WH-FR-006)

3. **Split Preview**: Show detailed preview of both LPs (new and original) before submission to help users verify split operation

4. **Capacity Validation**: Real-time capacity check with visual feedback (percentage, overage qty/pct) and override option

5. **Move Type Options**: Support manual, transfer, adjustment per PRD - manual is default for user-initiated moves

6. **Read-only Source Location**: Auto-filled from LP, prevents user error of selecting wrong source

7. **Genealogy Tracking**: Automatic genealogy record creation on split for full traceability (parent â†’ child relationship)

8. **Success Modal Variations**: Different success modals for full move vs split move, showing relevant details for each operation type

9. **LP Status Validation**: Strict validation prevents moving reserved, consumed, or blocked LPs with clear error messages

10. **Barcode Scan Integration**: Prominent scan button for mobile scanner workflows

### Future Enhancements

- **Batch Move**: Move multiple LPs in single operation
- **Guided Putaway**: Suggest optimal destination based on FIFO/FEFO (integrate with WH-FR-019, WH-FR-020)
- **Transit Location**: Support intermediate transit location for cross-warehouse moves
- **Move Templates**: Save common movement patterns (e.g., "Receiving â†’ QC â†’ Storage")
- **Pick List Integration**: Auto-create movements from pick lists (WO/TO)
- **Voice-Directed Movement**: Voice commands for hands-free scanner operation
- **Pallet Move**: Move entire pallet with all contained LPs
- **Undo Movement**: Reverse movement within configurable time window
- **Movement Approval**: Require approval for certain movement types
- **Capacity Reservation**: Reserve capacity during movement planning
