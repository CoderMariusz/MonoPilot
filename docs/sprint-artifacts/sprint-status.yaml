# Sprint Status - MonoPilot
# Generated: 2025-11-20
# Project: MonoPilot
# Project Key: monopilot
# Tracking System: sprint-status.yaml
# Story Location: docs/sprint-artifacts

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic exists but not contexted
#   - contexted: Epic tech context created (required before drafting stories)
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - drafted: Story file created in stories folder
#   - ready-for-dev: Draft approved and story context created
#   - in-progress: Developer actively working on implementation
#   - review: Under SM review (via code-review workflow)
#   - done: Story completed
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - completed: Retrospective has been done
#
# WORKFLOW NOTES:
# ===============
# - Sprint 0 is CRITICAL prerequisite before Epic 1-8 implementation
# - Sprint 0 addresses 8 gaps identified in Solutioning Gate Check
# - Epics should be 'contexted' before stories can be 'drafted'
# - Stories can be worked in parallel if team capacity allows
# - SM typically drafts next story after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', SM reviews, then Dev moves to 'done'

generated: 2025-11-20
project: MonoPilot
project_key: monopilot
tracking_system: sprint-status.yaml
story_location: docs/sprint-artifacts

development_status:
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # SPRINT 0: Readiness Assessment Critical Gaps
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # Duration: 8-10 days
  # Purpose: Fix 8 critical gaps before Epic 1-8 implementation
  # Source: docs/readiness-assessment/3-gaps-and-risks.md
  # Status: REQUIRED before proceeding to Epic 1
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  sprint-0: backlog

  # Gap 1: Missing Integration Test Stories (5-7 days)
  # Issue: 5 cross-epic integration points lack dedicated test stories
  # Impact: Integration failures discovered late in testing
  # Owner: Test Engineer + Senior Dev
  0-1-integration-test-stories: backlog
    # Subtasks:
    # - Story 0.1.1: PO → ASN → GRN → LP Integration Test
    # - Story 0.1.2: WO → Consumption → Genealogy Integration Test
    # - Story 0.1.3: QA Hold Blocks Consumption Integration Test
    # - Story 0.1.4: External Service Resilience Tests
    # - Story 0.1.5: Redis Cache Fallback Test

  # Gap 2: LP Genealogy Integrity Not Fully Specified (1 day) ✅ DONE
  # Issue: Story 5.7 lacks error handling, transaction atomicity, trace verification ACs
  # Impact: Compliance failure if genealogy breaks (FDA traceability)
  # Owner: Product Manager + Architect
  # Completed: 2025-11-20
  0-2-update-story-5-7-genealogy: done
    # Actions COMPLETED:
    # ✅ Add AC: Transaction rollback if genealogy fails
    # ✅ Add AC: FK validation for parent_lp_id
    # ✅ Add AC: Forward/backward trace verification
    # ✅ Add recall simulation SQL examples (forward + backward trace)
    # ✅ Add orphan detection logic
    # ✅ Add circular dependency prevention
    # ✅ Add FDA 21 CFR Part 117 compliance reference
    # Commit: feat(sprint-0): add comprehensive LP Genealogy Integrity ACs to Story 5.7

  # Gap 3: BOM Snapshot Immutability Not Tested (2 days)
  # Issue: No story verifies WO materials unchanged when BOM updated
  # Impact: Wrong materials consumed → batch rejection
  # Owner: Senior Dev
  0-3-bom-snapshot-immutability: backlog
    # Actions:
    # - Add Story to Epic 3: "Verify BOM Snapshot Immutability"
    # - AC: Update BOM → Verify WO wo_materials unchanged
    # - AC: WO UI shows snapshot BOM version + effective date
    # - E2E test: Create WO → Update BOM → Verify immutability

  # Gap 4: RLS Policy Test Suite Missing (3-4 days)
  # Issue: No automated tests for RLS policies on 40+ tables
  # Impact: Data leakage between tenants
  # Owner: Senior Dev + Security
  0-4-rls-policy-test-suite: backlog
    # Actions:
    # - Create RLS Policy Test Suite story
    # - SQL unit test for every table's RLS policy
    # - AC: Tenant A cannot read Tenant B data
    # - AC: CI/CD fails if new table lacks RLS test

  # Gap 5: Scanner Offline Queue Management Not Specified (2-3 days)
  # Issue: No story defines max offline operations, sync strategy
  # Impact: Cache overflow → data loss
  # Owner: Frontend Dev
  0-5-scanner-offline-queue: backlog
    # Actions:
    # - Add Story to Epic 5: "Scanner Offline Queue Management"
    # - AC: Max 100 offline operations, warning at 80
    # - AC: UI shows queue size + sync status
    # - AC: Sync on reconnect within 2s
    # - E2E test: 100 offline ops → sync → verify all saved

  # Gap 6: Transaction Atomicity Not Specified (1 day) ✅ DONE
  # Issue: Multi-record operations (GRN + LP, Consumption + Genealogy) lack rollback ACs
  # Impact: Partial success → data inconsistency
  # Owner: Product Manager
  # Completed: 2025-11-20
  0-6-transaction-atomicity-acs: done
    # Actions COMPLETED:
    # ✅ Update Story 5.11 AC: "GRN + LP creation atomic (7-step transaction flow, rollback scenarios)"
    # ✅ Update Story 4.6 AC: "WO Complete atomic (9-step transaction, genealogy creation)"
    # ✅ Update Story 4.11 AC: "Material Consumption atomic (11-step transaction, over-consumption validation)"
    # ✅ Add FK validation, concurrency handling, data integrity guarantees
    # ✅ Add user-friendly error messages for all failure points
    # Commit: feat(sprint-0): add Transaction Atomicity ACs to Stories 4.6, 4.11, 5.11

  # Gap 7: Error Handling Pattern Missing (1 day) ✅ DONE
  # Issue: Many stories lack ACs for database constraints, external service failures
  # Impact: Poor user experience, debugging difficulty
  # Owner: Product Manager
  # Completed: 2025-11-20
  0-7-ac-template-checklist: done
    # Actions COMPLETED:
    # ✅ Create AC Template Checklist (.bmad/templates/ac-template-checklist.md)
    # ✅ 8 mandatory categories: happy path, field validations, duplicates, FK, external services, transactions, edge cases, error messages
    # ✅ 4 optional enhancements: performance, accessibility, audit trail, RLS
    # ✅ Story review checklist for PM approval
    # ✅ Examples by story type (CRUD, Integration)
    # Commit: feat(sprint-0): create AC Template Checklist for comprehensive story acceptance criteria

  # Gap 8: FR → Story Traceability Matrix Not Documented (2 days) ✅ DONE
  # Issue: Epic files don't include FR coverage matrix
  # Impact: Cannot verify all FRs implemented
  # Owner: Product Manager
  # Completed: 2025-11-20
  0-8-fr-story-traceability: done
    # Actions COMPLETED:
    # ✅ Add FR Coverage Matrix section to all 8 epic files
    # ✅ Epic 1: 11 FRs → 12 stories (100% P0 coverage)
    # ✅ Epic 2: 18 FRs → 24 stories (100% P0 coverage)
    # ✅ Epic 3: 16 FRs → 22 stories (100% P0, 3 Phase 2)
    # ✅ Epic 4: 15 FRs → 20 stories (100% P0 coverage)
    # ✅ Epic 5: 30 FRs → 35 stories (100% P0 coverage)
    # ✅ Epic 6: 26 FRs → 28 stories (100% P0 coverage)
    # ✅ Epic 7: 25 FRs → 28 stories (100% P0 coverage)
    # ✅ Epic 8: 74 FRs → 68 stories (Phase 2, deferred)
    # ✅ Format: FR ID → Story IDs with forward + reverse traceability
    # ✅ Verified: 215 FRs, 237 stories, 100% P0 traceability
    # Commit: feat(sprint-0): add FR→Story Traceability Matrix to all 8 epic files

  sprint-0-retrospective: optional
    # Review Sprint 0 effectiveness:
    # - Were all 8 gaps addressed?
    # - Did we discover additional gaps?
    # - Are we ready for Epic 1 implementation?
    # - What did we learn about the readiness assessment process?

  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # EPIC 1-8: Standard Implementation (27-36 weeks)
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # Status: BLOCKED until Sprint 0 is completed
  # Next Command: /bmad:bmm:workflows:sprint-planning (will add Epic 1-8)
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  # Epic 1-8 will be added here after Sprint 0 completion
  # Use: pnpm bmad:list to see epic structure
  # Use: /bmad:bmm:workflows:sprint-planning (with Epic 1-8 mode) to populate

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Sprint 0 Summary
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Total Tasks: 8
# Completed Tasks (Quick Wins): 4 ✅
# Remaining Tasks: 4 (scheduled for new session)
# Estimated Effort: 8-10 days total (4 days completed)
# Critical Priority: ALL tasks must be completed before Epic 1
#
# COMPLETED (Quick Wins Session - 2025-11-20):
#   ✅ Gap 7: AC Template Checklist created
#   ✅ Gap 8: FR→Story Traceability Matrix added to all 8 epics
#   ✅ Gap 6: Transaction Atomicity ACs added (Stories 4.6, 4.11, 5.11)
#   ✅ Gap 2: LP Genealogy Integrity ACs added (Story 5.7)
#
# PENDING (New Session after PR merge):
#   - Gap 1: Integration Test Stories (5-7 days)
#   - Gap 4: RLS Policy Test Suite (3-4 days)
#   - Gap 3: BOM Snapshot Immutability (2 days)
#   - Gap 5: Scanner Offline Queue Management (2-3 days)
#
# Success Criteria (4/8 COMPLETE):
#   ✅ Epic files updated with FR traceability matrices (215 FRs, 237 stories, 100% P0 coverage)
#   ✅ AC template checklist created (.bmad/templates/ac-template-checklist.md)
#   ✅ Transaction atomicity specified in 3 critical stories (5.11, 4.6, 4.11)
#   ✅ LP Genealogy integrity specified with FDA compliance (Story 5.7)
#   ⏳ Integration test stories added (Gap 1)
#   ⏳ RLS policy test suite implemented (Gap 4)
#   ⏳ Scanner offline queue management specified (Gap 5)
#   ⏳ BOM snapshot immutability verified (Gap 3)
#
# Next Steps After Quick Wins Session:
# 1. Push commits to remote (4 commits ready)
# 2. Create PR for review
# 3. After PR merge: Start new session for remaining 4 tasks (Gap 1, 3, 4, 5)
# 4. After all 8 tasks complete: Run retrospective (optional but recommended)
# 5. Re-run /bmad:bmm:workflows:sprint-planning to add Epic 1-8
# 6. Begin Epic 1 implementation with /bmad:bmm:workflows:create-story
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
