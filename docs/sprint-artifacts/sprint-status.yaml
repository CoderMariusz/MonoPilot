# Sprint Status - MonoPilot Implementation Tracking
# Generated: 2025-11-16
# Project: MonoPilot
# Project Key: monopilot
# Tracking System: BMM Method
# Story Location: docs/sprint-artifacts

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic exists in roadmap but not contexted
#   - contexted: Epic tech context created (required before drafting stories)
#
# Story Status:
#   - backlog: Story only exists in epic file/roadmap
#   - drafted: Story file created in stories folder
#   - ready-for-dev: Draft approved and story context created
#   - in-progress: Developer actively working on implementation
#   - review: Under SM review (via code-review workflow)
#   - done: Story completed
#   - superseded: Story replaced by alternative approach
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - completed: Retrospective has been done
#
# WORKFLOW NOTES:
# ===============
# - Epics should be 'contexted' before stories can be 'drafted'
# - Stories can be worked in parallel if team capacity allows
# - SM typically drafts next story after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', SM reviews, then Dev moves to 'done'
#
# IMPORTANT: P0 modules (Technical, Planning, Production, Warehouse, Scanner, Settings)
# are ALREADY IMPLEMENTED but contain CRITICAL INCONSISTENCIES between DB schema,
# TypeScript types, API, and UI that must be fixed BEFORE Phase 1.
#
# Epic 0 tracks audit and fixes for P0 modules (PREREQUISITE for Phase 1).
# Phases 1-4 track NEW features from roadmaps (P1/P2 priorities).

generated: 2025-11-16
project: MonoPilot
project_key: monopilot
tracking_system: file-system
story_location: docs/sprint-artifacts
audit_report: docs/P0-MODULES-AUDIT-REPORT-2025-11-14.md

development_status:
  # ========================================
  # EPIC 0: P0 Modules Data Integrity Audit & Fix (PREREQUISITE)
  # Priority: P0 (CRITICAL - MUST COMPLETE BEFORE PHASE 1)
  # Total Effort: 71 SP (142 hours, ~7 weeks)
  # Audit Report: docs/P0-MODULES-AUDIT-REPORT-2025-11-14.md
  # ========================================

  # Epic 0: P0 Modules Data Integrity Audit & Fix
  epic-0: backlog

  # Story 0.1: Fix PO Header warehouse_id (CRITICAL)
  0-1-fix-po-header-warehouse-id: done

  # Story 0.2: Fix TO Status enum (MEDIUM)
  0-2-fix-to-status-enum: done

  # Story 0.3: Fix License Plate Status enum (CRITICAL)
  0-3-fix-lp-status-enum: done

  # Story 0.4: Fix License Plate QA Status enum (MEDIUM)
  0-4-fix-lp-qa-status-enum: done

  # Story 0.5: Fix License Plate UoM constraint (MEDIUM) - SUPERSEDED by 0.8 (reset strategy)
  0-5-fix-lp-uom-constraint: superseded

  # Story 0.6: Deep Audit - Work Orders, Products, BOMs (VERIFICATION) - SUPERSEDED by 0.8 (reset strategy)
  0-6-deep-audit-wo-products-boms: superseded

  # Story 0.7: Automated Validation Tests (PREVENTION) - MOVED to Epic 1 (post-reset)
  0-7-automated-validation-tests: superseded

  # ========================================
  # NEW STORIES from Brainstorming Session (2025-11-15)
  # Strategy Change: Incremental fixes → Database Reset + Architecture.md as Single Source
  # Reference: docs/brainstorming-session-results-2025-11-15.md
  # ========================================

  # Story 0.8: Konsolidacja Migracji (64 → 1 Master) (CRITICAL)
  0-8-konsolidacja-migracji: done

  # Story 0.9: Database Reset Execution (CRITICAL)
  0-9-database-reset-execution: done

  # Story 0.10: Fix Session Management (MEDIUM)
  0-10-fix-session-management: done

  # Story 0.11: Architecture.md Completeness Audit (LOW)
  0-11-architecture-completeness-audit: done

  # Story 0.12: Architecture.md Auto-Generation Setup (LOW)
  0-12-architecture-auto-generation-setup: done

  # ========================================
  # NEW STORIES from BOM Analysis (2025-11-19)
  # Critical fixes for BOM edit and history functionality
  # Reference: Architecture.md Pattern 22b
  # ========================================

  # Story 0.13: Add Missing BOM API GET Endpoints (CRITICAL - BOM edit broken)
  0-13-add-bom-api-get-endpoints: review

  # Story 0.14: Fix BOM History Display (CRITICAL - History not showing)
  0-14-fix-bom-history-display: review

  # ========================================
  # NEW STORIES from PO Analysis (2025-11-19)
  # Critical fixes for PO database/API/types alignment
  # Reference: Architecture.md po_header/po_line sections
  # ========================================

  # Story 0.15: PO Database & API Alignment (CRITICAL - Data layer mismatch)
  0-15-po-database-api-alignment: review

  # Story 0.16: TO Database & API Alignment (CRITICAL - Data layer mismatch)
  0-16-to-database-api-alignment: review

  # Story 0.17: LP Database & API Alignment (CRITICAL - Data layer mismatch)
  # Note: 13 SP. Missing QA fields, wrong types (string→number), wrong names (item_id→product_id)
  0-17-lp-database-api-alignment: review

  # Story 0.18: WO Database & API Alignment (CRITICAL - Data layer mismatch)
  # Note: Wrong types (string→number), wrong names (quantity→planned_qty, due_date→scheduled_date)
  0-18-wo-database-api-alignment: ready-for-dev

  # Story 0.19: Products & BOMs Database & API Alignment (CRITICAL - LARGEST FIX)
  # Note: 21 SP - sku vs part_number, version string→number, scrap_std_pct→scrap_percent, ~32 columns to add
  0-19-products-boms-database-api-alignment: ready-for-dev

  epic-0-retrospective: done

  # ========================================
  # PHASE 1: Compliance & Audit Foundation (0-3 Months)
  # Priority: P1 (Critical - Market Entry Blockers)
  # Reference: docs/MonoPilot-PRD-2025-11-13.md
  # ========================================

  # Epic 1.1: Enable pgAudit Extension (Audit Trail)
  epic-1-1: done
  1-1-enable-pgaudit-extension: done  # 23h (~3 days) - Context generated 2025-11-16 | Completed 2025-11-16
  epic-1-1-retrospective: optional

  # Epic 1.2: Electronic Signatures Workflow [DEFERRED TO P2 GROWTH]
  epic-1-2: deferred
  1-2-electronic-signatures-workflow: deferred  # 33h (~4-5 days) - Context generated 2025-11-16 | Moved to P2 Growth Phase
  epic-1-2-retrospective: optional

  # Epic 1.3: FSMA 204 Compliance Enhancements [DEFERRED TO P1 GROWTH]
  epic-1-3: deferred
  1-3-fsma-204-compliance-enhancements: deferred  # 46h (~6 days) - Context generated 2025-11-16 | Moved to P1 Growth Phase
  epic-1-3-retrospective: optional

  # Epic 1.4: Planning Module Complete Redesign (EXPANDED - UX + Data Integrity)
  # Duration: 5-6 weeks | ROI: $296k/year | Source: ux-design-planning-module.md
  epic-1-4: backlog

  # Phase 0: Planning UX Redesign (P0 - CRITICAL)
  1-4-1-spreadsheet-mode-bulk-creation: ready-for-dev  # Variant B: Excel-like (68h ~8-10 days) - Context generated 2025-11-16
  1-4-2-timeline-mode-visual-scheduling: ready-for-dev  # Variant C: Gantt (80h ~10 days) - Context generated 2025-11-16
  1-4-3-wizard-mode-onboarding: ready-for-dev           # Variant D: Wizard (40h ~5 days) - Context generated 2025-11-16

  # Phase 1: Data Integrity Fixes (P1)
  1-4-4-planning-data-integrity-fixes: ready-for-dev    # Data integrity (48h ~6 days) - Context generated 2025-11-16

  epic-1-4-retrospective: optional

  # Epic 1.5: Production Module Complete Redesign (EXPANDED - UX + Dashboard)
  # Duration: 5 weeks | ROI: $180k/year | Source: ux-design-production-module.md
  epic-1-5: backlog

  # Phase 0: Production UX Redesign (P0 - CRITICAL)
  1-5-1-wo-kanban-board-variant-b: ready-for-dev        # Kanban (68h ~8-9 days) - Context generated 2025-11-16
  1-5-2-production-templates-variant-c: review           # Templates (20h ~2-3 days) - COMPLETED 2025-11-16
  1-5-3-realtime-dashboard-widgets: ready-for-dev       # Widgets (48h ~6 days) - Context generated 2025-11-16

  # Phase 1: Advanced Analytics (P1)
  1-5-4-advanced-analytics-variant-d: ready-for-dev     # Analytics (56h ~7 days) - Context generated 2025-11-16

  epic-1-5-retrospective: optional

  # Epic 1.6: Technical + Settings UX Redesign (EXPANDED - NEW SCOPE)
  # Duration: 6-8 weeks | ROI: $41k/year | Source: ux-design-technical-module.md + ux-design-settings-module.md
  epic-1-6: backlog

  # Phase 0: Technical Module UX Redesign (P0)
  1-6-1-grouped-dashboard-3-categories: review   # Grouped dashboard (20h ~2-3 days) - COMPLETED 2025-11-16
  1-6-2-bom-timeline-multi-version: review       # BOM timeline (30h ~4 days) - COMPLETED 2025-11-16 ✅
  1-6-3-allergen-matrix-visualization: review # Allergen matrix (30h ~4 days) - COMPLETED 2025-11-16 ✅

  # Phase 1: Settings Module UX Redesign (P1)
  1-6-4-settings-wizard-onboarding: ready-for-dev       # Org setup wizard (30h ~4 days) - Context generated 2025-11-16
  1-6-5-settings-templates-preconfig: ready-for-dev     # Industry templates (25h ~3 days) - Context generated 2025-11-16

  epic-1-6-retrospective: optional

  # Epic 1.7: Scanner Module UX Redesign (NEW EPIC - CRITICAL)
  # Duration: 4-5 weeks | ROI: $250k/year | Source: ux-design-scanner-module.md
  # Priority: P0 (implement FIRST - highest frequency, biggest ROI)
  epic-1-7: contexted

  # Phase 0: Scanner UX Redesign MVP (P0 - CRITICAL)
  1-7-1-single-screen-scanner-variant-b: done  # Camera viewfinder, atomic LP generation (PostgreSQL sequence), batch prediction, offline queue - APPROVED ✅
  1-7-2-gloves-friendly-tap-targets: backlog      # 60px buttons, 16px spacing, visual feedback (2-3 days)
  1-7-3-offline-indicator-queue: backlog          # Offline badge, queue counter, auto-sync (2 days)

  # Phase 1: Scanner Pro Features (P1)
  1-7-4-bulk-mode-variant-d: backlog              # Desktop table view, keyboard shortcuts, expert toggle (5-7 days)
  1-7-5-camera-performance-optimization: backlog  # <1s start, barcode overlay, multi-format (2-3 days)

  epic-1-7-retrospective: optional

  # ========================================
  # PHASE 2: Operational Excellence (3-6 Months)
  # Priority: P1 (High - Competitive Parity)
  # ========================================

  # Epic 2.1: Quality Module (QA/QC)
  epic-2-1: backlog
  2-1-quality-module-qa-qc: backlog
  epic-2-1-retrospective: optional

  # Epic 2.2: Shipping Module
  epic-2-2: backlog
  2-2-shipping-module: backlog
  epic-2-2-retrospective: optional

  # Epic 2.3: Deviation Management Workflow
  epic-2-3: backlog
  2-3-deviation-management-workflow: backlog
  epic-2-3-retrospective: optional

  # Epic 2.4: Downtime Tracking
  epic-2-4: backlog
  2-4-downtime-tracking: backlog
  epic-2-4-retrospective: optional

  # Epic 2.5: Background Job Queue (BullMQ)
  epic-2-5: backlog
  2-5-background-job-queue-bullmq: backlog
  epic-2-5-retrospective: optional

  # Epic 2.6: Document Management (Supabase Storage)
  epic-2-6: backlog
  2-6-document-management-supabase-storage: backlog
  epic-2-6-retrospective: optional

  # Epic 2.7: Notification System
  epic-2-7: backlog
  2-7-notification-system: backlog
  epic-2-7-retrospective: optional

  # ========================================
  # NPD MODULE EPICS (Phase 2 - DEFERRED from MVP)
  # Priority: P2 (Medium - Premium Add-On)
  # Duration: 4-6 weeks (7 epics, 47 stories)
  # Reference: docs/NPD-Module-Epics.md
  # Note: Moved from parallel track to Phase 2 - focus on MVP first
  # ========================================

  # Epic NPD-6: Database Schema & Infrastructure (FOUNDATION - MUST BE FIRST)
  epic-npd-6: backlog
  npd-6-1-create-core-npd-tables: done
  npd-6-2-create-supporting-npd-tables: done
  npd-6-3-implement-rls-policies: done
  npd-6-4-modify-existing-tables-for-npd: done
  npd-6-5-create-temporal-versioning-constraints: done
  npd-6-6-setup-edge-functions-cicd: done
  epic-npd-6-retrospective: done

  # Epic NPD-1: Core NPD Project Management
  epic-npd-1: backlog
  npd-1-1-npdprojectsapi-crud-operations: done
  npd-1-2-stage-gate-workflow-logic: done
  npd-1-3-npd-dashboard-kanban-board-ui: deferred  # Was in-progress, deferred for MVP focus
  npd-1-4-gate-checklists-management: backlog
  npd-1-5-approval-workflow-integration: backlog
  npd-1-6-timeline-view-csv-export: backlog
  npd-1-7-rbac-implementation: backlog
  npd-1-8-notifications-architecture-implementation: backlog
  npd-1-9-project-detail-page-navigation: backlog
  npd-1-10-e2e-tests-for-core-project-management: backlog
  epic-npd-1-retrospective: optional

  # Epic NPD-2: Formulation Versioning & Management
  epic-npd-2: backlog
  npd-2-1-formulationsapi-crud-versioning-logic: backlog
  npd-2-2-formulation-items-management: backlog
  npd-2-3-allergen-auto-aggregation: backlog
  npd-2-4-effective-date-management-overlap-detection: backlog
  npd-2-5-version-locking-immutability: backlog
  npd-2-6-formulation-lineage-tracking: backlog
  npd-2-7-version-comparison-ui: backlog
  npd-2-8-clone-formulation-feature: backlog
  npd-2-9-formulation-spreadsheet-editor-ui: backlog
  epic-npd-2-retrospective: optional

  # Epic NPD-3: Handoff Wizard (NPD → Production)
  epic-npd-3: backlog
  npd-3-1-handoff-wizard-step-1-validation-checklist: backlog
  npd-3-2-handoff-wizard-step-2-product-decision: backlog
  npd-3-3-handoff-wizard-step-3-bom-transfer-logic: backlog
  npd-3-4-handoff-wizard-step-4-pilot-wo-creation: backlog
  npd-3-5-handoff-wizard-step-5-execute-transactionally: backlog
  npd-3-6-event-sourcing-implementation: backlog
  npd-3-7-npd-only-mode-excel-pdf-export: backlog
  npd-3-8-handoff-wizard-ui-5-step-stepper: backlog
  epic-npd-3-retrospective: optional

  # Epic NPD-4: Risk Management
  epic-npd-4: backlog
  npd-4-1-risksapi-crud-operations: backlog
  npd-4-2-risk-score-calculation: backlog
  npd-4-3-mitigation-tracking-status-workflow: backlog
  npd-4-4-risk-matrix-ui: backlog
  epic-npd-4-retrospective: optional

  # Epic NPD-5: Costing & Compliance
  epic-npd-5: backlog
  npd-5-1-costingapi-target-estimated-actual-cost-management: backlog
  npd-5-2-cost-variance-calculation-alerts: backlog
  npd-5-3-finance-approval-workflow-for-standard-cost: backlog
  npd-5-4-document-upload-supabase-storage-integration: backlog
  npd-5-5-document-metadata-tracking-history: backlog
  npd-5-6-compliance-checklist-validation: backlog
  epic-npd-5-retrospective: optional

  # Epic NPD-7: E2E Testing & Documentation
  epic-npd-7: backlog
  npd-7-1-e2e-test-suite-full-npd-flow: backlog
  npd-7-2-e2e-test-suite-dual-mode-scenarios: backlog
  npd-7-3-performance-testing: backlog
  npd-7-4-api-documentation-generation: backlog
  npd-7-5-user-guide-release-notes: backlog
  epic-npd-7-retrospective: optional

  # ========================================
  # PHASE 3: IoT & Integration (6-12 Months)
  # Priority: P1-P2 (High-to-Medium - Competitive Differentiation)
  # ========================================

  # Epic 3.1: IoT Gateway & OPC UA Integration
  epic-3-1: backlog
  3-1-iot-gateway-opc-ua-integration: backlog
  epic-3-1-retrospective: optional

  # Epic 3.2: Advanced Reporting & BI Engine
  epic-3-2: backlog
  3-2-advanced-reporting-bi-engine: backlog
  epic-3-2-retrospective: optional

  # Epic 3.3: ERP Integration Connectors
  epic-3-3: backlog
  3-3-erp-integration-connectors: backlog
  epic-3-3-retrospective: optional

  # Epic 3.4: Warehouse Task Queue & Cycle Counting
  epic-3-4: backlog
  3-4-warehouse-task-queue-cycle-counting: backlog
  epic-3-4-retrospective: optional

  # ========================================
  # PHASE 4: Advanced Features (12-18 Months)
  # Priority: P2-P3 (Medium-to-Low - Future Differentiation)
  # ========================================

  # Epic 4.1: AI-Powered Recall Simulation
  epic-4-1: backlog
  4-1-ai-powered-recall-simulation: backlog
  epic-4-1-retrospective: optional

  # Epic 4.2: AI Yield Prediction Model
  epic-4-2: backlog
  4-2-ai-yield-prediction-model: backlog
  epic-4-2-retrospective: optional

  # Epic 4.3: Predictive Maintenance (Equipment Failure Prediction)
  epic-4-3: backlog
  4-3-predictive-maintenance: backlog
  epic-4-3-retrospective: optional

  # Epic 4.4: BOM Costing & Cost Rollup
  epic-4-4: backlog
  4-4-bom-costing-cost-rollup: backlog
  epic-4-4-retrospective: optional

  # Epic 4.5: MonoPilot Marketplace
  epic-4-5: backlog
  4-5-monopilot-marketplace: backlog
  epic-4-5-retrospective: optional

  # Epic 4.6: Carbon Footprint Tracking (ESG Compliance)
  epic-4-6: backlog
  4-6-carbon-footprint-tracking-esg: backlog
  epic-4-6-retrospective: optional
