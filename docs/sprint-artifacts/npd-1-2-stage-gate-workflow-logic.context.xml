<?xml version="1.0" encoding="UTF-8"?>
<story-context>
  <metadata>
    <epicId>NPD-1</epicId>
    <storyId>1.2</storyId>
    <title>Stage-Gate Workflow Logic</title>
    <status>drafted</status>
    <generatedAt>2025-11-16</generatedAt>
  </metadata>

  <story>
    <asA>NPD Lead</asA>
    <iWant>to advance projects through gates (G0→G4)</iWant>
    <soThat>I can track progress through Stage-Gate methodology</soThat>

    <tasks>
      <task id="1" priority="high">
        <description>Implement advanceGate() Method</description>
        <acceptanceCriteria>AC-1, AC-2, AC-3, AC-5</acceptanceCriteria>
        <subtasks>
          <subtask>1.1: Add advanceGate() method to NPDProjectsAPI class</subtask>
          <subtask>1.2: Implement gate sequence validation logic</subtask>
          <subtask>1.3: Create gate-to-status mapping function</subtask>
          <subtask>1.4: Update current_gate and status fields atomically</subtask>
          <subtask>1.5: Set updated_at and updated_by fields</subtask>
        </subtasks>
      </task>

      <task id="2" priority="high">
        <description>Add Zod Validation Schema</description>
        <acceptanceCriteria>AC-6</acceptanceCriteria>
        <subtasks>
          <subtask>2.1: Define advanceGateSchema in packages/shared/schemas.ts</subtask>
          <subtask>2.2: Add schema validation in advanceGate() method</subtask>
        </subtasks>
      </task>

      <task id="3" priority="high">
        <description>Unit Tests for advanceGate()</description>
        <acceptanceCriteria>AC-1, AC-2, AC-3</acceptanceCriteria>
        <subtasks>
          <subtask>3.1: Test valid gate progression (G0→G1, G1→G2, etc.)</subtask>
          <subtask>3.2: Test rejection of gate skipping (G0→G3)</subtask>
          <subtask>3.3: Test rejection of backwards movement (G2→G1)</subtask>
          <subtask>3.4: Test status mapping (G0→'idea', G1→'concept', etc.)</subtask>
          <subtask>3.5: Test audit trail (updated_at, updated_by)</subtask>
          <subtask>3.6: Test error handling (invalid gate, non-existent project)</subtask>
          <subtask>3.7: Test RLS enforcement (cannot advance other org's projects)</subtask>
        </subtasks>
      </task>

      <task id="4" priority="medium">
        <description>Integration with Existing API</description>
        <acceptanceCriteria>AC-1</acceptanceCriteria>
        <subtasks>
          <subtask>4.1: Export advanceGate method from npdProjects.ts</subtask>
          <subtask>4.2: Ensure method follows MonoPilot API patterns (static, returns Promise&lt;T&gt;)</subtask>
          <subtask>4.3: Add JSDoc comments with examples</subtask>
        </subtasks>
      </task>

      <task id="5" priority="low">
        <description>E2E Test Placeholders (Deferred to NPD-1.3)</description>
        <acceptanceCriteria>Deferred</acceptanceCriteria>
        <subtasks>
          <subtask>5.1: Create apps/frontend/e2e/npd-gate-advancement.spec.ts</subtask>
          <subtask>5.2: Outline E2E tests (all marked test.skip until NPD UI exists)</subtask>
          <subtask>5.3: Test scenarios: valid progression, validation errors, multi-user concurrency</subtask>
        </subtasks>
      </task>

      <task id="6" priority="high">
        <description>TypeScript Type Generation</description>
        <acceptanceCriteria>All</acceptanceCriteria>
        <subtasks>
          <subtask>6.1: Run pnpm gen-types to update Supabase types</subtask>
          <subtask>6.2: Run pnpm type-check to verify zero TypeScript errors</subtask>
        </subtasks>
      </task>

      <task id="7" priority="medium">
        <description>Documentation Update</description>
        <acceptanceCriteria>All</acceptanceCriteria>
        <subtasks>
          <subtask>7.1: Run pnpm docs:update to regenerate API_REFERENCE.md</subtask>
          <subtask>7.2: Verify advanceGate() method is documented with JSDoc</subtask>
        </subtasks>
      </task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="AC-1" priority="MUST">
      <title>advanceGate() API Method</title>
      <description>Implement NPDProjectsAPI.advanceGate(id, toGate) method in apps/frontend/lib/api/npdProjects.ts</description>
      <details>
        - Method signature: static async advanceGate(id: string, toGate: NPDProjectGate): Promise&lt;NPDProject&gt;
        - Returns updated project with new current_gate value
        - Throws error if validation fails
      </details>
    </criterion>

    <criterion id="AC-2" priority="MUST">
      <title>Sequential Gate Validation</title>
      <description>Can only advance to the NEXT sequential gate (G0→G1, G1→G2, G2→G3, G3→G4, G4→Launched)</description>
      <details>
        - Cannot skip gates (e.g., G0→G3 is forbidden)
        - Cannot move backwards (e.g., G2→G1 is forbidden)
        - Validation error message: "Can only advance to next sequential gate. Current: {current_gate}, Attempted: {to_gate}"
      </details>
    </criterion>

    <criterion id="AC-3" priority="MUST">
      <title>Status Updates</title>
      <description>Gate advancement automatically updates project status field</description>
      <details>
        Mapping:
        - G0 → status: 'idea'
        - G1 → status: 'concept'
        - G2 → status: 'development'
        - G3 → status: 'testing'
        - G4 → status: 'testing' (continues testing)
        - Launched → status: 'launched'

        Status field is updated atomically with gate change (same transaction)
      </details>
    </criterion>

    <criterion id="AC-4" priority="DEFERRED">
      <title>Gate Entry Criteria Enforcement (Deferred to Story NPD-1.4)</title>
      <description>SIMPLIFIED FOR MVP: Gate checklists will be implemented in Story NPD-1.4 (Gate Checklists Management)</description>
      <details>
        - For this story: advanceGate() will NOT check checklists (validation placeholder only)
        - Reason: Checklist feature requires separate npd_gate_checklists table and UI (out of scope for NPD-1.2)
        - Implementation: Add "// TODO: Implement gate entry criteria check in Story NPD-1.4" comment
      </details>
    </criterion>

    <criterion id="AC-5" priority="MUST">
      <title>Audit Trail</title>
      <description>Log gate advancement in updated_at and updated_by fields</description>
      <details>
        - Use Supabase Auth to get current user ID for updated_by
        - Timestamp in ISO 8601 format (UTC)
      </details>
    </criterion>

    <criterion id="AC-6" priority="MUST">
      <title>Zod Validation</title>
      <description>Add advanceGateSchema to packages/shared/schemas.ts</description>
      <details>
        - Validate toGate parameter is valid NPDProjectGate enum value
        - Validate id is valid UUID
      </details>
    </criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <document path="docs/NPD-Module-Architecture-2025-11-15.md" section="API Contracts">
        <relevance>Defines NPDProjectsAPI.advanceGate() method contract</relevance>
        <keyPoints>
          - advanceGate(id: string, toGate: 'G1' | 'G2' | 'G3' | 'G4'): Promise&lt;ApiResponse&lt;NPDProject&gt;&gt;
          - Returns {data: NPDProject, error: null} on success
          - Returns {data: null, error: {message, code}} on failure
        </keyPoints>
      </document>

      <document path="docs/NPD-Module-Architecture-2025-11-15.md" section="Naming Conventions">
        <relevance>Defines naming patterns for TypeScript/API code</relevance>
        <keyPoints>
          - API Classes: PascalCase + API suffix (NPDProjectsAPI)
          - Functions: camelCase (advanceGate)
          - Types: PascalCase (NPDProject, NPDProjectGate)
        </keyPoints>
      </document>

      <document path="docs/NPD-Module-Architecture-2025-11-15.md" section="Implementation Patterns - Error Handling Pattern">
        <relevance>Standard error handling pattern for all NPD APIs</relevance>
        <keyPoints>
          - API layer MUST catch and transform errors
          - Return {data: null, error: {message, code}} format
          - Log errors with console.error('[NPDProjectsAPI.methodName]', error)
        </keyPoints>
      </document>

      <document path="docs/NPD-Module-Epics.md" section="Story NPD-1.2">
        <relevance>Source requirements for Story NPD-1.2</relevance>
        <keyPoints>
          - Sequential gate validation (G0→G1→G2→G3→G4→Launched)
          - Status mapping tied to gates
          - Gate entry criteria deferred to NPD-1.4
        </keyPoints>
      </document>
    </docs>

    <code>
      <existingCode path="apps/frontend/lib/api/npdProjects.ts">
        <class name="NPDProjectsAPI">
          <methods>
            <method name="getAll">Returns all NPD projects with optional filters</method>
            <method name="getById">Returns single NPD project by ID</method>
            <method name="create">Creates new NPD project with auto-generated project_number</method>
            <method name="update">Updates NPD project (immutable: project_number, org_id)</method>
            <method name="delete">Soft deletes NPD project (status='cancelled')</method>
          </methods>
          <patterns>
            - Static class methods
            - Promise-based async/await
            - Supabase client from '../supabase/client-browser'
            - Zod schema validation before operations
            - RLS enforcement via Supabase client (no manual org_id filtering)
            - Error handling: try/catch with console.error + throw
          </patterns>
        </class>

        <interfaces>
          <interface name="NPDProject">
            id: string;
            org_id: number;
            project_number: string;
            project_name: string;
            description?: string | null;
            status: 'idea' | 'concept' | 'development' | 'testing' | 'on_hold' | 'launched' | 'cancelled';
            current_gate: 'G0' | 'G1' | 'G2' | 'G3' | 'G4' | 'Launched';
            priority: 'high' | 'medium' | 'low';
            portfolio_category?: string | null;
            owner_id?: string | null;
            target_launch_date?: string | null;
            created_at: string;
            updated_at: string;
            created_by?: string | null;
            updated_by?: string | null;
          </interface>
        </interfaces>
      </existingCode>

      <existingCode path="packages/shared/schemas.ts">
        <schemas>
          <schema name="npdProjectStatusSchema">z.enum(['idea', 'concept', 'development', 'testing', 'on_hold', 'launched', 'cancelled'])</schema>
          <schema name="npdProjectGateSchema">z.enum(['G0', 'G1', 'G2', 'G3', 'G4', 'Launched'])</schema>
          <schema name="npdProjectPrioritySchema">z.enum(['high', 'medium', 'low'])</schema>
          <schema name="createNPDProjectSchema">Validates project creation input</schema>
          <schema name="updateNPDProjectSchema">Validates project update input</schema>
        </schemas>
        <note>Need to add advanceGateSchema following same pattern</note>
      </existingCode>

      <existingCode path="apps/frontend/lib/api/__tests__/npdProjects.test.ts">
        <testPatterns>
          - Uses Vitest (describe, it, expect, vi, beforeEach)
          - Mocks Supabase client: vi.mock('../../supabase/client-browser')
          - Mock query pattern: mockQuery = {select: vi.fn().mockReturnThis(), eq: vi.fn().mockReturnThis(), ...}
          - 15 existing tests covering CRUD operations
          - Test RLS enforcement, auto-generation, immutable fields, soft delete
        </testPatterns>
        <note>Follow same pattern for advanceGate() tests - add new describe block</note>
      </existingCode>
    </code>

    <dependencies>
      <library name="zod" version="latest" usage="Schema validation">
        - Import from 'zod'
        - Define schemas with z.object(), z.string(), z.enum()
        - Validate with schema.parse(data) - throws on failure
      </library>

      <library name="@supabase/supabase-js" version="latest" usage="Database client">
        - Import supabase from '../supabase/client-browser'
        - Query pattern: supabase.from('table').update({...}).eq('id', id).select().single()
        - RLS policies apply automatically (no manual org_id filtering)
      </library>

      <library name="vitest" version="latest" usage="Unit testing">
        - Import { describe, it, expect, vi, beforeEach } from 'vitest'
        - Mock pattern: vi.mock('module', () => ({...}))
        - Async test pattern: it('should ...', async () => {...})
      </library>
    </dependencies>
  </artifacts>

  <constraints>
    <architectural>
      <constraint type="API_PATTERN">
        <rule>All NPD API methods MUST be static</rule>
        <rationale>Consistency with 28 existing MonoPilot API classes</rationale>
      </constraint>

      <constraint type="ERROR_HANDLING">
        <rule>All API methods MUST return {data: T, error: null} on success, {data: null, error: {message, code}} on failure</rule>
        <rationale>Standard MonoPilot API response format (see Architecture doc)</rationale>
      </constraint>

      <constraint type="VALIDATION">
        <rule>All API method inputs MUST be validated with Zod schemas before database operations</rule>
        <rationale>Prevent invalid data from reaching database, provide clear error messages</rationale>
      </constraint>

      <constraint type="SECURITY">
        <rule>Never bypass RLS policies - always use Supabase client for queries</rule>
        <rationale>Multi-tenant isolation enforced at database level (40+ tables use this pattern)</rationale>
      </constraint>

      <constraint type="IMMUTABILITY">
        <rule>Gate advancement is one-way: can only advance to next gate, never backwards or skip</rule>
        <rationale>Stage-Gate methodology requirement - ensures process discipline</rationale>
      </constraint>

      <constraint type="ATOMICITY">
        <rule>Gate advancement MUST update both current_gate AND status in single database operation</rule>
        <rationale>Prevent race conditions where gate and status become inconsistent</rationale>
      </constraint>
    </architectural>

    <business>
      <constraint type="GATE_SEQUENCE">
        <rule>Valid progressions only: G0→G1, G1→G2, G2→G3, G3→G4, G4→Launched</rule>
        <rationale>Stage-Gate methodology - each gate has entry criteria (enforced later in NPD-1.4)</rationale>
      </constraint>

      <constraint type="STATUS_MAPPING">
        <rule>Status must match gate: G0=idea, G1=concept, G2=development, G3/G4=testing, Launched=launched</rule>
        <rationale>Business process requirement - status reflects current development phase</rationale>
      </constraint>

      <constraint type="CHECKLIST_DEFERRED">
        <rule>Gate checklists NOT enforced in this story (deferred to NPD-1.4)</rule>
        <rationale>Checklist feature requires separate table + UI, out of scope for MVP gate logic</rationale>
      </constraint>
    </business>

    <technical>
      <constraint type="FILE_LOCATION">
        <rule>API method: apps/frontend/lib/api/npdProjects.ts</rule>
        <rule>Schema: packages/shared/schemas.ts</rule>
        <rule>Tests: apps/frontend/lib/api/__tests__/npdProjects.test.ts</rule>
        <rationale>Existing project structure, consistency with NPD-1.1</rationale>
      </constraint>

      <constraint type="NO_NEW_DEPENDENCIES">
        <rule>No new npm packages required - use existing Supabase, Zod, Vitest</rule>
        <rationale>Keep dependency footprint minimal</rationale>
      </constraint>

      <constraint type="TYPE_SAFETY">
        <rule>pnpm type-check MUST pass with zero errors after implementation</rule>
        <rationale>TypeScript strict mode enforced across MonoPilot</rationale>
      </constraint>
    </technical>
  </constraints>

  <interfaces>
    <database>
      <table name="npd_projects">
        <columns>
          <column name="id" type="UUID" primary="true">Project identifier</column>
          <column name="org_id" type="INTEGER" required="true">Multi-tenant isolation</column>
          <column name="project_number" type="TEXT" immutable="true">Auto-generated NPD-YYYY-XXXX</column>
          <column name="project_name" type="TEXT" required="true">Project display name</column>
          <column name="status" type="TEXT" enum="npdProjectStatus">Current project status</column>
          <column name="current_gate" type="TEXT" enum="npdProjectGate">Current Stage-Gate position</column>
          <column name="priority" type="TEXT" enum="npdProjectPriority">Project priority</column>
          <column name="created_at" type="TIMESTAMPTZ">Creation timestamp</column>
          <column name="updated_at" type="TIMESTAMPTZ">Last update timestamp</column>
          <column name="created_by" type="UUID">User who created project</column>
          <column name="updated_by" type="UUID">User who last updated project</column>
        </columns>

        <rlsPolicies>
          <policy name="npd_projects_select_own_org">SELECT: org_id = current_setting('app.org_id')::UUID</policy>
          <policy name="npd_projects_update_own_org">UPDATE: org_id = current_setting('app.org_id')::UUID</policy>
        </rlsPolicies>

        <indexes>
          <index name="idx_npd_projects_org_id">org_id</index>
          <index name="idx_npd_projects_status">status</index>
          <index name="idx_npd_projects_owner_id">owner_id</index>
        </indexes>
      </table>
    </database>

    <api>
      <method name="advanceGate">
        <signature>static async advanceGate(id: string, toGate: NPDProjectGate): Promise&lt;NPDProject&gt;</signature>
        <parameters>
          <param name="id" type="string" validation="UUID format">Project ID to advance</param>
          <param name="toGate" type="NPDProjectGate" validation="Must be next sequential gate">Target gate (G1, G2, G3, G4, or Launched)</param>
        </parameters>
        <returns>
          <success>Updated NPDProject with new current_gate and status</success>
          <error>Throws Error with validation message if gate progression invalid</error>
        </returns>
        <example>
          const project = await NPDProjectsAPI.advanceGate(
            '123e4567-e89b-12d3-a456-426614174000',
            'G1'
          );
          // Returns: { id: '...', current_gate: 'G1', status: 'concept', ... }
        </example>
      </method>
    </api>
  </interfaces>

  <tests>
    <unitTests framework="vitest" location="apps/frontend/lib/api/__tests__/npdProjects.test.ts">
      <testSuite name="advanceGate">
        <test priority="MUST">Valid gate progression: G0→G1, G1→G2, G2→G3, G3→G4, G4→Launched</test>
        <test priority="MUST">Reject gate skipping: G0→G3 throws error</test>
        <test priority="MUST">Reject backwards movement: G2→G1 throws error</test>
        <test priority="MUST">Status mapping: G0→'idea', G1→'concept', G2→'development', G3→'testing', G4→'testing', Launched→'launched'</test>
        <test priority="MUST">Audit trail: updated_at and updated_by set correctly</test>
        <test priority="MUST">Error handling: invalid gate value (e.g., 'G5') throws error</test>
        <test priority="MUST">Error handling: non-existent project ID throws error</test>
        <test priority="MUST">RLS enforcement: cannot advance project from different org_id</test>
      </testSuite>

      <mockingStrategy>
        - Mock Supabase client: vi.mock('../../supabase/client-browser')
        - Mock update query: mockQuery.update().eq().select().single() returns updated project
        - Mock RLS failure: return error with code 'PGRST116' for non-existent/blocked project
      </mockingStrategy>

      <coverageTarget>100% coverage for advanceGate() method</coverageTarget>
    </unitTests>

    <e2eTests framework="playwright" location="apps/frontend/e2e/npd-gate-advancement.spec.ts" status="deferred">
      <note>E2E tests deferred to Story NPD-1.3 (requires NPD Dashboard UI)</note>
      <placeholderTests>
        <test>Create project → Advance G0→G1 → Verify UI shows 'Concept' status</test>
        <test>Attempt invalid progression → Verify error toast displayed</test>
        <test>Multi-user concurrency: Two users advance same project → Verify correct final state</test>
      </placeholderTests>
      <implementation>Create file with test.skip() for all tests until NPD-1.3 complete</implementation>
    </e2eTests>
  </tests>

  <devNotes>
    <architecturePatterns>
      <pattern name="Gate Sequence Validation">
        <implementation>
          const GATE_SEQUENCE = ['G0', 'G1', 'G2', 'G3', 'G4', 'Launched'];
          const currentIndex = GATE_SEQUENCE.indexOf(currentGate);
          const expectedNext = GATE_SEQUENCE[currentIndex + 1];
          if (toGate !== expectedNext) {
            throw new Error(`Can only advance to next sequential gate. Current: ${currentGate}, Attempted: ${toGate}`);
          }
        </implementation>
        <rationale>Array-based lookup simplifies validation and maintains gate order</rationale>
      </pattern>

      <pattern name="Gate-to-Status Mapping">
        <implementation>
          const GATE_STATUS_MAP: Record&lt;NPDProjectGate, NPDProjectStatus&gt; = {
            'G0': 'idea',
            'G1': 'concept',
            'G2': 'development',
            'G3': 'testing',
            'G4': 'testing',
            'Launched': 'launched'
          };
          const newStatus = GATE_STATUS_MAP[toGate];
        </implementation>
        <rationale>Declarative mapping prevents conditional logic sprawl</rationale>
      </pattern>

      <pattern name="Atomic Update Pattern">
        <implementation>
          const { data, error } = await supabase
            .from('npd_projects')
            .update({
              current_gate: toGate,
              status: newStatus,
              updated_at: new Date().toISOString(),
              updated_by: user.id
            })
            .eq('id', id)
            .select()
            .single();
        </implementation>
        <rationale>Single .update() call ensures atomicity - no race conditions</rationale>
      </pattern>
    </architecturePatterns>

    <learningsFromNPD11>
      <learning source="Story npd-1-1-npdprojectsapi-crud-operations">
        <title>NPDProjectsAPI Class Pattern</title>
        <details>
          - Static methods (getAll, getById, create, update, delete)
          - Zod validation before database operations
          - RLS enforcement via Supabase client (no manual org_id filtering)
          - Error handling: try/catch with console.error + throw
        </details>
        <application>Follow same pattern for advanceGate() method - add to existing class</application>
      </learning>

      <learning source="Story npd-1-1-npdprojectsapi-crud-operations">
        <title>Zod Schema Pattern</title>
        <details>
          - Schemas in packages/shared/schemas.ts
          - Reuse existing: npdProjectStatusSchema, npdProjectGateSchema
          - Add new: advanceGateSchema with id (UUID) and toGate (NPDProjectGate) validation
        </details>
        <application>Create advanceGateSchema = z.object({ id: z.string().uuid(), toGate: npdProjectGateSchema })</application>
      </learning>

      <learning source="Story npd-1-1-npdprojectsapi-crud-operations">
        <title>PostgreSQL Function Pattern</title>
        <details>
          - generate_npd_project_number() function demonstrates atomic operations
          - Prevents race conditions via database-level logic
        </details>
        <application>Gate advancement doesn't need function - single UPDATE is atomic. Consider for future if gate criteria checks become complex (NPD-1.4)</application>
      </learning>

      <learning source="Story npd-1-1-npdprojectsapi-crud-operations">
        <title>Testing Pattern</title>
        <details>
          - 15 unit tests in __tests__/npdProjects.test.ts
          - Mock Supabase client with vi.mock()
          - Test CRUD, RLS, auto-generation, immutable fields, soft delete
        </details>
        <application>Add describe('advanceGate') block with 7+ tests following same mocking approach</application>
      </learning>

      <learning source="Story npd-1-1-npdprojectsapi-crud-operations - Code Review">
        <title>Race Condition Prevention</title>
        <details>
          - Initial implementation had race condition in auto-generation
          - Fixed with PostgreSQL function for atomic number generation
        </details>
        <application>Gate advancement is single UPDATE - already atomic. No additional measures needed.</application>
      </learning>

      <learning source="Story npd-1-1-npdprojectsapi-crud-operations - Code Review">
        <title>File Naming Convention</title>
        <details>
          - Use lowercase camelCase: npdProjects.ts (NOT NPDProjectsAPI.ts)
        </details>
        <application>File already exists (npdProjects.ts) - just add new method</application>
      </learning>
    </learningsFromNPD11>

    <performanceNotes>
      <note>
        Gate advancement is simple UPDATE query (no joins) - expected latency &lt;50ms
      </note>
      <note>
        No performance indexes needed - primary key lookup (id) already indexed
      </note>
      <note>
        RLS policy on org_id is already indexed (idx_npd_projects_org_id)
      </note>
    </performanceNotes>

    <securityConsiderations>
      <consideration type="RLS_ENFORCEMENT">
        advanceGate() must respect org_id isolation - user can only advance projects belonging to their organization
        Supabase RLS policies (migration 102) handle enforcement automatically
      </consideration>

      <consideration type="AUTHORIZATION">
        RBAC check deferred to Story NPD-1.7 (RBAC Implementation)
        For now, any authenticated user can advance gates (will be restricted to NPD Lead role later)
      </consideration>

      <consideration type="AUDIT_TRAIL">
        Gate advancement logged via updated_at and updated_by fields
        Additional audit logging may be added in NPD-1.8 (Notifications) for compliance
      </consideration>
    </securityConsiderations>
  </devNotes>

  <references>
    <document path="docs/NPD-Module-Epics.md" section="Epic NPD-1">Epic definition and story breakdown</document>
    <document path="apps/frontend/lib/supabase/migrations/100_create_npd_core_tables.sql">Database schema for npd_projects table</document>
    <document path="apps/frontend/lib/supabase/migrations/102_create_npd_rls_policies.sql">RLS policies for npd_projects</document>
    <document path="docs/NPD-Module-Architecture-2025-11-15.md">NPD Module architecture decisions and patterns</document>
    <document path="apps/frontend/lib/api/npdProjects.ts">Existing NPDProjectsAPI implementation (NPD-1.1)</document>
    <document path="docs/sprint-artifacts/npd-1-1-npdprojectsapi-crud-operations.md">Previous story implementation and learnings</document>
  </references>
</story-context>
