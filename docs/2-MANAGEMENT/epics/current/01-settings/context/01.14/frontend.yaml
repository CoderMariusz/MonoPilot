# Story 01.14 - Frontend Specification
# Purpose: Wizard step components, templates, celebration
# Agent: FRONTEND-DEV

# Component Structure
components:
  base_path: "apps/frontend/components/onboarding/wizard"

  step_components:
    - name: "WizardStep2Warehouse.tsx"
      description: "Warehouse creation form (Step 2)"
      props:
        - "onNext: (data: Step2Response) => void"
        - "onBack: () => void"
        - "initialData?: Partial<Step2Request>"
      features:
        - "Pre-filled code 'WH-MAIN' (editable)"
        - "Required warehouse name input"
        - "Type dropdown with tooltips"
        - "Skip button creates DEMO-WH"
        - "Back navigation to step 1"

    - name: "WizardStep3Locations.tsx"
      description: "Location template selector (Step 3)"
      props:
        - "onNext: (data: Step3Response) => void"
        - "onBack: () => void"
        - "warehouseId: string"
      features:
        - "4 template cards (Simple, Basic, Full, Custom)"
        - "Visual preview of what each creates"
        - "Custom mode: add locations one by one"
        - "Location preview list in custom mode"
        - "Skip creates DEFAULT location"

    - name: "WizardStep4Product.tsx"
      description: "Industry + product template selector (Step 4)"
      props:
        - "onNext: (data: Step4Response) => void"
        - "onBack: () => void"
      features:
        - "Industry selector grid (6 industries)"
        - "Template dropdown based on industry"
        - "Pre-filled form from template"
        - "All fields editable"
        - "'Start from Scratch' option"
        - "SKU validation (format + uniqueness)"

    - name: "WizardStep5WorkOrder.tsx"
      description: "Demo work order creation (Step 5 - optional)"
      props:
        - "onNext: (data: Step5Response) => void"
        - "onBack: () => void"
        - "productId?: string"
        - "productName?: string"
      features:
        - "Disabled state if no product from step 4"
        - "Pre-filled with product"
        - "Quantity input (default 100)"
        - "Due date picker (default tomorrow)"
        - "Priority dropdown"
        - "Explanatory tooltips"

    - name: "WizardStep6Complete.tsx"
      description: "Celebration + summary (Step 6)"
      props:
        - "onComplete: () => void"
        - "summary: WizardSummary"
        - "durationSeconds: number"
        - "badge?: 'speed_champion'"
      features:
        - "Confetti animation on mount"
        - "Summary of all created items"
        - "Duration display"
        - "Speed Champion badge if < 15 min"
        - "Contextual next steps cards"
        - "'Go to Dashboard' primary button"

  template_components:
    - name: "TemplateSelector.tsx"
      description: "Reusable template card selector"
      props:
        - "templates: Template[]"
        - "selected?: string"
        - "onSelect: (id: string) => void"

    - name: "LocationTemplateCard.tsx"
      description: "Single location template option"
      props:
        - "template: LocationTemplate"
        - "selected: boolean"
        - "onClick: () => void"

    - name: "IndustrySelector.tsx"
      description: "Industry icon grid"
      props:
        - "industries: IndustryConfig[]"
        - "selected?: string"
        - "onSelect: (id: string) => void"

    - name: "ProductTemplateDropdown.tsx"
      description: "Product templates for selected industry"
      props:
        - "templates: ProductTemplate[]"
        - "selected?: string"
        - "onSelect: (id: string) => void"

  celebration_components:
    - name: "ConfettiAnimation.tsx"
      description: "Confetti canvas animation"
      props:
        - "active: boolean"
        - "duration?: number (default 3000ms)"
        - "particleCount?: number (default 100)"
      features:
        - "Canvas-based particles"
        - "Multiple brand colors"
        - "Falls from top of viewport"
        - "Auto-stops after duration"
        - "Performance optimized (requestAnimationFrame)"

    - name: "SpeedBadge.tsx"
      description: "'Speed Setup Champion' badge"
      props:
        - "durationSeconds: number"
        - "threshold?: number (default 900)"
      features:
        - "Only renders if duration < threshold"
        - "Animated glow effect"
        - "Trophy/star icon"
        - "Tooltip with exact time"
        - "Gold/yellow badge design"

    - name: "CompletionSummary.tsx"
      description: "Summary of created items"
      props:
        - "summary: WizardSummary"
      display: |
        Congratulations! MonoPilot is ready.

        You created:
        - Organization: {{org_name}}
        - Warehouse: {{warehouse_code}} ({{warehouse_name}})
        - Locations: {{location_count}} zones
        - Product: {{product_sku}} ({{product_name}})
        - Work Order: {{work_order_code}} (Demo)

        Setup completed in: {{duration}}

    - name: "NextStepCard.tsx"
      description: "Single next step action card"
      props:
        - "title: string"
        - "description: string"
        - "buttonLabel: string"
        - "onClick: () => void"
        - "prominence: 'primary' | 'secondary'"

    - name: "NextStepsSection.tsx"
      description: "Grid of next step cards"
      props:
        - "summary: WizardSummary"
      next_steps:
        - title: "Add Team Members"
          description: "Invite your team to MonoPilot"
          action: "Invite Users"
          link: "/settings/users"
        - title: "Create More Products"
          description: "Build your product catalog"
          action: "Go to Products"
          link: "/technical/products"
        - title: "Schedule Production"
          description: "Plan your first production"
          action: "Open Planning"
          link: "/planning"
        - title: "Explore Settings"
          description: "Fine-tune your configuration"
          action: "Open Settings"
          link: "/settings"

    - name: "WelcomeBanner.tsx"
      description: "Dashboard welcome banner (dismissible)"
      props:
        - "onDismiss: () => void"
      display: |
        Welcome to MonoPilot! Setup complete.
        Here are some quick actions to get started...
        [Dismiss]

# Templates (Constants)
templates:
  location_templates:
    path: "lib/constants/wizard-templates.ts"
    export: "LOCATION_TEMPLATES"
    data:
      - id: "simple"
        name: "Simple - 1 Zone"
        description: "Single location for small operations"
        locations:
          - { code: "RECEIVING", name: "Receiving Area", level: "zone", location_type: "staging" }

      - id: "basic"
        name: "Basic - 3 Zones"
        description: "Receiving, Storage, Shipping areas"
        locations:
          - { code: "RECEIVING", name: "Receiving Area", level: "zone", location_type: "staging" }
          - { code: "STORAGE", name: "Storage Area", level: "zone", location_type: "bulk" }
          - { code: "SHIPPING", name: "Shipping Area", level: "zone", location_type: "staging" }

      - id: "full"
        name: "Full - 9 Locations"
        description: "3 zones with aisle and rack structure"
        locations:
          # Raw Materials Zone
          - { code: "RAW-ZONE", name: "Raw Materials", level: "zone", location_type: "bulk" }
          - { code: "RAW-A1", name: "Raw Aisle 1", level: "aisle", location_type: "pallet", parent_code: "RAW-ZONE" }
          - { code: "RAW-A1-R1", name: "Raw Rack 1", level: "rack", location_type: "pallet", parent_code: "RAW-A1" }
          # Production Zone
          - { code: "PROD-ZONE", name: "Production", level: "zone", location_type: "floor" }
          - { code: "PROD-A1", name: "Prod Aisle 1", level: "aisle", location_type: "floor", parent_code: "PROD-ZONE" }
          - { code: "PROD-A1-R1", name: "Prod Rack 1", level: "rack", location_type: "shelf", parent_code: "PROD-A1" }
          # Finished Goods Zone
          - { code: "FG-ZONE", name: "Finished Goods", level: "zone", location_type: "bulk" }
          - { code: "FG-A1", name: "FG Aisle 1", level: "aisle", location_type: "pallet", parent_code: "FG-ZONE" }
          - { code: "FG-A1-R1", name: "FG Rack 1", level: "rack", location_type: "pallet", parent_code: "FG-A1" }

  product_templates:
    path: "lib/constants/product-templates.ts"
    export: "INDUSTRY_TEMPLATES"
    industries:
      - id: "bakery"
        name: "Bakery"
        icon: "bread"
        templates:
          - { id: "bread", name: "Bread Loaf", prefill: { product_type: "finished_good", uom: "EA", shelf_life_days: 7, storage_temp: "ambient" } }
          - { id: "pastry", name: "Pastry", prefill: { product_type: "finished_good", uom: "EA", shelf_life_days: 3, storage_temp: "chilled" } }
          - { id: "cookie", name: "Cookie", prefill: { product_type: "finished_good", uom: "EA", shelf_life_days: 14, storage_temp: "ambient" } }
          - { id: "cake", name: "Cake", prefill: { product_type: "finished_good", uom: "EA", shelf_life_days: 5, storage_temp: "chilled" } }

      - id: "dairy"
        name: "Dairy"
        icon: "milk"
        templates:
          - { id: "milk", name: "Milk", prefill: { product_type: "finished_good", uom: "L", shelf_life_days: 14, storage_temp: "chilled" } }
          - { id: "cheese", name: "Cheese", prefill: { product_type: "finished_good", uom: "KG", shelf_life_days: 90, storage_temp: "chilled" } }
          - { id: "yogurt", name: "Yogurt", prefill: { product_type: "finished_good", uom: "EA", shelf_life_days: 21, storage_temp: "chilled" } }
          - { id: "butter", name: "Butter", prefill: { product_type: "finished_good", uom: "KG", shelf_life_days: 60, storage_temp: "chilled" } }

      # (Meat, Beverages, Snacks, Other industries - similar structure)

# State Machine
state_machine:
  steps:
    - { step: 1, name: "Organization Profile", state: "completed", required: true }
    - { step: 2, name: "First Warehouse", state: "active", required: true }
    - { step: 3, name: "Storage Locations", state: "pending", required: true }
    - { step: 4, name: "First Product", state: "pending", required: false }
    - { step: 5, name: "Demo Work Order", state: "pending", required: false }
    - { step: 6, name: "Completion", state: "pending", required: true }

  transitions:
    pending: ["active"]
    active: ["completed", "skipped"]
    completed: []  # terminal
    skipped: []    # terminal

# UX Specification
ux:
  wireframes:
    - id: "SET-002"
      path: "docs/3-ARCHITECTURE/ux/wireframes/SET-002-onboarding-organization.md"
      description: "Wizard Step 1 - Organization Profile setup"
      components:
        - "OrganizationStepForm"
        - "WizardProgress"
        - "WizardNavigation"
    - id: "SET-003"
      path: "docs/3-ARCHITECTURE/ux/wireframes/SET-003-onboarding-warehouse.md"
      description: "Wizard Step 2 - First warehouse creation"
      components:
        - "WarehouseStepForm"
        - "WizardProgress"
        - "WizardNavigation"
    - id: "SET-004"
      path: "docs/3-ARCHITECTURE/ux/wireframes/SET-004-onboarding-location.md"
      description: "Wizard Step 3 - First location setup"
      components:
        - "LocationStepForm"
        - "WizardProgress"
        - "WizardNavigation"
    - id: "SET-005"
      path: "docs/3-ARCHITECTURE/ux/wireframes/SET-005-onboarding-product-workorder.md"
      description: "Wizard Steps 4-5 - First product and work order"
      components:
        - "ProductStepForm"
        - "WorkOrderStepForm"
        - "WizardProgress"
        - "WizardNavigation"
    - id: "SET-006"
      path: "docs/3-ARCHITECTURE/ux/wireframes/SET-006-onboarding-completion.md"
      description: "Wizard Step 6 - Completion celebration"
      components:
        - "CompletionScreen"
        - "WelcomeMessage"
        - "NextStepsGuide"

  wizard_flow:
    total_steps: 6
    can_skip: true
    can_go_back: true
    progress_saved: true

  states:
    loading: "Spinner while saving step data"
    validation_error: "Inline error messages on form fields"
    success: "Step completed, advance to next"
    completion: "Confetti animation with success message"

  patterns:
    wizard: "Multi-step form with progress indicator"
    navigation: "Next/Back/Skip buttons"
    validation: "Real-time validation with Zod schemas"
