# 04.4 Yield Tracking - UX Wireframes

**Module**: Production
**Feature**: Manual Yield Entry on Work Order Detail Page
**Story**: 04.4 - Yield Tracking
**Status**: Ready for Implementation
**Last Updated**: 2026-01-08

---

## Overview

This wireframe defines the **Yield Tracking** components that appear on the Work Order (WO) detail page. Operators can manually enter produced quantities, view yield percentages with visual indicators, and review yield update history.

**Context**: This is a section within the WO detail page that enables:
- Manual yield entry (produced quantity input)
- Visual yield percentage gauge with color coding
- Yield history tracking with audit trail
- Low yield warning banners

---

## Components

| Component | Purpose | Location |
|-----------|---------|----------|
| `YieldSection.tsx` | Container for all yield UI elements | WO detail page |
| `YieldEntryForm.tsx` | Manual produced quantity input form | Within YieldSection |
| `YieldGauge.tsx` | Visual percentage indicator | Within YieldSection |
| `YieldHistoryTable.tsx` | History of yield updates | Within YieldSection |
| `YieldWarningBanner.tsx` | Low yield alert banner | Top of YieldSection |

---

## ASCII Wireframes

### 1. YieldSection - Success State (WO In Progress, Editable)

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00123 Detail                                                                  |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +----- WARNING BANNER (shown when yield < 80%) ------------------------------------------+ |   |
|  |  | [!] Low Yield Alert: 75.0% (Target: >=80%)                                             | |   |
|  |  |     Review production process for potential issues.                              [X]  | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Current Yield                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [==============================================                        ] 75.0%    | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |              Yellow bar (70-79%)                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    [Below Target]                                                                      | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: 1,000 units    |    Produced: 750 units                                   | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD ENTRY FORM --------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |  Update Produced Quantity                                                              | |   |
|  |  |                                                                                        | |   |
|  |  |  +------------------------+                                                            | |   |
|  |  |  | Produced Quantity *    |                                                            | |   |
|  |  |  | +-----------------+    |                                                            | |   |
|  |  |  | | 750             | ^  |  units                                                     | |   |
|  |  |  | +-----------------+ v  |                                                            | |   |
|  |  |  |                        |                                                            | |   |
|  |  |  | Notes (optional)       |                                                            | |   |
|  |  |  | +--------------------+ |                                                            | |   |
|  |  |  | |                    | |                                                            | |   |
|  |  |  | |                    | |                                                            | |   |
|  |  |  | +--------------------+ |                                                            | |   |
|  |  |  |                        |                                                            | |   |
|  |  |  | [Update Yield]         |                                                            | |   |
|  |  |  +------------------------+                                                            | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD HISTORY TABLE -----------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |  Yield Update History                                                                  | |   |
|  |  |                                                                                        | |   |
|  |  |  +----------------+----------------+----------+----------+--------------+------------+ | |   |
|  |  |  | Timestamp      | User           | Old Qty  | New Qty  | Yield Change | Notes      | | |   |
|  |  |  +----------------+----------------+----------+----------+--------------+------------+ | |   |
|  |  |  | Jan 8, 2026    | John Smith     | 500      | 750      | 50% -> 75%   | Shift end  | | |   |
|  |  |  | 14:30          |                |          |          |              | count      | | |   |
|  |  |  +----------------+----------------+----------+----------+--------------+------------+ | |   |
|  |  |  | Jan 8, 2026    | Jane Doe       | 0        | 500      | 0% -> 50%    | Initial    | | |   |
|  |  |  | 10:15          |                |          |          |              | entry      | | |   |
|  |  |  +----------------+----------------+----------+----------+--------------+------------+ | |   |
|  |  |                                                                                        | |   |
|  |  |  Showing 2 of 2 entries                                                   [1] [2] [>] | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 2. YieldSection - Excellent Yield (Green State)

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00124 Detail                                                                  |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  (No warning banner - yield >= 80%)                                                        |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Current Yield                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [================================================================]      95.0%    | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |              Green bar (>=80%)                                                         | |   |
|  |  |                                                                                        | |   |
|  |  |    [Excellent]                                                                         | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: 1,000 units    |    Produced: 950 units                                   | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD ENTRY FORM --------------------------------------+ |   |
|  |  |  ... (same as above, enabled)                                                          | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD HISTORY TABLE -----------------------------------+ |   |
|  |  |  ... (populated with entries)                                                          | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 3. YieldSection - Critical Low Yield (Red State)

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00125 Detail                                                                  |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +----- CRITICAL WARNING BANNER (yield < 70%) --------------------------------------------+ |   |
|  |  | [!!] Critical Low Yield: 65.0% (Target: >=80%)                                         | |   |
|  |  |      Immediate attention required. Contact supervisor.                           [X]  | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Current Yield                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [====================================                                  ] 65.0%    | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |              Red bar (<70%)                                                            | |   |
|  |  |                                                                                        | |   |
|  |  |    [Low Yield]                                                                         | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: 1,000 units    |    Produced: 650 units                                   | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 4. YieldSection - Not Started (Gray State)

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00126 Detail                                                                  |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Current Yield                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [                                                                      ] 0%       | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |              Gray bar (not started)                                                    | |   |
|  |  |                                                                                        | |   |
|  |  |    [Not Started]                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: 1,000 units    |    Produced: 0 units                                     | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD ENTRY FORM (EDITABLE) ---------------------------+ |   |
|  |  |  ... (same as success state, form enabled)                                             | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD HISTORY TABLE -----------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |  Yield Update History                                                                  | |   |
|  |  |                                                                                        | |   |
|  |  |  +------------------------------------------------------------------------------------+ | |   |
|  |  |  |                                                                                    | | |   |
|  |  |  |                           [History Icon]                                           | | |   |
|  |  |  |                                                                                    | | |   |
|  |  |  |                     No yield updates recorded                                      | | |   |
|  |  |  |                                                                                    | | |   |
|  |  |  |              Yield history will appear here after the first update.               | | |   |
|  |  |  |                                                                                    | | |   |
|  |  |  +------------------------------------------------------------------------------------+ | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 5. YieldSection - Disabled State (WO Not Started)

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00127 Detail                                    Status: [Released]           |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Current Yield                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [                                                                      ] --       | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |              Gray bar (disabled)                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: 1,000 units    |    Produced: --                                          | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- DISABLED MESSAGE --------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    +--------------------------------------------------------------------------------+  | |   |
|  |  |    |                                                                                |  | |   |
|  |  |    |                          [Lock Icon]                                           |  | |   |
|  |  |    |                                                                                |  | |   |
|  |  |    |                   Start WO to enter yield                                      |  | |   |
|  |  |    |                                                                                |  | |   |
|  |  |    |        Yield entry is available when the work order is in progress.           |  | |   |
|  |  |    |                                                                                |  | |   |
|  |  |    |                        [Start Work Order]                                      |  | |   |
|  |  |    |                                                                                |  | |   |
|  |  |    +--------------------------------------------------------------------------------+  | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 6. YieldSection - Read-Only State (WO Completed)

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00128 Detail                                    Status: [Completed]          |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Final Yield                                                                         | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [================================================================]      92.5%    | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |              Green bar (>=80%)                                                         | |   |
|  |  |                                                                                        | |   |
|  |  |    [Excellent]   [Completed]                                                           | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: 1,000 units    |    Final Produced: 925 units                             | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- READ-ONLY MESSAGE -------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Work order completed. Final yield: 92.5%                                            | |   |
|  |  |    Completed on: Jan 8, 2026 16:45 by John Smith                                      | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD HISTORY TABLE -----------------------------------+ |   |
|  |  |  ... (read-only, showing all historical entries)                                       | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 7. YieldSection - Loading State

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00129 Detail                                                                  |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD GAUGE (SKELETON) --------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Current Yield                                                                       | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |    | [░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░] ...       | |   |
|  |  |    +------------------------------------------------------------------------+          | |   |
|  |  |                                                                                        | |   |
|  |  |    [░░░░░░░░░░░░]                                                                      | |   |
|  |  |                                                                                        | |   |
|  |  |    Planned: ░░░░░ units    |    Produced: ░░░░░ units                                 | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD ENTRY FORM (SKELETON) ---------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Update Produced Quantity                                                            | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------------+                                                          | |   |
|  |  |    | [░░░░░░░░░░░░░░░░░░░] |                                                          | |   |
|  |  |    |                        |                                                          | |   |
|  |  |    | [░░░░░░░░░░░░░░░░░░░] |                                                          | |   |
|  |  |    |                        |                                                          | |   |
|  |  |    | [░░░░░░░░░░░░░░]       |                                                          | |   |
|  |  |    +------------------------+                                                          | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  |  +------------------------------- YIELD HISTORY TABLE (SKELETON) ------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |    Yield Update History                                                                | |   |
|  |  |                                                                                        | |   |
|  |  |    +------------------+------------------+----------+----------+----------+-----------+ | |   |
|  |  |    | [░░░░░░░░░░░░░░] | [░░░░░░░░░░░░░░] | [░░░░░░] | [░░░░░░] | [░░░░░░] | [░░░░░░] | | |   |
|  |  |    +------------------+------------------+----------+----------+----------+-----------+ | |   |
|  |  |    | [░░░░░░░░░░░░░░] | [░░░░░░░░░░░░░░] | [░░░░░░] | [░░░░░░] | [░░░░░░] | [░░░░░░] | | |   |
|  |  |    +------------------+------------------+----------+----------+----------+-----------+ | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 8. YieldSection - Error State

```
+--------------------------------------------------------------------------------------------------+
|  Work Order WO-2024-00130 Detail                                                                  |
|  [General] [Materials] [Operations] [Yield] [Audit Log]                                          |
|                                      ------                                                       |
+--------------------------------------------------------------------------------------------------+
|                                                                                                   |
|  +------------------------------- YIELD TRACKING SECTION ------------------------------------+   |
|  |                                                                                            |   |
|  |  +------------------------------- ERROR STATE -------------------------------------------+ |   |
|  |  |                                                                                        | |   |
|  |  |                          [Error Icon - Red Circle X]                                   | |   |
|  |  |                                                                                        | |   |
|  |  |                      Failed to Load Yield Data                                         | |   |
|  |  |                                                                                        | |   |
|  |  |               Unable to retrieve yield information from the server.                    | |   |
|  |  |                                                                                        | |   |
|  |  |                      Error: Network request timeout                                    | |   |
|  |  |                                                                                        | |   |
|  |  |                           [Try Again]                                                  | |   |
|  |  |                                                                                        | |   |
|  |  +----------------------------------------------------------------------------------------+ |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
|                                                                                                   |
+--------------------------------------------------------------------------------------------------+
```

### 9. YieldEntryForm - Validation Error State

```
+--------------------------------------------------------------------------------------------------+
|  +------------------------------- YIELD ENTRY FORM (VALIDATION ERROR) ----------------------+   |
|  |                                                                                            |   |
|  |  Update Produced Quantity                                                                  |   |
|  |                                                                                            |   |
|  |  +------------------------+                                                                |   |
|  |  | Produced Quantity *    |                                                                |   |
|  |  | +-----------------+    |                                                                |   |
|  |  | | -50             | ^  |  units     [RED BORDER]                                       |   |
|  |  | +-----------------+ v  |                                                                |   |
|  |  | [!] Produced quantity must be positive                                                  |   |
|  |  |                        |                                                                |   |
|  |  +------------------------+                                                                |   |
|  |                                                                                            |   |
|  |  [Update Yield] (disabled)                                                                 |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
```

### 10. YieldEntryForm - Overproduction Error (when disabled)

```
+--------------------------------------------------------------------------------------------------+
|  +------------------------------- YIELD ENTRY FORM (OVERPRODUCTION ERROR) ------------------+   |
|  |                                                                                            |   |
|  |  Update Produced Quantity                                                                  |   |
|  |                                                                                            |   |
|  |  +------------------------+                                                                |   |
|  |  | Produced Quantity *    |                                                                |   |
|  |  | +-----------------+    |                                                                |   |
|  |  | | 1100            | ^  |  units     [RED BORDER]                                       |   |
|  |  | +-----------------+ v  |                                                                |   |
|  |  | [!] Produced quantity cannot exceed planned quantity (1,000)                            |   |
|  |  |                        |                                                                |   |
|  |  +------------------------+                                                                |   |
|  |                                                                                            |   |
|  |  [Update Yield] (disabled)                                                                 |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
```

### 11. YieldEntryForm - Submitting State

```
+--------------------------------------------------------------------------------------------------+
|  +------------------------------- YIELD ENTRY FORM (SUBMITTING) ----------------------------+   |
|  |                                                                                            |   |
|  |  Update Produced Quantity                                                                  |   |
|  |                                                                                            |   |
|  |  +------------------------+                                                                |   |
|  |  | Produced Quantity *    |                                                                |   |
|  |  | +-----------------+    |                                                                |   |
|  |  | | 850             | ^  |  units     [DISABLED]                                         |   |
|  |  | +-----------------+ v  |                                                                |   |
|  |  |                        |                                                                |   |
|  |  | Notes (optional)       |                                                                |   |
|  |  | +--------------------+ |                                                                |   |
|  |  | | Recount after fix  | |  [DISABLED]                                                   |   |
|  |  | +--------------------+ |                                                                |   |
|  |  |                        |                                                                |   |
|  |  +------------------------+                                                                |   |
|  |                                                                                            |   |
|  |  [Updating... (spinner)] (disabled)                                                        |   |
|  |                                                                                            |   |
|  +--------------------------------------------------------------------------------------------+   |
```

### 12. Mobile View (<768px) - YieldSection

```
+----------------------------------+
|  < WO-2024-00123                 |
|  [Yield Tab]                     |
+----------------------------------+
|                                  |
| +--------- WARNING BANNER -----+ |
| | [!] Low Yield Alert: 75.0%   | |
| |     (Target: >=80%)      [X] | |
| +------------------------------+ |
|                                  |
| +--------- YIELD GAUGE --------+ |
| |                              | |
| | Current Yield                | |
| |                              | |
| | +------------------------+   | |
| | | [==============       ]|   | |
| | +------------------------+   | |
| |         75.0%                | |
| |                              | |
| | [Below Target]               | |
| |                              | |
| | Planned: 1,000               | |
| | Produced: 750                | |
| |                              | |
| +------------------------------+ |
|                                  |
| +--------- ENTRY FORM ---------+ |
| |                              | |
| | Produced Quantity *          | |
| | +------------------------+   | |
| | | 750                    |   | |
| | +------------------------+   | |
| |                              | |
| | Notes (optional)             | |
| | +------------------------+   | |
| | |                        |   | |
| | +------------------------+   | |
| |                              | |
| | [Update Yield]               | |
| |                              | |
| +------------------------------+ |
|                                  |
| +--------- HISTORY ------------+ |
| |                              | |
| | Yield Update History         | |
| |                              | |
| | +------------------------+   | |
| | | Jan 8, 14:30           |   | |
| | | John Smith             |   | |
| | | 500 -> 750 units       |   | |
| | | 50% -> 75%             |   | |
| | | Note: Shift end count  |   | |
| | +------------------------+   | |
| |                              | |
| | +------------------------+   | |
| | | Jan 8, 10:15           |   | |
| | | Jane Doe               |   | |
| | | 0 -> 500 units         |   | |
| | | 0% -> 50%              |   | |
| | | Note: Initial entry    |   | |
| | +------------------------+   | |
| |                              | |
| | [Show More]                  | |
| |                              | |
| +------------------------------+ |
|                                  |
+----------------------------------+
```

---

## Component Specifications

### 1. YieldSection.tsx

**Purpose**: Container component for all yield tracking UI elements

**Props**:
| Prop | Type | Required | Description |
|------|------|----------|-------------|
| woId | string | Yes | Work Order ID |
| plannedQuantity | number | Yes | Planned production quantity |
| producedQuantity | number | Yes | Current produced quantity |
| woStatus | WOStatus | Yes | Current WO status |

**WO Status Types**: `'draft' | 'released' | 'in_progress' | 'paused' | 'completed' | 'cancelled'`

**States**:
| State | Condition | Behavior |
|-------|-----------|----------|
| Loading | Data fetching | Show skeleton components |
| Editable | `woStatus === 'in_progress'` | Form enabled, all components active |
| Disabled | `woStatus in ['draft', 'released']` | Form disabled, show "Start WO" message |
| Read-Only | `woStatus in ['completed', 'cancelled']` | Form hidden, show final yield |
| Error | API failure | Show error state with retry |

**Children**:
- YieldWarningBanner (conditional)
- YieldGauge
- YieldEntryForm (conditional on status)
- YieldHistoryTable

---

### 2. YieldEntryForm.tsx

**Purpose**: Manual yield entry form with validation

**Props**:
| Prop | Type | Required | Description |
|------|------|----------|-------------|
| woId | string | Yes | Work Order ID |
| currentProducedQuantity | number | Yes | Current value |
| plannedQuantity | number | Yes | For validation |
| onSuccess | (result: YieldUpdateResult) => void | Yes | Success callback |
| disabled | boolean | No | Disable form |

**Form Fields**:
| Field | Type | Required | Validation |
|-------|------|----------|------------|
| produced_quantity | number input | Yes | >= 0, <= planned (if overproduction disabled) |
| notes | textarea | No | max 1000 characters |

**Button States**:
| State | Label | Enabled |
|-------|-------|---------|
| Default | "Update Yield" | Yes |
| Submitting | "Updating..." + spinner | No |
| Validation Error | "Update Yield" | No |

**Validation Messages**:
| Error | Message |
|-------|---------|
| Negative value | "Produced quantity must be positive" |
| Non-numeric | "Must be a valid number" |
| Exceeds planned | "Produced quantity cannot exceed planned quantity (X)" |
| Notes too long | "Notes cannot exceed 1000 characters" |

---

### 3. YieldGauge.tsx

**Purpose**: Visual yield percentage indicator with color coding

**Props**:
| Prop | Type | Required | Description |
|------|------|----------|-------------|
| yieldPercent | number | Yes | Yield percentage (0-100+) |
| status | YieldStatus | Yes | Status for styling |

**Yield Status Types**: `'excellent' | 'below_target' | 'low_yield' | 'not_started'`

**Color Mapping**:
| Status | Yield Range | Bar Color | Badge Color | Label |
|--------|-------------|-----------|-------------|-------|
| excellent | >= 80% | Green (#22C55E) | Green | "Excellent" |
| below_target | 70% - 79.9% | Yellow (#EAB308) | Yellow | "Below Target" |
| low_yield | < 70% | Red (#EF4444) | Red | "Low Yield" |
| not_started | 0% | Gray (#9CA3AF) | Gray | "Not Started" |

**Display Elements**:
- Progress bar (max 100%, capped for display)
- Percentage text (1 decimal place, e.g., "95.0%")
- Status badge with label
- Planned quantity
- Produced quantity

---

### 4. YieldHistoryTable.tsx

**Purpose**: Table showing all yield update history with audit trail

**Props**:
| Prop | Type | Required | Description |
|------|------|----------|-------------|
| woId | string | Yes | Work Order ID |
| limit | number | No | Rows per page (default 10) |

**Columns**:
| Column | Field | Format | Sortable |
|--------|-------|--------|----------|
| Timestamp | created_at | "MMM D, YYYY HH:mm" | No |
| User | user_name | Full name | No |
| Old Qty | old_quantity | Number with locale | No |
| New Qty | new_quantity | Number with locale | No |
| Yield Change | old/new yield | "X% -> Y%" | No |
| Notes | notes | Text (truncated) | No |

**Sorting**: Always by timestamp DESC (newest first)

**States**:
| State | Display |
|-------|---------|
| Loading | Skeleton rows (3 rows) |
| Empty | "No yield updates recorded" with icon |
| Success | Populated table with pagination |
| Error | Error message with retry |

**Pagination**:
- Default 10 rows per page
- Show "Showing X of Y entries"
- Previous/Next navigation

---

### 5. YieldWarningBanner.tsx

**Purpose**: Alert banner for low yield conditions

**Props**:
| Prop | Type | Required | Description |
|------|------|----------|-------------|
| yieldPercent | number | Yes | Current yield |
| threshold | number | No | Target threshold (default 80) |

**Display Rules**:
| Condition | Banner | Color | Message |
|-----------|--------|-------|---------|
| yield >= 80% | Hidden | - | - |
| 70% <= yield < 80% | Warning | Yellow | "Low Yield Alert: X% (Target: >=80%)" |
| yield < 70% | Critical | Red | "Critical Low Yield: X% (Target: >=80%)" |

**Features**:
- Dismissible (X button)
- Icon: Warning triangle for yellow, Alert circle for red
- Sub-message with guidance
- Persists across page navigation (session)

---

## States Specification Summary

### All Component States

| Component | Loading | Empty | Error | Success | Disabled |
|-----------|---------|-------|-------|---------|----------|
| YieldSection | Skeleton | N/A | Error + retry | Full UI | Message |
| YieldEntryForm | Disabled inputs | N/A | Inline errors | Enabled | "Start WO" |
| YieldGauge | Skeleton bar | Gray "0%" | N/A | Color bar | Gray |
| YieldHistoryTable | Skeleton rows | Empty message | Error + retry | Rows | N/A |
| YieldWarningBanner | Hidden | Hidden | N/A | Shown/Hidden | N/A |

---

## Accessibility Requirements

### Touch Targets
- All buttons: 48x48dp minimum
- Form inputs: 44dp height minimum
- Table row actions: 48x48dp
- Dismiss buttons: 44x44dp

### Color Contrast
- Text on progress bar: 4.5:1 minimum
- Badge text: 4.5:1 minimum
- Warning banner text: 4.5:1 minimum
- Error messages: 4.5:1 minimum

### Screen Reader Announcements

**Yield Gauge**:
```
"Current yield: 75 percent. Status: Below Target.
Planned quantity: 1,000 units. Produced quantity: 750 units."
```

**Warning Banner**:
```
"Alert: Low Yield. Current yield is 75 percent, which is below the target of 80 percent.
Review production process for potential issues."
```

**Form Submission**:
```
"Yield updated successfully. New yield: 85 percent."
```

**Validation Error**:
```
"Error: Produced quantity must be positive."
```

### Keyboard Navigation
| Key | Action |
|-----|--------|
| Tab | Move between form fields and buttons |
| Enter | Submit form / Activate button |
| Escape | Close warning banner |

---

## Responsive Breakpoints

| Breakpoint | Layout Changes |
|------------|----------------|
| Desktop (>1024px) | Full layout, table with all columns |
| Tablet (768-1024px) | Condensed table, side-by-side gauge and form |
| Mobile (<768px) | Stacked layout, card-based history |

### Mobile Optimizations
1. Stacked vertical layout
2. History as cards instead of table
3. Collapsible sections
4. Full-width inputs
5. Bottom-sticky submit button

---

## Performance Targets

| Metric | Target |
|--------|--------|
| Initial yield data load | < 200ms |
| Yield update API call | < 500ms |
| History table render | < 100ms |
| Form validation | Instant (client-side) |
| Gauge animation | 300ms ease-out |

---

## Handoff Artifacts

```yaml
feature: Yield Tracking
story: 04.4-yield-tracking
wireframe_id: PROD-004
fr_coverage: FR-PROD-014
approval_status:
  mode: "review_each"
  user_approved: pending
deliverables:
  wireframe: docs/2-MANAGEMENT/epics/current/04-production/ux/04.4-yield-tracking.md
  components:
    - path: apps/frontend/app/(authenticated)/production/work-orders/[id]/components/YieldSection.tsx
    - path: apps/frontend/app/(authenticated)/production/work-orders/[id]/components/YieldEntryForm.tsx
    - path: apps/frontend/app/(authenticated)/production/work-orders/[id]/components/YieldGauge.tsx
    - path: apps/frontend/app/(authenticated)/production/work-orders/[id]/components/YieldHistoryTable.tsx
    - path: apps/frontend/app/(authenticated)/production/work-orders/[id]/components/YieldWarningBanner.tsx
states_per_component:
  YieldSection: [loading, editable, disabled, readonly, error]
  YieldEntryForm: [default, submitting, validation_error, success, disabled]
  YieldGauge: [excellent, below_target, low_yield, not_started, loading]
  YieldHistoryTable: [loading, empty, success, error]
  YieldWarningBanner: [hidden, warning, critical]
color_thresholds:
  green: ">= 80%"
  yellow: "70% - 79.9%"
  red: "< 70%"
  gray: "0% / not started"
breakpoints:
  mobile: "<768px"
  tablet: "768-1024px"
  desktop: ">1024px"
accessibility:
  touch_targets: "48dp minimum"
  contrast: "4.5:1 minimum"
  wcag_level: "AA"
  keyboard_nav: "full support"
  screen_reader: "comprehensive announcements"
```

---

**Status**: Ready for User Review
**Approval Mode**: review_each (default)
**Iterations**: 0 of 3
**Quality Target**: 95/100
