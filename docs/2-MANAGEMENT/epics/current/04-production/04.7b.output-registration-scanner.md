# 04.7b - Output Registration Scanner

**Story ID:** 04.7b
**Epic:** 04 - Production
**Phase:** 1B (MVP)
**Complexity:** L (Large)
**Estimate:** 3 days
**Type:** Full-stack (Mobile-first)
**State:** ready

**Primary PRD:** `docs/1-BASELINE/product/modules/PRODUCTION.md` (FR-PROD-012, FR-PROD-013)
**UX Wireframes:** PROD-006 (Scanner Register Output)

## PRD References

| FR ID | Requirement | Priority | Phase | Covered |
|-------|-------------|----------|-------|---------|
| FR-PROD-012 | Output Registration (Scanner) | P0 | MVP | Yes |
| FR-PROD-013 | By-Product Registration | P0 | MVP | Yes |

## User Story

**As a** production operator,
**I want** to scan a WO barcode and register output using my mobile scanner device,
**So that** I can quickly record production output on the shop floor without leaving my workstation.

**As a** production supervisor,
**I want** operators to print LP labels immediately after registration,
**So that** all output is properly labeled and traceable from the moment of creation.

## Goal

Implement a 7-step mobile scanner wizard for production output registration optimized for handheld devices (Zebra TC52, Honeywell CT60). The workflow includes WO barcode scanning, quantity input via number pad, QA status selection, LP creation, ZPL label printing, and by-product registration prompts. All interactions must be touch-friendly with large targets (64dp) and provide audio/haptic feedback.

## Scope

**In scope:**
- 7-step scanner wizard (Scan WO > Qty > QA > Review > LP Created > Print > By-Products)
- WO barcode validation with 500ms response time
- Number pad input optimized for mobile (64x64dp keys)
- QA status selection with 64dp color-coded buttons
- LP creation with genealogy linking
- ZPL label generation and printing (2s target)
- Voice announcement "LP created" on success
- By-product registration with expected qty calculation
- Zero-quantity by-product warning with confirmation
- Offline queue for network failures
- Printer configuration per location

**Out of scope:**
- Desktop output registration (FR-PROD-011, Story 04.7a)
- Consumption scanner (FR-PROD-007, Story 04.6b)
- Operation tracking (FR-PROD-004, Story 04.5)
- Auto-complete WO logic (FR-PROD-005, Story 04.4)

## Dependencies

| Story | Requirement | Status |
|-------|-------------|--------|
| 04.7a | Output Desktop - provides output-service, by-product-service, API endpoints | Required |
| 05.1 | License Plates - provides LP table, number generation | Required |
| 05.2 | LP Genealogy - provides genealogy table and functions | Required |
| 03.3 | Work Orders - provides work_orders, wo_materials tables | Required |

## Acceptance Criteria (Given/When/Then)

### Step 1: Scan WO Barcode (FR-PROD-012)

#### WO Validation
- GIVEN operator scans valid WO barcode "WO-2025-0156", WHEN barcode validated, THEN product name, planned qty, registered qty display within 500ms.
- GIVEN operator scans invalid barcode "XYZ-123", WHEN validation fails, THEN error "Invalid barcode format" displays with red X icon and error beep.
- GIVEN operator scans WO with status "Completed", WHEN validation runs, THEN error "Work order is not in progress or paused" displays.
- GIVEN operator scans WO with status "Draft" or "Released", WHEN validation runs, THEN error "Work order must be started first" displays.
- GIVEN barcode input field, WHEN screen loads, THEN input is auto-focused for immediate scanning.

### Step 2: Enter Quantity Produced (FR-PROD-012)

#### Number Pad Input
- GIVEN Step 2 displays, WHEN screen renders, THEN number pad shows with 64x64dp keys.
- GIVEN operator enters quantity "250.5", WHEN tapping decimal point, THEN decimal input is accepted up to 2 places.
- GIVEN operator taps backspace, WHEN quantity is "250", THEN quantity becomes "25".
- GIVEN operator taps "C" (clear), WHEN quantity is "250", THEN quantity resets to empty.
- GIVEN WO.planned_qty = 1000 AND registered_qty = 800, WHEN screen displays, THEN remaining qty "200" shows as reference.

#### Overproduction Warning
- GIVEN remaining_qty = 200, WHEN operator enters 300, THEN warning "Exceeds remaining quantity by 100" displays in orange.
- GIVEN overproduction warning displayed, WHEN operator taps "Continue Anyway", THEN proceeds to Step 3.
- GIVEN operator enters quantity = 0, WHEN tapping Next, THEN error "Quantity must be greater than 0" displays.

### Step 3: Select QA Status (FR-PROD-012)

#### QA Button Display
- GIVEN Step 3 displays, WHEN screen renders, THEN three QA buttons display: Approved (green), Pending (yellow), Rejected (red).
- GIVEN QA buttons rendered, WHEN measured, THEN each button height is >= 64dp and full width.
- GIVEN operator taps "Approved" button, WHEN tapped, THEN button shows selected state with checkmark.
- GIVEN require_qa_on_output = true in settings, WHEN operator skips selection, THEN Next button is disabled.
- GIVEN require_qa_on_output = false in settings, WHEN Step 3 displays, THEN "Pending" is pre-selected as default.

### Step 4: Review Output Details (FR-PROD-012)

#### Review Summary
- GIVEN Step 4 displays, WHEN screen renders, THEN summary card shows: Product, Quantity, QA Status, Batch Number, Expiry Date, Location.
- GIVEN product.shelf_life_days = 30 AND today = 2025-01-15, WHEN expiry calculated, THEN expiry_date = 2025-02-14.
- GIVEN WO.batch_number = "WO-2025-0156", WHEN batch displayed, THEN batch_number = "WO-2025-0156".
- GIVEN line.default_location_id set, WHEN location displayed, THEN default location name shows.
- GIVEN LP number preview generated, WHEN displayed, THEN format matches "LP-YYYYMMDD-NNNN" pattern.

#### Edit Actions
- GIVEN user taps "Edit Quantity" link, WHEN tapped, THEN returns to Step 2 with current value preserved.
- GIVEN user taps "Edit QA Status" link, WHEN tapped, THEN returns to Step 3 with current selection preserved.

### Step 5: LP Created (FR-PROD-012)

#### Success Feedback
- GIVEN output registration API returns success, WHEN Step 5 displays, THEN green check animation (96dp) shows.
- GIVEN LP creation succeeds, WHEN success displayed, THEN voice announcement "LP created" plays via Web Speech API.
- GIVEN LP creation succeeds, WHEN success displayed, THEN device vibrates for 200ms.
- GIVEN LP created, WHEN displayed, THEN LP number, qty, batch number show in confirmation card.

#### Progress Update
- GIVEN WO had output_qty = 500, WHEN new output of 250 registered, THEN updated progress shows "750 / 1000 (75%)".
- GIVEN Step 5 displays, WHEN 2 seconds elapse, THEN auto-advances to Step 6.
- GIVEN auto-advance timer running, WHEN user taps "Next" manually, THEN immediately advances to Step 6.

### Step 6: Print LP Label (FR-PROD-012)

#### Label Generation
- GIVEN printer is configured for location, WHEN Step 6 displays, THEN Print button is enabled.
- GIVEN no printer configured for location, WHEN Step 6 displays, THEN Print button is disabled with tooltip "No printer configured".
- GIVEN label preview generated, WHEN displayed, THEN shows: LP barcode (Code128), product name, qty with UoM, batch, expiry date.

#### Print Execution
- GIVEN operator taps Print, WHEN ZPL sent to printer, THEN completes within 2 seconds.
- GIVEN print succeeds, WHEN complete, THEN success message "Label printed" displays.
- GIVEN printer offline, WHEN print attempted, THEN error "Printer not responding. Retry?" displays.
- GIVEN print timeout after 2s, WHEN timeout occurs, THEN error "Print timeout. Retry?" displays.

#### Skip Option
- GIVEN Step 6 displays, WHEN operator taps "Skip", THEN proceeds to Step 7 without printing.

### Step 7: By-Product Prompt (FR-PROD-013)

#### By-Product Detection
- GIVEN BOM has by-products (is_by_product = true), WHEN Step 7 displays, THEN by-products list shows with expected quantities.
- GIVEN BOM has no by-products, WHEN Step 7 would display, THEN skips directly to completion with "Output registration complete" message.
- GIVEN WO.planned_qty = 1000 AND by-product yield_percent = 5, WHEN expected qty calculated, THEN shows "Expected: 50 kg".

#### By-Product Registration
- GIVEN operator taps "Yes" on by-product prompt, WHEN tapped, THEN opens by-product registration mini-wizard.
- GIVEN expected qty = 50 AND operator enters 45, WHEN confirmed, THEN LP created with qty = 45.
- GIVEN operator enters qty = 0, WHEN form submitted, THEN warning "By-product quantity is 0. Continue?" displays.
- GIVEN zero-qty warning displayed, WHEN operator confirms, THEN LP created with qty = 0.

#### Multiple By-Products
- GIVEN BOM has 3 by-products, WHEN first by-product registered, THEN prompts for second by-product.
- GIVEN all by-products registered, WHEN complete, THEN "All by-products registered" confirmation displays.
- GIVEN operator taps "Skip All", WHEN tapped, THEN skips remaining by-products and completes flow.

### Network Error Handling
- GIVEN network error during LP creation, WHEN error occurs, THEN "Network error. Retry?" displays with Retry and Save Offline buttons.
- GIVEN operator taps "Save Offline", WHEN operation queued, THEN confirmation "Saved for later sync" displays.
- GIVEN offline queue has pending items, WHEN network restored, THEN operations sync automatically.

### Multi-tenancy
- GIVEN Operator A from Org A, WHEN scanning WO, THEN only Org A work orders are accessible.
- GIVEN Operator A attempts to access Org B WO, WHEN validation runs, THEN 404 "Work order not found" returns (not 403).

## Technical Specification

### Database Schema

#### printer_configs table

```sql
CREATE TABLE printer_configs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID NOT NULL REFERENCES organizations(id) ON DELETE CASCADE,

  -- Printer identification
  printer_name TEXT NOT NULL,
  printer_ip TEXT NOT NULL,
  printer_port INTEGER NOT NULL DEFAULT 9100,
  printer_type TEXT NOT NULL DEFAULT 'zebra',

  -- Configuration
  is_default BOOLEAN NOT NULL DEFAULT false,
  location_id UUID REFERENCES locations(id),
  label_template TEXT,

  -- Timestamps
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

-- Indexes
CREATE INDEX idx_printer_configs_org_default ON printer_configs(org_id, is_default);
CREATE INDEX idx_printer_configs_org_location ON printer_configs(org_id, location_id);
```

#### offline_queue table

```sql
CREATE TABLE offline_queue (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID NOT NULL REFERENCES organizations(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,

  -- Operation details
  operation_type TEXT NOT NULL, -- 'register_output', 'register_by_product'
  payload JSONB NOT NULL,
  status TEXT NOT NULL DEFAULT 'pending', -- 'pending', 'synced', 'failed'
  retry_count INTEGER NOT NULL DEFAULT 0,
  error_message TEXT,

  -- Timestamps
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  synced_at TIMESTAMPTZ
);

-- Indexes
CREATE INDEX idx_offline_queue_org_status ON offline_queue(org_id, status);
CREATE INDEX idx_offline_queue_user_status ON offline_queue(user_id, status);
```

### RLS Policies

```sql
-- printer_configs: Org-level access
CREATE POLICY "printer_configs_org_isolation" ON printer_configs
FOR ALL USING (org_id = auth.jwt() ->> 'org_id');

-- offline_queue: User-level access only
CREATE POLICY "offline_queue_user_isolation" ON offline_queue
FOR ALL USING (user_id = auth.uid());
```

### API Endpoints

```
# Scanner Output Registration
POST   /api/production/output/validate-wo       - Validate WO barcode (500ms target)
POST   /api/production/output/register          - Create LP from scanner
GET    /api/production/output/by-products/:woId - Get by-products for WO
POST   /api/production/output/register-by-product - Create by-product LP

# Label Printing
POST   /api/production/output/generate-label    - Generate ZPL content
POST   /api/production/output/print-label       - Send ZPL to printer (2s target)
GET    /api/production/output/printer-status    - Check printer availability
```

### Service Methods

**Location:** `lib/services/scanner-output-service.ts`

```typescript
interface ScannerOutputService {
  // WO Operations
  validateWO(barcode: string): Promise<WOValidationResult>;

  // Output Registration
  registerOutput(data: ScannerRegisterInput): Promise<RegisterOutputResponse>;

  // By-Products
  getByProducts(woId: string): Promise<ByProduct[]>;
  registerByProduct(data: ScannerByProductInput): Promise<RegisterByProductResponse>;
}

interface WOValidationResult {
  valid: boolean;
  wo: {
    id: string;
    wo_number: string;
    status: string;
    product_id: string;
    product_name: string;
    product_code: string;
    planned_qty: number;
    registered_qty: number;
    remaining_qty: number;
    progress_percent: number;
    uom: string;
    batch_number: string;
    line_name: string;
    shelf_life_days: number;
  };
  by_products: ByProductInfo[];
}

interface ScannerRegisterInput {
  wo_id: string;
  quantity: number;
  qa_status: 'approved' | 'pending' | 'rejected';
  batch_number: string;
  expiry_date: string;
  location_id: string;
  operator_badge?: string;
}

interface RegisterOutputResponse {
  lp: {
    id: string;
    lp_number: string;
    qty: number;
    uom: string;
    batch_number: string;
    qa_status: string;
    expiry_date: string;
  };
  wo_progress: {
    output_qty: number;
    progress_percent: number;
    remaining_qty: number;
  };
  genealogy: {
    parent_count: number;
    child_lp_id: string;
  };
}
```

**Location:** `lib/services/label-service.ts`

```typescript
interface LabelService {
  // ZPL Generation
  generateZPL(lpId: string, templateId?: string): Promise<ZPLContent>;

  // Printing
  sendToPrinter(zpl: string, printerId?: string): Promise<PrintResult>;
  getPrinterStatus(locationId?: string): Promise<PrinterStatus>;
}

interface ZPLContent {
  zpl_content: string;
  label_fields: {
    lp_number: string;
    barcode_type: string;
    product_name: string;
    qty_with_uom: string;
    batch_number: string;
    expiry_date: string;
    qa_status: string;
  };
}

interface PrintResult {
  success: boolean;
  printer_name: string;
  sent_at: string;
}

interface PrinterStatus {
  configured: boolean;
  printer?: {
    id: string;
    name: string;
    ip: string;
    status: string;
  };
  error?: {
    message: string;
  };
}
```

**Location:** `lib/services/offline-queue-service.ts`

```typescript
interface OfflineQueueService {
  // Queue Management
  queueOperation(operation: OfflineOperation): Promise<void>;
  syncQueue(): Promise<SyncResult>;
  getPendingCount(): number;
  clearQueue(): void;
}

interface OfflineOperation {
  operation_type: 'register_output' | 'register_by_product';
  payload: Record<string, unknown>;
}

interface SyncResult {
  synced_count: number;
  failed_count: number;
  errors: string[];
}
```

### Zod Validation Schemas

**Location:** `lib/validation/scanner-output.ts`

```typescript
import { z } from 'zod';

// WO Barcode validation
export const validateWOSchema = z.object({
  barcode: z.string().min(1, 'Barcode is required'),
});

// Scanner output registration
export const scannerOutputSchema = z.object({
  wo_id: z.string().uuid('Invalid work order ID'),
  quantity: z.number().positive('Quantity must be greater than 0'),
  qa_status: z.enum(['approved', 'pending', 'rejected'], {
    required_error: 'QA status is required',
  }),
  batch_number: z.string().min(1, 'Batch number is required'),
  expiry_date: z.string().datetime(),
  location_id: z.string().uuid('Invalid location ID'),
  operator_badge: z.string().optional(),
});

// By-product registration
export const byProductSchema = z.object({
  wo_id: z.string().uuid(),
  main_output_lp_id: z.string().uuid(),
  by_product_id: z.string().uuid(),
  quantity: z.number().min(0, 'Quantity cannot be negative'),
  qa_status: z.enum(['approved', 'pending', 'rejected']),
  batch_number: z.string().min(1),
  expiry_date: z.string().datetime(),
  location_id: z.string().uuid(),
  zero_qty_confirmed: z.boolean().optional(),
}).refine(
  (data) => data.quantity > 0 || data.zero_qty_confirmed === true,
  { message: 'Quantity is 0 and not confirmed', path: ['quantity'] }
);

// Print label request
export const printLabelSchema = z.object({
  zpl_content: z.string().min(1, 'ZPL content is required'),
  printer_id: z.string().uuid().optional(),
});
```

## UI Components

### Pages

- `app/(authenticated)/scanner/output/page.tsx` - 7-step scanner wizard

### Components

**Location:** `app/(authenticated)/scanner/output/components/`

```
ScanWOStep.tsx              - Step 1: Auto-focus barcode input, WO validation
EnterQuantityStep.tsx       - Step 2: Number pad (64x64dp), qty input
SelectQAStatusStep.tsx      - Step 3: Large QA buttons (64dp height)
ReviewOutputStep.tsx        - Step 4: Summary card, edit links
LPCreatedStep.tsx           - Step 5: Success animation, voice announcement
PrintLabelStep.tsx          - Step 6: Label preview, print button
ByProductPromptStep.tsx     - Step 7: By-product list, Yes/No/Skip
NumberPad.tsx               - Reusable number pad with large keys
QAStatusButton.tsx          - 64dp color-coded status button
```

### Hooks

**Location:** `lib/hooks/`

```
use-scanner-output.ts       - 7-step wizard state management
use-audio-feedback.ts       - Audio/vibration feedback utilities
```

### Component Details

**ScanWOStep.tsx**
```tsx
interface ScanWOStepProps {
  onWOValidated: (data: WOValidationResult) => void;
  onError: (error: string) => void;
}

// Features:
// - Auto-focus on barcode input
// - Validate within 500ms
// - Display WO info card on success
// - Error state with red X and beep
```

**EnterQuantityStep.tsx**
```tsx
interface EnterQuantityStepProps {
  woData: WOValidationResult;
  onQuantityConfirmed: (qty: number) => void;
  onBack: () => void;
}

// Features:
// - Number pad with 64x64dp keys
// - Decimal support (2 places)
// - Clear and backspace buttons
// - Progress preview
// - Overproduction warning
```

**SelectQAStatusStep.tsx**
```tsx
interface SelectQAStatusStepProps {
  productName: string;
  quantity: number;
  batchNumber: string;
  onStatusSelected: (status: 'approved' | 'pending' | 'rejected') => void;
  onBack: () => void;
}

// Features:
// - Three large buttons (64dp height)
// - Color coding: green/yellow/red
// - Selection state with checkmark
```

**NumberPad.tsx**
```tsx
interface NumberPadProps {
  value: string;
  onChange: (value: string) => void;
  maxDecimalPlaces?: number; // default: 2
}

// Layout:
// [1] [2] [3]
// [4] [5] [6]
// [7] [8] [9]
// [.] [0] [<-]
// [Clear]
//
// All keys: 64x64dp minimum
```

### Mobile Requirements

| Requirement | Specification |
|-------------|---------------|
| Screen Width | 320px - 480px |
| Touch Targets | Minimum 48x48dp |
| Number Pad Keys | 64x64dp |
| QA Buttons | Full width x 64dp |
| Heading Font | 24px |
| Body Font | 18px |
| Quantity Input | 32px |
| Contrast Ratio | >= 4.5:1 |

### Device Support

- Zebra TC52/TC57 (primary)
- Honeywell CT60/CK65
- iPhone (iOS 14+)
- Android (API 28+)
- Bluetooth ring scanners
- Zebra ZPL printers

## Test Cases

### Unit Tests

**scanner-output-service.test.ts**
```typescript
describe('ScannerOutputService', () => {
  describe('validateWO', () => {
    it('returns WO data for valid barcode within 500ms');
    it('rejects invalid barcode format');
    it('rejects WO not in progress or paused');
    it('returns remaining qty calculation');
  });

  describe('registerOutput', () => {
    it('creates LP with scanner metadata');
    it('updates WO output_qty');
    it('links genealogy records');
    it('rejects qty = 0');
  });
});
```

**label-service.test.ts**
```typescript
describe('LabelService', () => {
  describe('generateZPL', () => {
    it('creates valid ZPL with all fields');
    it('includes LP barcode (Code128)');
    it('formats expiry date correctly');
  });

  describe('sendToPrinter', () => {
    it('returns success within 2s');
    it('returns 404 when no printer configured');
    it('returns 503 when printer offline');
  });
});
```

**offline-queue-service.test.ts**
```typescript
describe('OfflineQueueService', () => {
  describe('queueOperation', () => {
    it('stores operation in IndexedDB');
    it('increments pending count');
  });

  describe('syncQueue', () => {
    it('processes all pending operations');
    it('marks synced items');
    it('handles partial failures');
  });
});
```

### Integration Tests

**validate-wo.test.ts**
```typescript
describe('POST /api/production/output/validate-wo', () => {
  it('returns WO data within 500ms');
  it('returns 404 for non-existent WO');
  it('returns 409 for completed WO');
  it('returns by_products array from BOM');
});
```

**print-label.test.ts**
```typescript
describe('POST /api/production/output/print-label', () => {
  it('sends ZPL to printer within 2s');
  it('returns 404 when no printer configured');
  it('returns 503 when printer offline');
  it('returns 504 on print timeout');
});
```

### E2E Tests

**output-registration.spec.ts**
```typescript
describe('Scanner Output Registration', () => {
  it('completes full 7-step flow');
  it('handles by-product registration loop');
  it('shows zero quantity warning');
  it('queues operation when offline');
  it('disables print when no printer');
  it('verifies mobile touch targets (64dp)');
});
```

### Performance Tests

| Test | Target | Scenario |
|------|--------|----------|
| WO Validation | < 500ms p95 | POST /api/production/output/validate-wo |
| Label Print | < 2000ms p95 | POST /api/production/output/print-label |
| Step Transition | < 300ms | Each wizard step |

## Security Considerations

1. **Input Validation**
   - Sanitize all barcode inputs
   - Validate WO belongs to user's org
   - Rate limit validation API (100 req/min)

2. **Printer Security**
   - Printers only accessible within org
   - No sensitive data in ZPL (passwords, etc.)
   - Print job logging for audit

3. **Offline Queue**
   - Encrypt queued operations at rest
   - User-level isolation (RLS)
   - Auto-expire after 7 days

## Deliverables

- [ ] `printer_configs` table migration
- [ ] `offline_queue` table migration
- [ ] RLS policies for new tables
- [ ] Scanner output service (`lib/services/scanner-output-service.ts`)
- [ ] Label service (`lib/services/label-service.ts`)
- [ ] Offline queue service (`lib/services/offline-queue-service.ts`)
- [ ] Audio feedback hook (`lib/hooks/use-audio-feedback.ts`)
- [ ] Scanner output hook (`lib/hooks/use-scanner-output.ts`)
- [ ] Zod schemas (`lib/validation/scanner-output.ts`)
- [ ] API route: `/api/production/output/validate-wo`
- [ ] API route: `/api/production/output/register`
- [ ] API route: `/api/production/output/generate-label`
- [ ] API route: `/api/production/output/print-label`
- [ ] API route: `/api/production/output/by-products/:woId`
- [ ] API route: `/api/production/output/register-by-product`
- [ ] API route: `/api/production/output/printer-status`
- [ ] ScanWOStep component
- [ ] EnterQuantityStep component
- [ ] SelectQAStatusStep component
- [ ] ReviewOutputStep component
- [ ] LPCreatedStep component
- [ ] PrintLabelStep component
- [ ] ByProductPromptStep component
- [ ] NumberPad component
- [ ] QAStatusButton component
- [ ] Scanner output page (`/scanner/output`)
- [ ] Unit tests (>80% coverage)
- [ ] Integration tests
- [ ] E2E tests
- [ ] Performance tests (500ms validation, 2s print)

## Definition of Done

- [ ] WO barcode validation returns within 500ms
- [ ] Number pad keys are 64x64dp on mobile
- [ ] QA status buttons are 64dp height with color coding
- [ ] LP creation triggers "LP created" voice announcement
- [ ] Label prints within 2 seconds when printer configured
- [ ] Print button disabled with tooltip when no printer
- [ ] By-product expected qty calculated correctly (planned_qty * yield_percent / 100)
- [ ] Zero-quantity by-product shows confirmation warning
- [ ] Offline queue stores operations when network unavailable
- [ ] Operations sync automatically when network restored
- [ ] All touch targets >= 48dp
- [ ] Contrast ratio >= 4.5:1 for all text
- [ ] Works on Zebra TC52, Honeywell CT60, iOS, Android
- [ ] Unit test coverage >= 80%
- [ ] Integration tests pass
- [ ] E2E tests pass on mobile viewport (375px)
- [ ] Performance targets met (500ms validation, 2s print, 300ms transitions)
