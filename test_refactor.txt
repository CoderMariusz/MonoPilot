
> monopilot@1.0.0 test
> pnpm test:unit && pnpm test:e2e


> monopilot@1.0.0 test:unit C:\Users\Mariusz K\Documents\Programowanie\MonoPilot
> cd apps/frontend && pnpm test


> monopilot@0.1.0 test C:\Users\Mariusz K\Documents\Programowanie\MonoPilot\apps\frontend
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.12 [39m[90mC:/Users/Mariusz K/Documents/Programowanie/MonoPilot/apps/frontend[39m

[90mstdout[2m | __tests__/components/production/outputs/RegisterOutputModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/technical/__tests__/version-history-panel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/warehouse/license-plates/__tests__/LPLabelPrint.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | app/api/shipping/sales-orders/__tests__/import.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | components/warehouse/asns/__tests__/ReceiveModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/settings/onboarding/__tests__/OrganizationProfileStep.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | components/settings/onboarding/__tests__/OrganizationProfileStep.TD-001.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [31m‚ùØ[39m components/technical/__tests__/version-history-panel.test.tsx [2m([22m[2m26 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 13675[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render panel when open [33m 678[2mms[22m[39m
       [32m‚úì[39m should not render panel when closed[32m 3[2mms[22m[39m
       [32m‚úì[39m should have 400px width[32m 226[2mms[22m[39m
[31m       [31m√ó[31m should slide in from right side[39m[33m 1148[2mms[22m[39m
[31m       [31m√ó[31m should have close button[39m[33m 1152[2mms[22m[39m
[31m       [31m√ó[31m should call onClose when close button clicked[39m[33m 1205[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display version history list [33m 336[2mms[22m[39m
[31m       [31m√ó[31m should display user names for each version[39m[33m 1178[2mms[22m[39m
       [32m‚úì[39m should display timestamps for each version[32m 231[2mms[22m[39m
       [32m‚úì[39m should display change summary for each version[32m 194[2mms[22m[39m
       [32m‚úì[39m should display "Initial creation" for version 1[32m 196[2mms[22m[39m
[31m       [31m√ó[31m should not display changed fields for initial version[39m[33m 1140[2mms[22m[39m
       [32m‚úì[39m should have "View Details" button for each version[32m 292[2mms[22m[39m
[31m       [31m√ó[31m should expand version details when clicked[39m[33m 1302[2mms[22m[39m
[31m       [31m√ó[31m should display old and new values for changed fields[39m[33m 1256[2mms[22m[39m
       [33m[2m‚úì[22m[39m should collapse details when clicked again [33m 469[2mms[22m[39m
       [32m‚úì[39m should show loading indicator while fetching history[32m 106[2mms[22m[39m
       [32m‚úì[39m should hide loading indicator after data loads[32m 142[2mms[22m[39m
       [32m‚úì[39m should display empty state when no history exists[32m 122[2mms[22m[39m
[31m       [31m√ó[31m should display error message when fetch fails[39m[33m 1126[2mms[22m[39m
       [32m‚úì[39m should have retry button on error[32m 235[2mms[22m[39m
       [32m‚úì[39m should load more history when "Load More" clicked[32m 241[2mms[22m[39m
       [32m‚úì[39m should not show "Load More" on last page[32m 207[2mms[22m[39m
       [32m‚úì[39m should have proper ARIA labels[32m 181[2mms[22m[39m
       [32m‚úì[39m should trap focus within panel[32m 171[2mms[22m[39m
       [32m‚úì[39m should support keyboard navigation (Escape to close)[32m 126[2mms[22m[39m
 [31m‚ùØ[39m __tests__/components/production/outputs/RegisterOutputModal.test.tsx [2m([22m[2m28 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 15045[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display product name [33m 907[2mms[22m[39m
       [32m‚úì[39m should display product code[32m 286[2mms[22m[39m
       [32m‚úì[39m should display WO number[32m 208[2mms[22m[39m
       [32m‚úì[39m should display current progress (output_qty / planned_qty)[32m 264[2mms[22m[39m
       [32m‚úì[39m should display remaining quantity[32m 231[2mms[22m[39m
       [32m‚úì[39m should have quantity input field[32m 256[2mms[22m[39m
       [32m‚úì[39m should have UoM display (read-only from product)[32m 191[2mms[22m[39m
       [32m‚úì[39m should have batch number field pre-filled from WO[32m 218[2mms[22m[39m
       [32m‚úì[39m should have QA status dropdown[32m 210[2mms[22m[39m
       [32m‚úì[39m should have location dropdown pre-selected[32m 259[2mms[22m[39m
       [32m‚úì[39m should have expiry date picker[32m 262[2mms[22m[39m
       [32m‚úì[39m AC: expiry date defaults to today + shelf_life_days[32m 258[2mms[22m[39m
       [32m‚úì[39m should have optional notes textarea[32m 245[2mms[22m[39m
[31m       [31m√ó[31m AC: shows "Quantity must be greater than 0" when qty=0[39m[33m 2092[2mms[22m[39m
[31m       [31m√ó[31m AC: shows "QA status is required" when require_qa_on_output=true and no selection[39m[33m 1880[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows submission without QA when require_qa_on_output=false [33m 659[2mms[22m[39m
       [32m‚úì[39m disables submit button when form invalid[32m 202[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: has Approved option [33m 733[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: has Pending option [33m 577[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: has Rejected option [33m 558[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "Confirm Registration" button [33m 302[2mms[22m[39m
       [32m‚úì[39m should have "Cancel" button[32m 273[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onCancel when Cancel clicked [33m 303[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onConfirm with form data when Confirm clicked [33m 828[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading state during submission [33m 776[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show output summary section [33m 591[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update summary when quantity changes [33m 674[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show projected progress percentage [33m 797[2mms[22m[39m
[90mstdout[2m | components/settings/allergens/__tests__/AllergensDataTable.TD-209.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [31m‚ùØ[39m components/warehouse/license-plates/__tests__/LPLabelPrint.test.tsx [2m([22m[2m61 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 16281[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render print button with printer icon [33m 493[2mms[22m[39m
       [32m‚úì[39m should render icon-only variant[32m 56[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open print modal when clicked [33m 467[2mms[22m[39m
       [32m‚úì[39m should be disabled when disabled prop is true[32m 41[2mms[22m[39m
[31m       [31m√ó[31m should call onPrintComplete after successful print[39m[33m 1700[2mms[22m[39m
       [32m‚úì[39m should render modal when isOpen is true[32m 195[2mms[22m[39m
       [32m‚úì[39m should not render when isOpen is false[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should display LP info summary[39m[33m 1179[2mms[22m[39m
[31m       [31m√ó[31m should display batch number[39m[33m 1222[2mms[22m[39m
[31m       [31m√ó[31m should display expiry date[39m[33m 1182[2mms[22m[39m
[31m       [31m√ó[31m should have copies input with default from settings[39m[33m 1150[2mms[22m[39m
       [32m‚úì[39m should display label preview[32m 215[2mms[22m[39m
       [32m‚úì[39m should have Download ZPL button[32m 200[2mms[22m[39m
[31m       [31m√ó[31m should close modal when close button clicked[39m[32m 120[2mms[22m[39m
       [32m‚úì[39m should download ZPL file when Download clicked[32m 260[2mms[22m[39m
       [32m‚úì[39m should show loading state during download[32m 273[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error message on API failure [33m 376[2mms[22m[39m
[31m       [31m√ó[31m should update copies text when copies changed[39m[33m 1104[2mms[22m[39m
       [32m‚úì[39m should show info message when no printer configured[32m 127[2mms[22m[39m
       [32m‚úì[39m should render label preview container[32m 17[2mms[22m[39m
       [32m‚úì[39m should display LP number with barcode placeholder[32m 20[2mms[22m[39m
       [32m‚úì[39m should display product name[32m 13[2mms[22m[39m
       [32m‚úì[39m should display quantity with UoM[32m 18[2mms[22m[39m
       [32m‚úì[39m should display batch number[32m 22[2mms[22m[39m
       [32m‚úì[39m should display expiry date[32m 16[2mms[22m[39m
       [32m‚úì[39m should display location path[32m 22[2mms[22m[39m
       [32m‚úì[39m should display QR code placeholder[32m 24[2mms[22m[39m
       [32m‚úì[39m should show -- for null batch number[32m 19[2mms[22m[39m
       [32m‚úì[39m should show -- for null expiry date[32m 16[2mms[22m[39m
       [32m‚úì[39m should truncate long product name[32m 27[2mms[22m[39m
       [32m‚úì[39m should have 4:6 aspect ratio styling[32m 14[2mms[22m[39m
       [32m‚úì[39m should render number input[32m 49[2mms[22m[39m
       [32m‚úì[39m should have increment button[32m 79[2mms[22m[39m
       [32m‚úì[39m should have decrement button[32m 56[2mms[22m[39m
       [32m‚úì[39m should increment value when + clicked[32m 100[2mms[22m[39m
       [32m‚úì[39m should decrement value when - clicked[32m 112[2mms[22m[39m
       [32m‚úì[39m should not go below 1[32m 128[2mms[22m[39m
       [32m‚úì[39m should not exceed 100[32m 113[2mms[22m[39m
[31m       [31m√ó[31m should allow typing valid value[39m[32m 155[2mms[22m[39m
       [32m‚úì[39m should reject invalid input (0)[32m 174[2mms[22m[39m
       [32m‚úì[39m should reject invalid input (>100)[32m 204[2mms[22m[39m
       [32m‚úì[39m should show error state for invalid value[32m 11[2mms[22m[39m
       [32m‚úì[39m should render modal when isOpen is true[32m 180[2mms[22m[39m
       [32m‚úì[39m should not render when isOpen is false[32m 11[2mms[22m[39m
       [32m‚úì[39m should display list of selected LPs[32m 149[2mms[22m[39m
[31m       [31m√ó[31m should have copies input that applies to all[39m[32m 99[2mms[22m[39m
       [32m‚úì[39m should have Download All ZPL button[32m 261[2mms[22m[39m
       [32m‚úì[39m should close modal when Cancel clicked[32m 222[2mms[22m[39m
       [33m[2m‚úì[22m[39m should download ZIP when Download All clicked [33m 399[2mms[22m[39m
       [32m‚úì[39m should show loading state during bulk download[32m 287[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error on bulk download failure [33m 353[2mms[22m[39m
       [32m‚úì[39m should reject more than 100 LPs[32m 198[2mms[22m[39m
[31m       [31m√ó[31m should update total copies label[39m[32m 206[2mms[22m[39m
       [33m[2m‚úì[22m[39m should complete single LP print flow [33m 763[2mms[22m[39m
       [32m‚úì[39m PrintLabelButton should have accessible name[32m 44[2mms[22m[39m
       [32m‚úì[39m PrintLabelModal should trap focus[32m 153[2mms[22m[39m
       [32m‚úì[39m CopiesInput should have label[32m 31[2mms[22m[39m
       [32m‚úì[39m should support keyboard navigation in modal[32m 270[2mms[22m[39m
       [32m‚úì[39m should handle LP with missing optional fields[32m 297[2mms[22m[39m
       [32m‚úì[39m should handle network error gracefully[32m 244[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle empty bulk selection [33m 332[2mms[22m[39m
[90mstdout[2m | components/production/consumption/__tests__/OverConsumptionApprovalModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/production/outputs/__tests__/RegisterOutputModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [31m‚ùØ[39m components/settings/allergens/__tests__/AllergensDataTable.TD-209.test.tsx [2m([22m[2m14 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 10429[2mms[22m[39m
       [32m‚úì[39m should render Products column header[32m 94[2mms[22m[39m
       [32m‚úì[39m should not render Products column when showProductsColumn is false[32m 104[2mms[22m[39m
       [32m‚úì[39m should show loading skeleton while fetching counts[32m 119[2mms[22m[39m
[31m       [31m√ó[31m should display product counts for each allergen[39m[33m 1101[2mms[22m[39m
[31m       [31m√ó[31m should show 0 for allergens not in counts response[39m[33m 1119[2mms[22m[39m
[31m       [31m√ó[31m should apply muted style for count of 0[39m[33m 1102[2mms[22m[39m
[31m       [31m√ó[31m should apply bold style for count >= 10[39m[33m 1127[2mms[22m[39m
[31m       [31m√ó[31m should not apply bold style for count < 10[39m[33m 1132[2mms[22m[39m
[31m       [31m√ó[31m should render count as link when count > 0[39m[33m 1107[2mms[22m[39m
[31m       [31m√ó[31m should not render link when count is 0[39m[33m 1122[2mms[22m[39m
[31m       [31m√ó[31m should have correct title attribute on link[39m[33m 1078[2mms[22m[39m
       [32m‚úì[39m should show "--" when fetch fails[32m 118[2mms[22m[39m
[31m       [31m√ó[31m should show product count in tooltip[39m[33m 1091[2mms[22m[39m
       [32m‚úì[39m should use correct colSpan for empty search state[32m 12[2mms[22m[39m
[90mstdout[2m | components/production/outputs/__tests__/RegisterByProductModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m components/settings/onboarding/__tests__/OrganizationProfileStep.TD-001.test.tsx [2m([22m[2m29 tests[22m[2m | [22m[31m25 failed[39m[2m)[22m[33m 32984[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render all 12 fields (currently only renders 4 - WILL FAIL) [33m 470[2mms[22m[39m
[31m       [31m√ó[31m should display Address section header (WILL FAIL)[39m[32m 264[2mms[22m[39m
       [32m‚úì[39m should display Contact Information section header (WILL FAIL)[32m 221[2mms[22m[39m
[31m       [31m√ó[31m should show required indicators for country and date_format (WILL FAIL)[39m[32m 191[2mms[22m[39m
[31m       [31m√ó[31m should render CountrySelect component (WILL FAIL)[39m[32m 241[2mms[22m[39m
       [32m‚úì[39m should render DateFormatSelect component (WILL FAIL)[32m 205[2mms[22m[39m
[31m       [31m√ó[31m should validate country field is required (WILL FAIL)[39m[33m 2557[2mms[22m[39m
[31m       [31m√ó[31m should validate date_format field is required (WILL FAIL)[39m[33m 2631[2mms[22m[39m
[31m       [31m√ó[31m should validate country must be 2-character ISO code (WILL FAIL)[39m[33m 1554[2mms[22m[39m
[31m       [31m√ó[31m should validate date_format must be one of allowed values (WILL FAIL)[39m[33m 807[2mms[22m[39m
[31m       [31m√ó[31m should validate contact_email format if provided (WILL FAIL)[39m[33m 1787[2mms[22m[39m
[31m       [31m√ó[31m should accept valid contact_email format (WILL FAIL)[39m[33m 915[2mms[22m[39m
[31m       [31m√ó[31m should allow empty address_line1 field (WILL FAIL)[39m[33m 981[2mms[22m[39m
[31m       [31m√ó[31m should allow empty address_line2 field (WILL FAIL)[39m[33m 1065[2mms[22m[39m
[31m       [31m√ó[31m should allow empty city field (WILL FAIL)[39m[33m 1327[2mms[22m[39m
[31m       [31m√ó[31m should allow empty postal_code field (WILL FAIL)[39m[33m 1376[2mms[22m[39m
[31m       [31m√ó[31m should allow empty contact_phone field (WILL FAIL)[39m[33m 1063[2mms[22m[39m
[31m       [31m√ó[31m should submit all 12 fields in payload (WILL FAIL)[39m[33m 4223[2mms[22m[39m
[31m       [31m√ó[31m should submit with only required fields filled (WILL FAIL)[39m[33m 1196[2mms[22m[39m
[31m       [31m√ó[31m should POST to API with all 12 fields (WILL FAIL)[39m[33m 1187[2mms[22m[39m
[31m       [31m√ó[31m should persist new fields to organizations table (WILL FAIL)[39m[33m 3448[2mms[22m[39m
[31m       [31m√ó[31m should render searchable country dropdown (WILL FAIL)[39m[33m 338[2mms[22m[39m
[31m       [31m√ó[31m should filter countries when typing (WILL FAIL)[39m[33m 474[2mms[22m[39m
[31m       [31m√ó[31m should display country with ISO code (WILL FAIL)[39m[33m 466[2mms[22m[39m
[31m       [31m√ó[31m should select country and store ISO code (WILL FAIL)[39m[33m 1205[2mms[22m[39m
[31m       [31m√ó[31m should show 3 date format options (WILL FAIL)[39m[33m 548[2mms[22m[39m
[31m       [31m√ó[31m should display examples for each date format (WILL FAIL)[39m[33m 492[2mms[22m[39m
       [33m[2m‚úì[22m[39m should auto-select date format based on country (WILL FAIL) [33m 500[2mms[22m[39m
[31m       [31m√ó[31m should allow overriding auto-selected date format (WILL FAIL)[39m[33m 1245[2mms[22m[39m
 [31m‚ùØ[39m components/production/outputs/__tests__/RegisterOutputModal.test.tsx [2m([22m[2m23 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 15579[2mms[22m[39m
[31m       [31m√ó[31m renders modal with title and WO info[39m[33m 1005[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays product information section [33m 362[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays progress information [33m 355[2mms[22m[39m
       [33m[2m‚úì[22m[39m has quantity input field [33m 329[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: pre-fills batch number from WO [33m 325[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: pre-selects default location from line [33m 311[2mms[22m[39m
[31m       [31m√ó[31m AC: auto-calculates expiry date from shelf life[39m[33m 329[2mms[22m[39m
       [32m‚úì[39m has notes textarea[32m 255[2mms[22m[39m
[31m       [31m√ó[31m AC: shows error when quantity is 0[39m[33m 778[2mms[22m[39m
[31m       [31m√ó[31m AC: shows error when QA status required but not selected[39m[33m 904[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: allows submission without QA status when not required [33m 916[2mms[22m[39m
       [32m‚úì[39m disables submit button when form is invalid[32m 285[2mms[22m[39m
[31m       [31m√ó[31m shows required indicator when QA status is required[39m[32m 259[2mms[22m[39m
[31m       [31m√ó[31m does not show required indicator when QA status is optional[39m[32m 247[2mms[22m[39m
[31m       [31m√ó[31m has QA status options: Approved, Pending, Rejected[39m[33m 1797[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows summary preview when quantity entered [33m 660[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows projected progress after registration [33m 905[2mms[22m[39m
       [33m[2m‚úì[22m[39m does not show summary when quantity is empty [33m 367[2mms[22m[39m
[31m       [31m√ó[31m AC: calls onConfirm with correct data[39m[33m 3026[2mms[22m[39m
[31m       [31m√ó[31m shows loading state during submission[39m[33m 970[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onCancel when Cancel button clicked [33m 403[2mms[22m[39m
       [32m‚úì[39m has proper form labels[32m 247[2mms[22m[39m
[31m       [31m√ó[31m shows validation errors with role="alert"[39m[33m 536[2mms[22m[39m
[90mstdout[2m | app/(authenticated)/settings/__tests__/page.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [31m‚ùØ[39m components/production/consumption/__tests__/OverConsumptionApprovalModal.test.tsx [2m([22m[2m50 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 18071[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open is true [33m 621[2mms[22m[39m
       [32m‚úì[39m should not render modal when open is false[32m 10[2mms[22m[39m
       [32m‚úì[39m should display modal title[32m 210[2mms[22m[39m
       [32m‚úì[39m should display warning icon in header[32m 156[2mms[22m[39m
       [32m‚úì[39m should display material code and name[32m 176[2mms[22m[39m
       [32m‚úì[39m should display WO number[32m 188[2mms[22m[39m
[31m       [31m√ó[31m should display BOM requirement[39m[32m 174[2mms[22m[39m
[31m       [31m√ó[31m should display already consumed quantity[39m[32m 146[2mms[22m[39m
       [32m‚úì[39m should display attempting quantity with + prefix[32m 168[2mms[22m[39m
       [32m‚úì[39m should display total after quantity[32m 203[2mms[22m[39m
[31m       [31m√ó[31m should display over-consumption quantity with variance[39m[32m 157[2mms[22m[39m
       [32m‚úì[39m should display LP number[32m 166[2mms[22m[39m
       [32m‚úì[39m should show submit request button for operator without pending request[32m 202[2mms[22m[39m
       [32m‚úì[39m should not show approve/reject buttons for operator[32m 215[2mms[22m[39m
[31m       [31m√ó[31m should show close button for operator[39m[32m 219[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRequestSubmitted when request submitted [33m 479[2mms[22m[39m
       [32m‚úì[39m should display "Awaiting Manager Approval" status[32m 147[2mms[22m[39m
       [32m‚úì[39m should display clock icon for pending status[32m 150[2mms[22m[39m
       [32m‚úì[39m should display request ID[32m 134[2mms[22m[39m
       [32m‚úì[39m should display requested by name[32m 156[2mms[22m[39m
       [32m‚úì[39m should show cancel request button for pending request[32m 266[2mms[22m[39m
       [32m‚úì[39m should not show submit request button when pending[32m 170[2mms[22m[39m
       [32m‚úì[39m should show approve button for manager[32m 226[2mms[22m[39m
       [32m‚úì[39m should show reject button for manager[32m 228[2mms[22m[39m
[31m       [31m√ó[31m should display requester information for manager[39m[32m 147[2mms[22m[39m
       [32m‚úì[39m should show optional reason input for approval[32m 127[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onApproved when approve clicked without reason [33m 396[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onApproved with reason when provided [33m 3692[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable approve button while submitting [33m 395[2mms[22m[39m
       [32m‚úì[39m should show loading state on approve button when submitting[32m 271[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show rejection reason input when reject clicked [33m 326[2mms[22m[39m
       [33m[2m‚úì[22m[39m should mark rejection reason as required [33m 357[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show validation error when rejecting without reason [33m 672[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRejected with reason when provided [33m 2418[2mms[22m[39m
       [33m[2m‚úì[22m[39m should not call onRejected when reason is empty [33m 638[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow canceling rejection flow [33m 596[2mms[22m[39m
       [32m‚úì[39m should display rejection status[32m 135[2mms[22m[39m
       [32m‚úì[39m should display rejection reason[32m 137[2mms[22m[39m
       [32m‚úì[39m should display who rejected[32m 173[2mms[22m[39m
       [32m‚úì[39m should display rejection timestamp[32m 149[2mms[22m[39m
[31m       [31m√ó[31m should show close button only for rejected request[39m[32m 214[2mms[22m[39m
[31m       [31m√ó[31m should call onOpenChange when close button clicked[39m[32m 227[2mms[22m[39m
[31m       [31m√ó[31m should call onOpenChange when clicking outside modal[39m[32m 170[2mms[22m[39m
       [32m‚úì[39m should call onOpenChange when pressing Escape[32m 152[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display error message on API failure [33m 301[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow retry after error [33m 604[2mms[22m[39m
       [32m‚úì[39m should have proper dialog role[32m 141[2mms[22m[39m
       [32m‚úì[39m should have aria-labelledby pointing to title[32m 143[2mms[22m[39m
       [32m‚úì[39m should trap focus within modal[32m 241[2mms[22m[39m
       [32m‚úì[39m should have descriptive button labels[32m 274[2mms[22m[39m
 [31m‚ùØ[39m components/warehouse/asns/__tests__/ReceiveModal.test.tsx [2m([22m[2m26 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 36028[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render loading skeleton while fetching preview [33m 723[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display ASN header info after loading [33m 525[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display items table with editable received_qty [33m 621[2mms[22m[39m
       [33m[2m‚úì[22m[39m should pre-fill received_qty with expected_qty by default [33m 341[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display pre-populated data from ASN [33m 334[2mms[22m[39m
       [33m[2m‚úì[22m[39m should calculate and display variance badge when qty changes [33m 1298[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show green badge for exact match [33m 1460[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show yellow badge for over-receipt [33m 1205[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show variance reason dropdown when variance exists [33m 813[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow selecting variance reason from dropdown [33m 1895[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow entering variance notes [33m 3280[2mms[22m[39m
       [33m[2m‚úì[22m[39m should hide variance reason when variance is zero [33m 961[2mms[22m[39m
       [33m[2m‚úì[22m[39m should submit receive request on confirm [33m 3160[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable submit button when submitting [33m 2064[2mms[22m[39m
       [33m[2m‚úì[22m[39m should validate required fields before submit [33m 575[2mms[22m[39m
[31m       [31m√ó[31m should display success summary after receive completes[39m[33m 5024[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onSuccess callback after completion [33m 2313[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display error alert on API failure [33m 2829[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display error for missing batch when required [33m 3367[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle network errors gracefully [33m 2589[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close modal on cancel [33m 596[2mms[22m[39m
       [32m‚úì[39m should not render when isOpen is false[32m 2[2mms[22m[39m
     [32m‚úì[39m should display green badge for exact match[32m 14[2mms[22m[39m
     [32m‚úì[39m should display red badge for under-receipt[32m 13[2mms[22m[39m
     [32m‚úì[39m should display yellow badge for over-receipt[32m 2[2mms[22m[39m
     [32m‚úì[39m should format decimal variance correctly[32m 16[2mms[22m[39m
[90mstdout[2m | components/warehouse/license-plates/__tests__/MergeLPModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/navigation/__tests__/module-nav-filter.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | components/settings/onboarding/__tests__/OrganizationProfileStep.TD-201.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [31m‚ùØ[39m app/(authenticated)/settings/__tests__/page.test.tsx [2m([22m[2m12 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 9502[2mms[22m[39m
[31m       [31m√ó[31m should render organization summary card with logo, name, and location[39m[33m 1081[2mms[22m[39m
[31m       [31m√ó[31m should display all 6 quick access cards with correct stats[39m[33m 1101[2mms[22m[39m
[31m       [31m√ó[31m should display recent activity feed with last 5 audit entries[39m[32m 144[2mms[22m[39m
[31m       [31m√ó[31m should navigate to correct pages when clicking quick access cards[39m[33m 1095[2mms[22m[39m
       [32m‚úì[39m should show skeleton loaders while data is loading[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should show setup wizard CTA for new organizations[39m[33m 1041[2mms[22m[39m
[31m       [31m√ó[31m should show minimal dashboard when skipping wizard[39m[33m 1036[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error state with retry button when API fails [33m 780[2mms[22m[39m
[31m       [31m√ó[31m should filter quick access cards based on user role[39m[33m 1038[2mms[22m[39m
       [32m‚úì[39m should redirect to dashboard if user has no access to any cards[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should stack cards vertically on mobile[39m[33m 1068[2mms[22m[39m
[31m       [31m√ó[31m should have proper semantic HTML and ARIA attributes[39m[33m 1051[2mms[22m[39m
 [31m‚ùØ[39m components/navigation/__tests__/module-nav-filter.test.tsx [2m([22m[2m14 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6795[2mms[22m[39m
[31m     [31m√ó[31m should return list of enabled modules for org[39m[33m 1096[2mms[22m[39m
     [32m‚úì[39m should always include settings module in enabled list[32m 100[2mms[22m[39m
     [32m‚úì[39m should return empty loading state initially[32m 17[2mms[22m[39m
[31m     [31m√ó[31m should update when modules are toggled[39m[33m 1048[2mms[22m[39m
[31m     [31m√ó[31m should show only enabled modules in navigation[39m[33m 1144[2mms[22m[39m
     [32m‚úì[39m should always show settings module in navigation[32m 36[2mms[22m[39m
     [32m‚úì[39m should always show non-module items (like Dashboard)[32m 39[2mms[22m[39m
     [32m‚úì[39m should hide disabled modules from navigation[32m 55[2mms[22m[39m
[31m     [31m√ó[31m should show all modules when all are enabled[39m[33m 1038[2mms[22m[39m
[31m     [31m√ó[31m should update navigation when module is enabled[39m[33m 1050[2mms[22m[39m
[31m     [31m√ó[31m should update navigation when module is disabled[39m[33m 1060[2mms[22m[39m
     [32m‚úì[39m should handle case when no modules are enabled except settings[32m 48[2mms[22m[39m
     [32m‚úì[39m should handle database error gracefully[32m 25[2mms[22m[39m
     [32m‚úì[39m should handle missing organization_modules records[32m 27[2mms[22m[39m
 [31m‚ùØ[39m components/production/outputs/__tests__/RegisterByProductModal.test.tsx [2m([22m[2m20 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 17518[2mms[22m[39m
       [33m[2m‚úì[22m[39m renders modal with by-product name [33m 1664[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays by-product information [33m 501[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: displays expected qty from yield percent [33m 464[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays BOM configuration info [33m 389[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: pre-fills quantity with expected qty [33m 404[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: auto-generates batch number from main batch [33m 350[2mms[22m[39m
       [32m‚úì[39m defaults QA status to pending[32m 281[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows editing quantity [33m 880[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows editing batch number [33m 1718[2mms[22m[39m
[31m       [31m√ó[31m allows selecting QA status[39m[33m 2332[2mms[22m[39m
[31m       [31m√ó[31m allows selecting location[39m[33m 2220[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays by-product summary when quantity > 0 [33m 365[2mms[22m[39m
       [32m‚úì[39m displays genealogy info in summary[32m 296[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: creates LP with entered qty [33m 1212[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onSuccess after successful registration [33m 578[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows loading state during submission [33m 479[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows error when registration fails [33m 799[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onOpenChange(false) when Cancel clicked [33m 441[2mms[22m[39m
       [32m‚úì[39m has proper form labels[32m 289[2mms[22m[39m
[31m       [31m√ó[31m shows error with role="alert"[39m[33m 1847[2mms[22m[39m
 [31m‚ùØ[39m components/settings/onboarding/__tests__/OrganizationProfileStep.test.tsx [2m([22m[2m41 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 47306[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render organization profile form [33m 788[2mms[22m[39m
       [32m‚úì[39m should render all required form fields[32m 245[2mms[22m[39m
       [32m‚úì[39m should display section headers[32m 205[2mms[22m[39m
       [32m‚úì[39m should show required field indicators[32m 248[2mms[22m[39m
       [32m‚úì[39m should have accessible form structure[32m 273[2mms[22m[39m
       [32m‚úì[39m should pre-fill org name when initialData provided[32m 212[2mms[22m[39m
       [32m‚úì[39m should show empty name field when no initialData[32m 203[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow editing pre-filled name [33m 606[2mms[22m[39m
       [32m‚úì[39m should auto-detect timezone from browser on mount[32m 284[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow changing auto-detected timezone [33m 3581[2mms[22m[39m
       [32m‚úì[39m should pre-fill timezone from initialData if provided[32m 201[2mms[22m[39m
       [32m‚úì[39m should auto-detect language from browser on mount[32m 195[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow changing auto-detected language [33m 304[2mms[22m[39m
       [32m‚úì[39m should pre-fill language from initialData if provided[32m 211[2mms[22m[39m
[31m       [31m√ó[31m should show error when name is empty and form submitted[39m[33m 1421[2mms[22m[39m
       [32m‚úì[39m should not submit form when name is empty[32m 284[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when name is 1 character [33m 532[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept name with exactly 2 characters [33m 705[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when name is 101 characters [33m 2329[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept name with exactly 100 characters [33m 3267[2mms[22m[39m
       [33m[2m‚úì[22m[39m should filter timezones when user types "war" [33m 2166[2mms[22m[39m
[31m       [31m√ó[31m should show all timezones when search is empty[39m[33m 7414[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show "No timezone found" when search has no matches [33m 2063[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show all 4 supported languages when dropdown opened [33m 380[2mms[22m[39m
       [33m[2m‚úì[22m[39m should only show 4 language options (MVP limitation) [33m 365[2mms[22m[39m
       [33m[2m‚úì[22m[39m should select language when option clicked [33m 563[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show all 4 supported currencies when dropdown opened [33m 575[2mms[22m[39m
       [33m[2m‚úì[22m[39m should only show 4 currency options (MVP limitation) [33m 397[2mms[22m[39m
       [33m[2m‚úì[22m[39m should select currency when option clicked [33m 670[2mms[22m[39m
       [33m[2m‚úì[22m[39m should default to EUR when no initialData provided [33m 386[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onComplete with valid data when Next clicked [33m 1734[2mms[22m[39m
       [33m[2m‚úì[22m[39m should submit all form fields correctly [33m 2500[2mms[22m[39m
[31m       [31m√ó[31m should clear validation errors when user starts typing[39m[33m 1497[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable submit button while submitting [33m 1740[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading state during submission [33m 1642[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have proper ARIA labels for all form fields [33m 314[2mms[22m[39m
       [33m[2m‚úì[22m[39m should associate error messages with input fields [33m 704[2mms[22m[39m
       [33m[2m‚úì[22m[39m should support keyboard navigation [33m 930[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle special characters in organization name [33m 1672[2mms[22m[39m
       [33m[2m‚úì[22m[39m should trim whitespace from organization name [33m 1558[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle rapid form submissions [33m 1937[2mms[22m[39m
[90mstdout[2m | components/scanner/__tests__/ScannerReceiveWizard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/components/production/outputs/OutputHistoryTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [31m‚ùØ[39m components/warehouse/license-plates/__tests__/MergeLPModal.test.tsx [2m([22m[2m42 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[33m 14666[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open is true [33m 1287[2mms[22m[39m
       [32m‚úì[39m should not render when open is false[32m 33[2mms[22m[39m
[31m       [31m√ó[31m should display selected LPs in table[39m[33m 384[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show Validate button [33m 333[2mms[22m[39m
[31m       [31m√ó[31m should close modal when X button clicked[39m[33m 439[2mms[22m[39m
       [32m‚úì[39m should show loading spinner during validation[32m 76[2mms[22m[39m
[31m       [31m√ó[31m should show green checkmark when validation passes[39m[32m 43[2mms[22m[39m
[31m       [31m√ó[31m should show red X when validation fails[39m[32m 30[2mms[22m[39m
       [32m‚úì[39m should display all validation errors[32m 15[2mms[22m[39m
       [32m‚úì[39m should display product name[32m 80[2mms[22m[39m
       [32m‚úì[39m should display total quantity with UoM[32m 43[2mms[22m[39m
       [32m‚úì[39m should display batch number[32m 33[2mms[22m[39m
       [32m‚úì[39m should display expiry date[32m 56[2mms[22m[39m
       [32m‚úì[39m should display QA status[32m 27[2mms[22m[39m
       [32m‚úì[39m should display LP count[32m 46[2mms[22m[39m
       [32m‚úì[39m should show N/A for null batch number[32m 50[2mms[22m[39m
       [32m‚úì[39m should display all selected LPs[32m 31[2mms[22m[39m
       [32m‚úì[39m should show LP number column[32m 19[2mms[22m[39m
       [32m‚úì[39m should show product column[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should show quantity column[39m[32m 45[2mms[22m[39m
       [32m‚úì[39m should show batch column[32m 16[2mms[22m[39m
       [32m‚úì[39m should show expiry column[32m 19[2mms[22m[39m
       [32m‚úì[39m should render location dropdown[32m 173[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display all locations in dropdown [33m 996[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onLocationChange when location selected [33m 924[2mms[22m[39m
       [32m‚úì[39m should show selected location[32m 76[2mms[22m[39m
[31m       [31m√ó[31m should show default option when no location selected[39m[32m 90[2mms[22m[39m
[31m       [31m√ó[31m should render confirmation dialog[39m[33m 954[2mms[22m[39m
       [32m‚úì[39m should display LP count in confirmation message[32m 179[2mms[22m[39m
       [32m‚úì[39m should show warning about irreversible action[32m 150[2mms[22m[39m
       [32m‚úì[39m should have Cancel button[32m 196[2mms[22m[39m
       [32m‚úì[39m should have Confirm Merge button[32m 224[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onCancel when Cancel clicked [33m 333[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onConfirm when Confirm Merge clicked [33m 303[2mms[22m[39m
[31m       [31m√ó[31m should show success toast after merge[39m[33m 1766[2mms[22m[39m
[31m       [31m√ó[31m should close modal after successful merge[39m[33m 1161[2mms[22m[39m
[31m       [31m√ó[31m should show error toast on merge failure[39m[33m 1246[2mms[22m[39m
       [32m‚úì[39m should keep modal open on error[32m 211[2mms[22m[39m
[31m       [31m√ó[31m should show specific error message for conflict[39m[33m 1234[2mms[22m[39m
[31m       [31m√ó[31m should disable Validate button during validation[39m[33m 649[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable Merge button during merge operation [33m 353[2mms[22m[39m
[31m       [31m√ó[31m should show loading indicator during merge[39m[32m 291[2mms[22m[39m
[90mstdout[2m | __tests__/integration/api/planning/purchase-orders.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | components/technical/bom/__tests__/BOMItemsTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [31m‚ùØ[39m components/settings/onboarding/__tests__/OrganizationProfileStep.TD-201.test.tsx [2m([22m[2m15 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 15827[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.1: should render Skip Step button with correct styling [33m 1105[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.2: should display Skip Step button with info icon [33m 390[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.3: should position Skip Step button to the left of Next button [33m 488[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.4: should bypass validation when Skip Step clicked with empty form [33m 878[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.5: should use default placeholder data when Skip Step clicked [33m 767[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.6: should merge partial data with defaults when Skip Step clicked [33m 1893[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.7: should handle Skip Step click with validation errors present [33m 1446[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.8: should enable Skip Step button when form is pristine [33m 480[2mms[22m[39m
[31m       [31m√ó[31m TC-201.9: should keep Skip Step button enabled when form has validation errors[39m[33m 1692[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.10: should disable Skip Step button during form submission [33m 494[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.11: should have proper ARIA label for Skip Step button [33m 449[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.12: should support keyboard navigation to Skip Step button [33m 3041[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.13: should announce skip action to screen readers [33m 1003[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.14: should prevent double-click on Skip Step button [33m 857[2mms[22m[39m
       [33m[2m‚úì[22m[39m TC-201.15: should handle Skip Step when initialData already provided [33m 838[2mms[22m[39m
[90mstdout[2m | __tests__/api/quality/settings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/(authenticated)/settings/security/__tests__/page.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m __tests__/integration/api/planning/purchase-orders.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[33m 4802[2mms[22m[39m
[31m       [31m√ó[31m Should create draft PO with all fields[39m[32m 132[2mms[22m[39m
[31m       [31m√ó[31m AC-02-2: Should generate unique PO number per org/year[39m[32m 288[2mms[22m[39m
       [32m‚úì[39m Should retrieve POs with pagination metadata[32m 91[2mms[22m[39m
       [32m‚úì[39m AC-01-4: Should support pagination with page and limit[32m 88[2mms[22m[39m
       [32m‚úì[39m AC-01-2: Should filter by status[32m 167[2mms[22m[39m
[31m       [31m√ó[31m AC-01-2: Should filter by supplier_id[39m[32m 90[2mms[22m[39m
[31m       [31m√ó[31m Should add line to draft PO[39m[32m 192[2mms[22m[39m
[31m       [31m√ó[31m AC-03-6: Should prevent duplicate product in PO[39m[33m 341[2mms[22m[39m
[31m       [31m√ó[31m Should calculate line total correctly[39m[32m 170[2mms[22m[39m
[31m       [31m√ó[31m AC-05-2: Should submit draft PO with lines[39m[33m 312[2mms[22m[39m
[31m       [31m√ó[31m AC-05-3: Should not submit PO without lines[39m[33m 405[2mms[22m[39m
[31m       [31m√ó[31m AC-05-5: Should cancel draft PO[39m[32m 238[2mms[22m[39m
[31m       [31m√ó[31m AC-05-6: Should not cancel PO with receipts[39m[33m 357[2mms[22m[39m
       [32m‚úì[39m Should only return POs for current org[32m 103[2mms[22m[39m
[31m       [31m√ó[31m Should allow planner to create PO[39m[32m 96[2mms[22m[39m
[31m       [31m√ó[31m Should create PO with lines atomically[39m[32m 171[2mms[22m[39m
[31m       [31m√ó[31m Should calculate subtotal from line totals[39m[32m 276[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/quality/settings.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m20 failed[39m[2m)[22m[33m 5083[2mms[22m[39m
[31m         [31m√ó[31m should return default values for org without settings record[39m[33m 308[2mms[22m[39m
[31m         [31m√ó[31m should return existing settings for org with settings record[39m[32m 196[2mms[22m[39m
[31m         [31m√ó[31m should return all expected fields[39m[32m 109[2mms[22m[39m
[31m         [31m√ó[31m should only return settings for users own org[39m[33m 318[2mms[22m[39m
[31m         [31m√ó[31m should update inspection settings[39m[33m 396[2mms[22m[39m
[31m         [31m√ó[31m should update NCR settings[39m[32m 240[2mms[22m[39m
[31m         [31m√ó[31m should update CAPA settings[39m[32m 182[2mms[22m[39m
[31m         [31m√ó[31m should update HACCP settings[39m[32m 165[2mms[22m[39m
[31m         [31m√ó[31m should update audit settings[39m[32m 184[2mms[22m[39m
[31m         [31m√ó[31m should update sampling level[39m[32m 171[2mms[22m[39m
[31m         [31m√ó[31m should reject ncr_critical_response_hours equal to 0[39m[32m 187[2mms[22m[39m
[31m         [31m√ó[31m should reject negative ncr_critical_response_hours[39m[32m 179[2mms[22m[39m
[31m         [31m√ó[31m should reject retention_years greater than 50[39m[32m 177[2mms[22m[39m
[31m         [31m√ó[31m should reject retention_years less than 1[39m[32m 202[2mms[22m[39m
[31m         [31m√ó[31m should reject ccp_deviation_escalation_minutes equal to 0[39m[33m 367[2mms[22m[39m
[31m         [31m√ó[31m should reject invalid sampling level[39m[32m 229[2mms[22m[39m
[31m       [31m√ó[31m should auto-create quality_settings on new org creation[39m[32m 194[2mms[22m[39m
[31m       [31m√ó[31m should not fail on duplicate org creation (ON CONFLICT DO NOTHING)[39m[32m 85[2mms[22m[39m
[31m       [31m√ó[31m should allow only one settings record per org[39m[32m 88[2mms[22m[39m
[31m       [31m√ó[31m should auto-update updated_at on update[39m[33m 429[2mms[22m[39m
[90mstdout[2m | __tests__/api/production/settings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | components/scanner/move/__tests__/ScannerMoveWizard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [31m‚ùØ[39m app/(authenticated)/settings/security/__tests__/page.test.tsx [2m([22m[2m10 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 6730[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders the security page with header [33m 775[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders active sessions section [33m 352[2mms[22m[39m
[31m     [31m√ó[31m renders change password section[39m[33m 1234[2mms[22m[39m
     [32m‚úì[39m renders security tips section[32m 296[2mms[22m[39m
     [32m‚úì[39m shows loading state initially[32m 172[2mms[22m[39m
[31m     [31m√ó[31m shows sessions list after loading[39m[33m 1119[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows empty state when no sessions [33m 311[2mms[22m[39m
     [32m‚úì[39m shows error state when API fails[32m 267[2mms[22m[39m
[31m     [31m√ó[31m renders password form fields[39m[33m 1102[2mms[22m[39m
[31m     [31m√ó[31m shows password requirements[39m[33m 1091[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/production/settings.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[33m 4540[2mms[22m[39m
[31m       [31m√ó[31m should return 200 OK with settings for existing org[39m[33m 404[2mms[22m[39m
[31m       [31m√ó[31m should return all 15 settings fields[39m[32m 105[2mms[22m[39m
[31m       [31m√ó[31m should only return settings for authenticated user org (RLS)[39m[32m 185[2mms[22m[39m
[31m       [31m√ó[31m should upsert default settings for new org[39m[32m 263[2mms[22m[39m
[31m       [31m√ó[31m should update single field successfully[39m[32m 256[2mms[22m[39m
[31m       [31m√ó[31m should update multiple fields at once (AC-9)[39m[32m 186[2mms[22m[39m
[31m       [31m√ó[31m should return full settings object after update[39m[32m 88[2mms[22m[39m
[31m       [31m√ó[31m should update updated_at timestamp[39m[33m 384[2mms[22m[39m
[31m       [31m√ó[31m should reject dashboard_refresh_seconds below 5 (AC-15)[39m[32m 81[2mms[22m[39m
[31m       [31m√ó[31m should reject dashboard_refresh_seconds above 300[39m[32m 99[2mms[22m[39m
[31m       [31m√ó[31m should reject target_oee_percent above 100 (AC-16)[39m[32m 125[2mms[22m[39m
[31m       [31m√ó[31m should reject negative target_oee_percent[39m[32m 99[2mms[22m[39m
       [32m‚úì[39m should accept valid dashboard_refresh_seconds (15)[32m 88[2mms[22m[39m
       [32m‚úì[39m should accept valid target_oee_percent (85)[32m 80[2mms[22m[39m
[31m       [31m√ó[31m should return only settings for queried org[39m[33m 318[2mms[22m[39m
       [32m‚úì[39m should not allow updating another org settings[32m 90[2mms[22m[39m
[31m       [31m√ó[31m should enforce UNIQUE constraint on org_id[39m[32m 205[2mms[22m[39m
       [32m‚úì[39m should accept boundary value for dashboard_refresh_seconds (5)[32m 83[2mms[22m[39m
       [32m‚úì[39m should accept boundary value for dashboard_refresh_seconds (300)[32m 81[2mms[22m[39m
       [32m‚úì[39m should accept boundary value for target_oee_percent (0)[32m 99[2mms[22m[39m
       [32m‚úì[39m should accept boundary value for target_oee_percent (100)[32m 114[2mms[22m[39m
       [32m‚úì[39m should accept decimal target_oee_percent (85.50)[32m 95[2mms[22m[39m
[90mstdout[2m | __tests__/integration/database/po-rls.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/integration/database/po-rls.test.ts
[22m[39m[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | __tests__/api/settings/wizard.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m components/technical/bom/__tests__/BOMItemsTable.test.tsx [2m([22m[2m40 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 14215[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render items table with all rows [33m 402[2mms[22m[39m
       [32m‚úì[39m should display all 6 columns[32m 187[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display items in sequence order [33m 1344[2mms[22m[39m
       [32m‚úì[39m should display product code and name[32m 183[2mms[22m[39m
       [32m‚úì[39m should display type badge[32m 145[2mms[22m[39m
       [32m‚úì[39m should display quantity with decimals[32m 92[2mms[22m[39m
       [32m‚úì[39m should display UoM[32m 163[2mms[22m[39m
       [32m‚úì[39m should display operation name if assigned[32m 133[2mms[22m[39m
       [32m‚úì[39m should display dash when no operation assigned[32m 70[2mms[22m[39m
       [32m‚úì[39m should display scrap percentage when > 0[32m 130[2mms[22m[39m
       [32m‚úì[39m should hide scrap percentage when 0[32m 51[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display actions button when canEdit=true [33m 494[2mms[22m[39m
       [32m‚úì[39m should hide actions when canEdit=false[32m 69[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onEdit when Edit clicked [33m 2424[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onDelete when Delete clicked [33m 1683[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show dropdown menu for actions [33m 1016[2mms[22m[39m
       [32m‚úì[39m should display total items count[32m 86[2mms[22m[39m
       [32m‚úì[39m should display total input[32m 111[2mms[22m[39m
       [32m‚úì[39m should display expected output[32m 111[2mms[22m[39m
       [32m‚úì[39m should render loading skeleton state[32m 123[2mms[22m[39m
       [32m‚úì[39m should render empty state with CTA button[32m 103[2mms[22m[39m
       [32m‚úì[39m should render error state with retry button[32m 105[2mms[22m[39m
       [32m‚úì[39m should call onRetry when retry button clicked[32m 157[2mms[22m[39m
       [32m‚úì[39m should render success state with table[32m 165[2mms[22m[39m
[31m       [31m√ó[31m should render 100 items quickly[39m[33m 2441[2mms[22m[39m
       [32m‚úì[39m should have proper table ARIA label[32m 209[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have labeled headers [33m 397[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have action button labels [33m 401[2mms[22m[39m
       [32m‚úì[39m should display RM badge[32m 80[2mms[22m[39m
       [32m‚úì[39m should display ING badge[32m 74[2mms[22m[39m
       [32m‚úì[39m should display PKG badge[32m 56[2mms[22m[39m
       [32m‚úì[39m should display WIP badge[32m 58[2mms[22m[39m
       [32m‚úì[39m should handle items with null operation_seq[32m 48[2mms[22m[39m
       [32m‚úì[39m should handle items with null notes[32m 169[2mms[22m[39m
       [32m‚úì[39m should handle large quantities with decimals[32m 47[2mms[22m[39m
       [32m‚úì[39m should format scrap percent correctly[32m 56[2mms[22m[39m
       [32m‚úì[39m should show Add Item button when canEdit=true[32m 239[2mms[22m[39m
       [32m‚úì[39m should hide Add Item button when canEdit=false[32m 42[2mms[22m[39m
       [32m‚úì[39m should call onAdd when Add Item button clicked[32m 263[2mms[22m[39m
       [32m‚úì[39m should show Add First Component in empty state[32m 74[2mms[22m[39m
[90mstdout[2m | __tests__/api/settings/tax-codes.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/api/settings/wizard.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[33m 3968[2mms[22m[39m
[31m       [31m√ó[31m should save wizard progress with step and data[39m[33m 414[2mms[22m[39m
[31m       [31m√ó[31m should update wizard progress for next step[39m[32m 259[2mms[22m[39m
[31m       [31m√ó[31m should allow null wizard_progress (reset)[39m[32m 208[2mms[22m[39m
[31m       [31m√ó[31m should retrieve saved wizard progress[39m[32m 245[2mms[22m[39m
[31m       [31m√ó[31m should handle missing wizard_progress (new wizard)[39m[32m 226[2mms[22m[39m
[31m       [31m√ó[31m should mark wizard as completed[39m[32m 97[2mms[22m[39m
[31m       [31m√ó[31m should allow resetting wizard_completed to false[39m[32m 87[2mms[22m[39m
[31m       [31m√ó[31m should support nested JSONB objects[39m[32m 185[2mms[22m[39m
[31m       [31m√ó[31m should support JSONB array operations[39m[32m 215[2mms[22m[39m
[31m       [31m√ó[31m should persist data as user progresses through wizard[39m[33m 404[2mms[22m[39m
[31m       [31m√ó[31m should complete full wizard workflow[39m[33m 795[2mms[22m[39m
[31m       [31m√ó[31m should efficiently query by wizard_completed status[39m[32m 118[2mms[22m[39m
[31m       [31m√ó[31m should have wizard_completed = false by default[39m[32m 186[2mms[22m[39m
 [31m‚ùØ[39m components/scanner/__tests__/ScannerReceiveWizard.test.tsx [2m([22m[2m61 tests[22m[2m | [22m[31m19 failed[39m[2m)[22m[33m 19770[2mms[22m[39m
[31m       [31m√ó[31m should render with Step 1 by default[39m[32m 131[2mms[22m[39m
[31m       [31m√ó[31m should show step progress indicator[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should show header with title[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should show back button[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should navigate steps correctly[39m[32m 12[2mms[22m[39m
       [32m‚úì[39m should display pending PO list[32m 170[2mms[22m[39m
[31m       [31m√ó[31m should show "Scan PO Barcode" button[39m[33m 887[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onPOSelected when PO tapped [33m 313[2mms[22m[39m
       [32m‚úì[39m should show empty state when no pending POs[32m 15[2mms[22m[39m
       [32m‚úì[39m should show loading state[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should have touch targets >= 48dp[39m[32m 148[2mms[22m[39m
       [32m‚úì[39m should display PO header info[32m 43[2mms[22m[39m
[31m       [31m√ó[31m should display line items with remaining qty[39m[32m 43[2mms[22m[39m
       [32m‚úì[39m should grey out fully received lines[32m 33[2mms[22m[39m
[31m       [31m√ó[31m should show "Receive All Remaining" button[39m[33m 1234[2mms[22m[39m
       [32m‚úì[39m should call onLineSelected when line tapped[32m 164[2mms[22m[39m
       [32m‚úì[39m should display product info[32m 96[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show number pad [33m 936[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show quick adjust buttons [33m 977[2mms[22m[39m
       [32m‚úì[39m should show batch number field when required[32m 134[2mms[22m[39m
       [32m‚úì[39m should show expiry date field when required[32m 69[2mms[22m[39m
[31m       [31m√ó[31m should default quantity to remaining[39m[32m 65[2mms[22m[39m
[31m       [31m√ó[31m should show over-receipt warning when qty exceeds remaining[39m[32m 100[2mms[22m[39m
       [32m‚úì[39m should display summary of all fields[32m 111[2mms[22m[39m
[31m       [31m√ó[31m should show edit buttons for each section[39m[33m 3265[2mms[22m[39m
       [32m‚úì[39m should show large Confirm button[32m 226[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onConfirm when confirm clicked [33m 317[2mms[22m[39m
[31m       [31m√ó[31m should call onEdit with step when edit clicked[39m[33m 2472[2mms[22m[39m
       [32m‚úì[39m should display GRN number[32m 57[2mms[22m[39m
       [32m‚úì[39m should display LP number[32m 36[2mms[22m[39m
       [32m‚úì[39m should show success animation[32m 35[2mms[22m[39m
       [32m‚úì[39m should show "Receive More Items" button[32m 176[2mms[22m[39m
       [32m‚úì[39m should show "New PO" button[32m 182[2mms[22m[39m
[31m       [31m√ó[31m should show "Reprint Label" button[39m[33m 1926[2mms[22m[39m
       [32m‚úì[39m should show "Done" button[32m 209[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render digits 0-9 [33m 1652[2mms[22m[39m
       [32m‚úì[39m should render decimal point button[32m 196[2mms[22m[39m
       [32m‚úì[39m should render backspace button[32m 279[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render clear button [33m 310[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange when digit pressed [33m 425[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange with cleared value [33m 423[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render quick adjust buttons [33m 917[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onQuickAdjust with delta [33m 396[2mms[22m[39m
[31m       [31m√ó[31m should have keys >= 48dp[39m[33m 384[2mms[22m[39m
       [32m‚úì[39m should have playSuccess method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have playError method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have playConfirm method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have playAlert method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have setEnabled method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have success method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have error method[32m 0[2mms[22m[39m
       [32m‚úì[39m should have confirm method[32m 0[2mms[22m[39m
       [32m‚úì[39m should render when show is true[32m 14[2mms[22m[39m
       [32m‚úì[39m should not render when show is false[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should have minimum size of 64x64[39m[32m 22[2mms[22m[39m
       [32m‚úì[39m should render when show is true[32m 27[2mms[22m[39m
       [32m‚úì[39m should display error message[32m 32[2mms[22m[39m
       [32m‚úì[39m should not render when show is false[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should have all buttons >= 48dp height[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should show loading overlay during API call[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should show error state with retry option[39m[32m 16[2mms[22m[39m
 [31m‚ùØ[39m __tests__/components/production/outputs/OutputHistoryTable.test.tsx [2m([22m[2m33 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[33m 19448[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display all output rows [33m 1132[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: displays all 5 outputs within 1 second [33m 1188[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have LP Number column [33m 369[2mms[22m[39m
[31m       [31m√ó[31m should have Qty column[39m[33m 574[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Batch column [33m 400[2mms[22m[39m
[31m       [31m√ó[31m should have QA Status column[39m[33m 481[2mms[22m[39m
[31m       [31m√ó[31m should have Location column[39m[33m 522[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Expiry column [33m 442[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Created At column [33m 408[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Actions column [33m 488[2mms[22m[39m
[31m       [31m√ó[31m should have QA Status filter dropdown[39m[33m 346[2mms[22m[39m
[31m       [31m√ó[31m should filter by Approved status[39m[33m 371[2mms[22m[39m
[31m       [31m√ó[31m should filter by Pending status[39m[33m 555[2mms[22m[39m
[31m       [31m√ó[31m should have Location filter dropdown[39m[33m 412[2mms[22m[39m
[31m       [31m√ó[31m should filter by Location[39m[33m 366[2mms[22m[39m
       [33m[2m‚úì[22m[39m should sort by LP Number when header clicked [33m 902[2mms[22m[39m
[31m       [31m√ó[31m should sort by Qty when header clicked[39m[32m 298[2mms[22m[39m
[31m       [31m√ó[31m should toggle sort direction on second click[39m[32m 298[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Register Output button [33m 857[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRegisterOutput when clicked [33m 781[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Export CSV button [33m 811[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onExportCSV when clicked [33m 1025[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have View LP action on each row [33m 1074[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onViewLP with LP ID when View clicked [33m 1084[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Print Label action on each row [33m 849[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onPrintLabel with LP ID when Label clicked [33m 1102[2mms[22m[39m
[31m       [31m√ó[31m should display total outputs count[39m[33m 468[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display total quantity [33m 445[2mms[22m[39m
[31m       [31m√ó[31m should display approved count and qty[39m[33m 410[2mms[22m[39m
[31m       [31m√ó[31m should display pending count and qty[39m[33m 419[2mms[22m[39m
[31m       [31m√ó[31m should display rejected count and qty[39m[33m 336[2mms[22m[39m
       [32m‚úì[39m should show empty state when no outputs[32m 27[2mms[22m[39m
       [32m‚úì[39m should show "Register First Output" button in empty state[32m 195[2mms[22m[39m
 [32m‚úì[39m __tests__/integration/database/po-rls.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 5560[2mms[22m[39m
       [33m[2m‚úì[22m[39m Should allow user to read own org POs [33m 491[2mms[22m[39m
       [33m[2m‚úì[22m[39m Should not return POs from other orgs [33m 304[2mms[22m[39m
       [33m[2m‚úì[22m[39m Should only return lines from own org POs [33m 302[2mms[22m[39m
       [33m[2m‚úì[22m[39m Should allow deleting line with zero received_qty when PO is draft [33m 543[2mms[22m[39m
       [33m[2m‚úì[22m[39m Line DELETE RLS policy correctly blocks when received_qty > 0 [33m 345[2mms[22m[39m
       [33m[2m‚úì[22m[39m Should allow reading status history for own org PO [33m 439[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/settings/tax-codes.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[33m 3173[2mms[22m[39m
[31m       [31m√ó[31m should seed tax codes for Poland (4 codes)[39m[32m 164[2mms[22m[39m
[31m       [31m√ó[31m should be idempotent (no duplicates on re-run)[39m[32m 109[2mms[22m[39m
[31m       [31m√ó[31m should create a custom tax code[39m[32m 144[2mms[22m[39m
[31m       [31m√ó[31m should enforce unique code per org[39m[32m 99[2mms[22m[39m
[31m       [31m√ó[31m should enforce code format (uppercase alphanumeric + hyphens)[39m[32m 125[2mms[22m[39m
[31m       [31m√ó[31m should enforce rate >= 0[39m[32m 95[2mms[22m[39m
[31m       [31m√ó[31m should enforce rate <= 100[39m[32m 87[2mms[22m[39m
[31m       [31m√ó[31m should list all tax codes for organization[39m[32m 140[2mms[22m[39m
[31m       [31m√ó[31m should filter by search (code or description)[39m[32m 229[2mms[22m[39m
[31m       [31m√ó[31m should sort by rate descending[39m[32m 125[2mms[22m[39m
[31m       [31m√ó[31m should update tax code description[39m[32m 153[2mms[22m[39m
[31m       [31m√ó[31m should update tax code rate[39m[32m 124[2mms[22m[39m
[31m       [31m√ó[31m should delete unused tax code[39m[32m 92[2mms[22m[39m
       [33m[2m‚úì[22m[39m should only see tax codes from own organization [33m 483[2mms[22m[39m
[31m       [31m√ó[31m should seed different codes for UK[39m[32m 203[2mms[22m[39m
[90mstdout[2m | __tests__/api/settings/machines.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | __tests__/api/settings/planning.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/planning/purchase-orders-approval.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | __tests__/01-settings/01.6.use-permissions-hook.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m components/scanner/move/__tests__/ScannerMoveWizard.test.tsx [2m([22m[2m78 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 12669[2mms[22m[39m
       [32m‚úì[39m should render with Step 1 by default[32m 271[2mms[22m[39m
       [32m‚úì[39m should show step progress indicator[32m 127[2mms[22m[39m
       [32m‚úì[39m should show header with Move LP title[32m 61[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show back button [33m 916[2mms[22m[39m
       [32m‚úì[39m should manage step navigation[32m 143[2mms[22m[39m
       [32m‚úì[39m should preserve LP data when navigating between steps[32m 49[2mms[22m[39m
       [32m‚úì[39m should display scan LP prompt[32m 46[2mms[22m[39m
       [32m‚úì[39m should show large scan button (80x80dp minimum)[32m 228[2mms[22m[39m
       [32m‚úì[39m should show manual entry link[32m 25[2mms[22m[39m
       [32m‚úì[39m should show recent moves list (optional)[32m 48[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onLPScanned with LP data when valid LP scanned [33m 926[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onError when LP not found [33m 779[2mms[22m[39m
       [32m‚úì[39m should call onError when LP status is not available[32m 52[2mms[22m[39m
       [32m‚úì[39m should display LP details after successful scan[32m 89[2mms[22m[39m
       [32m‚úì[39m should show status badge for available LP[32m 42[2mms[22m[39m
[31m       [31m√ó[31m should show current location[39m[32m 82[2mms[22m[39m
       [32m‚úì[39m should show batch number if present[32m 57[2mms[22m[39m
       [32m‚úì[39m should show expiry date if present[32m 32[2mms[22m[39m
       [32m‚úì[39m should display error message for LP not found[32m 33[2mms[22m[39m
       [32m‚úì[39m should display error message for consumed LP[32m 24[2mms[22m[39m
       [32m‚úì[39m should display error message for reserved LP[32m 38[2mms[22m[39m
       [32m‚úì[39m should allow retry after error[32m 237[2mms[22m[39m
       [32m‚úì[39m should display LP summary card at top[32m 40[2mms[22m[39m
       [32m‚úì[39m should show scan destination prompt[32m 33[2mms[22m[39m
[31m       [31m√ó[31m should show current location with From label[39m[32m 39[2mms[22m[39m
       [32m‚úì[39m should show manual selection link[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should call onLocationScanned when valid location scanned[39m[33m 1280[2mms[22m[39m
       [32m‚úì[39m should call onError when location not found[32m 67[2mms[22m[39m
       [32m‚úì[39m should show warning when scanning same location as source[32m 74[2mms[22m[39m
       [32m‚úì[39m should display destination details after successful scan[32m 57[2mms[22m[39m
       [32m‚úì[39m should show zone and full path[32m 36[2mms[22m[39m
       [32m‚úì[39m should show capacity percentage if available[32m 29[2mms[22m[39m
       [32m‚úì[39m should show capacity warning when location at 100%[32m 54[2mms[22m[39m
       [32m‚úì[39m should still allow proceed despite capacity warning[32m 165[2mms[22m[39m
       [32m‚úì[39m should display LP info section[32m 101[2mms[22m[39m
[31m       [31m√ó[31m should display from location with full path[39m[32m 87[2mms[22m[39m
[31m       [31m√ó[31m should display to location with full path[39m[32m 126[2mms[22m[39m
       [32m‚úì[39m should show visual direction arrow[32m 91[2mms[22m[39m
       [32m‚úì[39m should have large Confirm Move button at bottom[32m 270[2mms[22m[39m
       [32m‚úì[39m should have Cancel link above confirm button[32m 46[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Edit button on LP section [33m 404[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Edit button on destination section [33m 346[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onConfirm when confirm clicked [33m 375[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onEditLP when Edit LP clicked [33m 395[2mms[22m[39m
       [32m‚úì[39m should call onCancel when Cancel clicked[32m 169[2mms[22m[39m
       [32m‚úì[39m should show loading indicator during submit[32m 129[2mms[22m[39m
[31m       [31m√ó[31m should disable confirm button during loading[39m[32m 264[2mms[22m[39m
       [32m‚úì[39m should display success animation[32m 243[2mms[22m[39m
       [32m‚úì[39m should display move number[32m 90[2mms[22m[39m
       [32m‚úì[39m should display LP number[32m 60[2mms[22m[39m
       [32m‚úì[39m should display new location[32m 99[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Move Another to Same Location button [33m 459[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have New Move button [33m 359[2mms[22m[39m
       [32m‚úì[39m should have Done button[32m 253[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onMoveAnother when Move Another clicked [33m 474[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onNewMove when New Move clicked [33m 305[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onDone when Done clicked [33m 302[2mms[22m[39m
     [32m‚úì[39m should display LP number prominently[32m 47[2mms[22m[39m
     [32m‚úì[39m should display product name[32m 29[2mms[22m[39m
     [32m‚úì[39m should display quantity with UOM[32m 23[2mms[22m[39m
     [32m‚úì[39m should display location[32m 25[2mms[22m[39m
     [32m‚úì[39m should support compact mode[32m 17[2mms[22m[39m
     [32m‚úì[39m should show status badge when showStatus is true[32m 15[2mms[22m[39m
     [32m‚úì[39m should show Edit button when onEdit provided[32m 156[2mms[22m[39m
     [32m‚úì[39m should display location code[32m 22[2mms[22m[39m
     [32m‚úì[39m should display full path[32m 45[2mms[22m[39m
[31m     [31m√ó[31m should display warehouse name[39m[32m 46[2mms[22m[39m
     [32m‚úì[39m should display capacity percentage if available[32m 34[2mms[22m[39m
     [32m‚úì[39m should show Edit button when onEdit provided[32m 107[2mms[22m[39m
     [32m‚úì[39m should render arrow element[32m 24[2mms[22m[39m
[31m     [31m√ó[31m should have minimum size of 24x24[39m[32m 44[2mms[22m[39m
[31m     [31m√ó[31m should have all buttons meeting minimum 48dp touch target[39m[32m 280[2mms[22m[39m
     [32m‚úì[39m should trigger success audio on valid LP scan[32m 0[2mms[22m[39m
     [32m‚úì[39m should trigger error audio on invalid scan[32m 0[2mms[22m[39m
     [32m‚úì[39m should trigger confirm audio on move complete[32m 0[2mms[22m[39m
     [32m‚úì[39m should show green checkmark on valid scan[32m 14[2mms[22m[39m
     [32m‚úì[39m should show red X on error[32m 28[2mms[22m[39m
     [32m‚úì[39m should show yellow warning for capacity[32m 35[2mms[22m[39m
[90mstdout[2m | __tests__/api/settings/modules.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/api/settings/machines.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[33m 3540[2mms[22m[39m
[31m       [31m√ó[31m should create a machine with valid data[39m[32m 112[2mms[22m[39m
[31m       [31m√ó[31m should reject duplicate code in same org[39m[32m 195[2mms[22m[39m
[31m       [31m√ó[31m should enforce code format (uppercase alphanumeric + hyphens)[39m[32m 113[2mms[22m[39m
[31m       [31m√ó[31m should accept valid status values[39m[32m 96[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid status values[39m[32m 95[2mms[22m[39m
[31m       [31m√ó[31m should allow creating machine_line_assignments[39m[32m 92[2mms[22m[39m
[31m       [31m√ó[31m should prevent duplicate assignments (unique constraint)[39m[32m 110[2mms[22m[39m
[31m       [31m√ó[31m should list all machines for org[39m[32m 209[2mms[22m[39m
[31m       [31m√ó[31m should filter machines by status[39m[32m 262[2mms[22m[39m
[31m       [31m√ó[31m should search machines by code[39m[32m 97[2mms[22m[39m
[31m       [31m√ó[31m should delete machine with CASCADE to assignments[39m[32m 90[2mms[22m[39m
[31m       [31m√ó[31m should update machine fields[39m[32m 82[2mms[22m[39m
       [33m[2m‚úì[22m[39m should isolate machines by org_id [33m 493[2mms[22m[39m
 [31m‚ùØ[39m __tests__/01-settings/01.6.use-permissions-hook.test.ts [2m([22m[2m24 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 2589[2mms[22m[39m
       [32m‚úì[39m should return true when owner checks any permission[32m 141[2mms[22m[39m
       [32m‚úì[39m should return false when viewer checks write permissions[32m 36[2mms[22m[39m
       [32m‚úì[39m should return true when viewer checks read permissions[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should handle production operator CRU permissions correctly[39m[32m 63[2mms[22m[39m
       [32m‚úì[39m should handle quality inspector CRU permissions[32m 18[2mms[22m[39m
       [32m‚úì[39m should handle admin CRU on settings (no Delete)[32m 17[2mms[22m[39m
       [32m‚úì[39m should return true if user has any permission in module[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return false if user has no access to module[39m[32m 12[2mms[22m[39m
       [32m‚úì[39m should return true for warehouse operator in warehouse module[32m 10[2mms[22m[39m
       [32m‚úì[39m should return true for viewer in all modules[32m 17[2mms[22m[39m
       [32m‚úì[39m should return false for production manager in production[32m 3[2mms[22m[39m
       [32m‚úì[39m should return false for production operator in production (has Update)[32m 3[2mms[22m[39m
       [32m‚úì[39m should return current user role[32m 20[2mms[22m[39m
       [32m‚úì[39m should return role display name[32m 3[2mms[22m[39m
       [32m‚úì[39m should cache permission lookups[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should invalidate cache when role changes[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should receive permission updates via websocket[39m[33m 1046[2mms[22m[39m
[31m       [31m√ó[31m should show notification when permissions change[39m[33m 1027[2mms[22m[39m
       [32m‚úì[39m should handle undefined user gracefully[32m 33[2mms[22m[39m
       [32m‚úì[39m should handle invalid role gracefully[32m 9[2mms[22m[39m
       [32m‚úì[39m should handle invalid module gracefully[32m 23[2mms[22m[39m
       [32m‚úì[39m should handle invalid action gracefully[32m 8[2mms[22m[39m
       [32m‚úì[39m should accept valid module names[32m 14[2mms[22m[39m
       [32m‚úì[39m should accept valid action types[32m 2[2mms[22m[39m
[90mstdout[2m | __tests__/integration/api/warehouse/asns.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/api/settings/planning.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m21 failed[39m[2m)[22m[33m 3672[2mms[22m[39m
[31m       [31m√ó[31m should return existing settings when record exists[39m[32m 157[2mms[22m[39m
[31m       [31m√ó[31m should return all PO approval fields[39m[32m 121[2mms[22m[39m
[31m       [31m√ó[31m should auto-create default settings on first access (404)[39m[32m 130[2mms[22m[39m
[31m       [31m√ó[31m should return created defaults matching AC-02 specification[39m[33m 398[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should return 500 on server error[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should include timestamps in response[39m[32m 256[2mms[22m[39m
[31m       [31m√ó[31m should enable PO approval toggle via PUT[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should disable PO approval toggle via PUT[39m[32m 93[2mms[22m[39m
[31m       [31m√ó[31m should update approval threshold[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept null threshold[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should update approval roles[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should update multiple fields at once[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for negative threshold[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for zero threshold[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for empty roles array[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid JSON[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated PUT request[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 for non-admin user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include success flag and message in response[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should update timestamp on save[39m[32m 111[2mms[22m[39m
[31m     [31m√ó[31m should only return current org settings on GET (not other orgs)[39m[32m 1[2mms[22m[39m
     [32m‚úì[39m should prevent cross-org settings modification via RLS[32m 139[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/planning/purchase-orders-approval.test.ts [2m([22m[2m29 tests[22m[2m | [22m[31m22 failed[39m[2m | [22m[33m7 skipped[39m[2m)[22m[33m 3003[2mms[22m[39m
     [2m[90m‚Üì[39m[22m should submit PO below threshold directly to submitted status
     [2m[90m‚Üì[39m[22m should submit PO above threshold to pending_approval status
     [2m[90m‚Üì[39m[22m should create approval history record on submission
     [2m[90m‚Üì[39m[22m should return 400 if PO not in draft status
     [2m[90m‚Üì[39m[22m should return 400 if PO has no lines
     [2m[90m‚Üì[39m[22m should return 404 if PO not found
     [2m[90m‚Üì[39m[22m should complete within 300ms (performance)
[31m     [31m√ó[31m should approve PO successfully with notes[39m[32m 159[2mms[22m[39m
[31m     [31m√ó[31m should approve PO without notes (optional)[39m[32m 102[2mms[22m[39m
[31m     [31m√ó[31m should create approval history record[39m[32m 101[2mms[22m[39m
[31m     [31m√ó[31m should return 403 if user lacks approval permission[39m[32m 100[2mms[22m[39m
[31m     [31m√ó[31m should return 400 if PO not in pending_approval status[39m[32m 131[2mms[22m[39m
[31m     [31m√ó[31m should return 400 if notes exceed 1000 characters[39m[32m 89[2mms[22m[39m
[31m     [31m√ó[31m should handle concurrent approval attempts[39m[32m 89[2mms[22m[39m
[31m     [31m√ó[31m should complete within 500ms (performance)[39m[32m 81[2mms[22m[39m
[31m     [31m√ó[31m should reject PO with reason[39m[32m 80[2mms[22m[39m
[31m     [31m√ó[31m should create approval history record with rejection[39m[32m 110[2mms[22m[39m
[31m     [31m√ó[31m should return 400 if rejection reason missing[39m[32m 119[2mms[22m[39m
[31m     [31m√ó[31m should return 400 if rejection reason less than 10 chars[39m[32m 100[2mms[22m[39m
[31m     [31m√ó[31m should return 400 if rejection reason exceeds 1000 chars[39m[32m 87[2mms[22m[39m
[31m     [31m√ó[31m should return 403 if user lacks approval permission[39m[32m 80[2mms[22m[39m
[31m     [31m√ó[31m should return 400 if PO not in pending_approval status[39m[32m 95[2mms[22m[39m
[31m     [31m√ó[31m should preserve rejection reason exactly as provided[39m[32m 88[2mms[22m[39m
[31m     [31m√ó[31m should return approval history sorted by timestamp desc[39m[32m 85[2mms[22m[39m
[31m     [31m√ó[31m should return empty array if no history[39m[32m 149[2mms[22m[39m
[31m     [31m√ó[31m should support pagination[39m[32m 87[2mms[22m[39m
[31m     [31m√ó[31m should enforce org_id RLS isolation[39m[32m 94[2mms[22m[39m
[31m     [31m√ó[31m should return 404 if PO not found[39m[32m 92[2mms[22m[39m
[31m     [31m√ó[31m should load within 200ms (performance)[39m[32m 83[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/settings/modules.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 2722[2mms[22m[39m
[31m       [31m√ó[31m should have 4 default modules enabled on org creation[39m[32m 154[2mms[22m[39m
[31m       [31m√ó[31m should return true for enabled module[39m[32m 144[2mms[22m[39m
[31m       [31m√ó[31m should return false for disabled module[39m[32m 155[2mms[22m[39m
[31m       [31m√ó[31m should enable a disabled module[39m[32m 212[2mms[22m[39m
[31m       [31m√ó[31m should disable an enabled module[39m[32m 213[2mms[22m[39m
[31m       [31m√ó[31m should prevent disabling all modules[39m[32m 102[2mms[22m[39m
[31m       [31m√ó[31m should allow enabling all 8 modules[39m[32m 227[2mms[22m[39m
[31m       [31m√ó[31m should allow disabling all optional modules (keep only defaults)[39m[32m 255[2mms[22m[39m
[31m       [31m√ó[31m should support adding module to array[39m[33m 355[2mms[22m[39m
[31m       [31m√ó[31m should support removing module from array[39m[33m 320[2mms[22m[39m
       [32m‚úì[39m should efficiently query modules_enabled with contains operator[32m 136[2mms[22m[39m
[90mstdout[2m | components/production/outputs/__tests__/OutputHistoryTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | components/production/outputs/__tests__/ByProductsSection.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/integration/api/warehouse/asns.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[33m 2457[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should return 403 when enable_asn is false
       [2m[90m‚Üì[39m[22m should allow access when enable_asn is true
       [2m[90m‚Üì[39m[22m should return paginated ASN list
       [2m[90m‚Üì[39m[22m should filter by status
       [2m[90m‚Üì[39m[22m should search by ASN number
       [2m[90m‚Üì[39m[22m should sort by expected_date
       [2m[90m‚Üì[39m[22m should create ASN with items
       [2m[90m‚Üì[39m[22m should return 400 when po_id is missing
       [2m[90m‚Üì[39m[22m should return 400 when items array is empty
       [2m[90m‚Üì[39m[22m should create ASN from PO with auto-populated items
       [2m[90m‚Üì[39m[22m should return 400 for fully received PO
       [2m[90m‚Üì[39m[22m should return ASN detail with items
       [2m[90m‚Üì[39m[22m should return 404 for non-existent ASN
       [2m[90m‚Üì[39m[22m should return 404 for cross-tenant access
       [2m[90m‚Üì[39m[22m should update ASN header when status is pending
       [2m[90m‚Üì[39m[22m should return 400 when status is not pending
       [2m[90m‚Üì[39m[22m should delete ASN when status is pending and no receipts
       [2m[90m‚Üì[39m[22m should return 400 when ASN has received items
       [2m[90m‚Üì[39m[22m should cancel ASN when status is pending
       [2m[90m‚Üì[39m[22m should return 400 when status is not pending
       [2m[90m‚Üì[39m[22m should return only ASNs expected today with pending or partial status
[90mstdout[2m | __tests__/api/settings/invitations.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/planning/transfer-orders.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/planning/work-orders/schedule.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/hooks/__tests__/use-permissions.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [31m‚ùØ[39m __tests__/api/settings/invitations.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 1758[2mms[22m[39m
[31m       [31m√ó[31m should create invitation with token and 7-day expiry[39m[32m 140[2mms[22m[39m
[31m       [31m√ó[31m should reject expired token (expires_at in past)[39m[32m 102[2mms[22m[39m
[31m       [31m√ó[31m should have all required fields in invitation record[39m[32m 76[2mms[22m[39m
[31m       [31m√ó[31m should invalidate old token when resending[39m[32m 100[2mms[22m[39m
[31m       [31m√ó[31m should activate user via database trigger after signup[39m[32m 94[2mms[22m[39m
[31m       [31m√ó[31m should support all status transitions[39m[32m 130[2mms[22m[39m
[31m       [31m√ó[31m should delete expired invitations older than 30 days[39m[32m 186[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/planning/transfer-orders.test.ts [2m([22m[2m26 tests[22m[2m | [22m[33m26 skipped[39m[2m)[22m[33m 1415[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should fail when TO has no lines
       [2m[90m‚Üì[39m[22m should succeed when TO has at least 1 line
       [2m[90m‚Üì[39m[22m should allow cancellation at any status
       [2m[90m‚Üì[39m[22m should create a TO line with valid data
       [2m[90m‚Üì[39m[22m should enforce quantity > 0
       [2m[90m‚Üì[39m[22m should enforce quantity not null
       [2m[90m‚Üì[39m[22m should update TO line quantity
       [2m[90m‚Üì[39m[22m should update TO line notes
       [2m[90m‚Üì[39m[22m should delete TO line when TO is in draft
       [2m[90m‚Üì[39m[22m should calculate summary correctly
       [2m[90m‚Üì[39m[22m should only see transfer orders from own organization
       [2m[90m‚Üì[39m[22m should allow warehouse role to manage TOs
       [2m[90m‚Üì[39m[22m should allow purchasing role to manage TOs
       [2m[90m‚Üì[39m[22m should allow admin role to manage TOs
       [2m[90m‚Üì[39m[22m should enforce from_warehouse != to_warehouse
       [2m[90m‚Üì[39m[22m should enforce planned_receive_date >= planned_ship_date
       [2m[90m‚Üì[39m[22m should allow same-day ship and receive dates
       [2m[90m‚Üì[39m[22m AC-3.6.1: List transfer orders with filters
       [2m[90m‚Üì[39m[22m AC-3.6.2: Create transfer order
       [2m[90m‚Üì[39m[22m AC-3.6.3: Get transfer order details with joins
       [2m[90m‚Üì[39m[22m AC-3.6.4: Update transfer order
       [2m[90m‚Üì[39m[22m AC-3.6.5: Delete transfer order
       [2m[90m‚Üì[39m[22m AC-3.8.1: Ship full transfer order quantity
       [2m[90m‚Üì[39m[22m AC-3.8.2: Ship partial transfer order quantity
       [2m[90m‚Üì[39m[22m AC-3.8.3: Status transitions (draft ‚Üí planned ‚Üí shipped ‚Üí received)
       [2m[90m‚Üì[39m[22m AC-3.9.1-3.9.2: Track audit fields (created_by, updated_by, timestamps)
 [31m‚ùØ[39m __tests__/api/planning/work-orders/schedule.test.ts [2m([22m[2m16 tests[22m[2m | [22m[33m16 skipped[39m[2m)[22m[33m 1478[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should schedule draft WO with valid times and return 200
       [2m[90m‚Üì[39m[22m should include product relation in response
       [2m[90m‚Üì[39m[22m should return 400 when end time is before start time
       [2m[90m‚Üì[39m[22m should return 400 when trying to schedule completed WO
       [2m[90m‚Üì[39m[22m should return 400 when trying to schedule cancelled WO
       [2m[90m‚Üì[39m[22m should update production line and return line relation
       [2m[90m‚Üì[39m[22m should return 404 when production line does not exist
       [2m[90m‚Üì[39m[22m should clear machine assignment when machine_id is null
       [2m[90m‚Üì[39m[22m should return 404 when trying to schedule WO from different org
       [2m[90m‚Üì[39m[22m should return 403 when user lacks update permission
       [2m[90m‚Üì[39m[22m should return 401 when no auth token provided
       [2m[90m‚Üì[39m[22m should accept valid date range (end >= start)
       [2m[90m‚Üì[39m[22m should return 400 when end date is before start date
       [2m[90m‚Üì[39m[22m should return 404 for non-existent WO
       [2m[90m‚Üì[39m[22m should accept empty body (no changes)
       [2m[90m‚Üì[39m[22m should handle overnight times on multi-day WO
 [31m‚ùØ[39m lib/hooks/__tests__/use-permissions.test.tsx [2m([22m[2m20 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[33m 1190[2mms[22m[39m
[31m     [31m√ó[31m should return can() function that checks permissions correctly for admin[39m[32m 23[2mms[22m[39m
     [32m‚úì[39m should return can() function that denies create actions for viewer[32m 3[2mms[22m[39m
[31m     [31m√ó[31m should return true for viewer read permissions on all modules[39m[32m 3[2mms[22m[39m
[31m     [31m√ó[31m should return correct permissions for production_operator[39m[32m 5[2mms[22m[39m
[31m     [31m√ó[31m should return correct permissions for quality_inspector[39m[32m 4[2mms[22m[39m
     [32m‚úì[39m should return false when user is not loaded[32m 3[2mms[22m[39m
     [32m‚úì[39m should return false for invalid module[32m 2[2mms[22m[39m
     [32m‚úì[39m should return false for invalid action[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return true when quality_inspector has any access to quality module[39m[32m 19[2mms[22m[39m
     [32m‚úì[39m should return false when quality_inspector has no access to settings[32m 6[2mms[22m[39m
[31m     [31m√ó[31m should return true when production_operator has read-only access to warehouse[39m[32m 3[2mms[22m[39m
[31m     [31m√ó[31m should return true for viewer on any module (has read access)[39m[32m 3[2mms[22m[39m
     [32m‚úì[39m should return false when user has no access to module[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should return current user role code for planner[39m[32m 6[2mms[22m[39m
[31m     [31m√ó[31m should return owner role code[39m[32m 10[2mms[22m[39m
     [32m‚úì[39m should return null when user not loaded[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should update permissions when user role changes from viewer to admin[39m[32m 4[2mms[22m[39m
[31m     [31m√ó[31m should update permissions when user role changes from production_operator to production_manager[39m[33m 1065[2mms[22m[39m
[31m     [31m√ó[31m should return loading true while user is loading[39m[32m 14[2mms[22m[39m
     [32m‚úì[39m should return loading false when user loaded[32m 8[2mms[22m[39m
[90mstdout[2m | __tests__/api/planning/purchase-orders.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/v1/technical/routings/__tests__/operations.route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/technical/__tests__/version-warning-banner.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m components/production/outputs/__tests__/ByProductsSection.test.tsx [2m([22m[2m24 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 5770[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: displays all by-products from BOM [33m 466[2mms[22m[39m
       [32m‚úì[39m displays product codes[32m 64[2mms[22m[39m
       [32m‚úì[39m displays By-Products header[32m 47[2mms[22m[39m
[31m       [31m√ó[31m AC: displays expected qty with yield percent[39m[32m 82[2mms[22m[39m
[31m       [31m√ó[31m displays actual registered qty[39m[32m 65[2mms[22m[39m
[31m       [31m√ó[31m displays LP count[39m[32m 67[2mms[22m[39m
       [32m‚úì[39m displays progress bar[32m 43[2mms[22m[39m
       [32m‚úì[39m displays Registered badge for registered by-products[32m 40[2mms[22m[39m
       [32m‚úì[39m displays Not Registered badge for unregistered by-products[32m 54[2mms[22m[39m
       [32m‚úì[39m shows missing warning for unregistered by-products[32m 38[2mms[22m[39m
       [32m‚úì[39m AC: shows auto-create ON banner when enabled[32m 45[2mms[22m[39m
       [32m‚úì[39m does not show banner when auto-create disabled[32m 47[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays Register Now button for unregistered by-products [33m 1064[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onRegister when Register Now clicked [33m 479[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays View LPs button for registered by-products [33m 519[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onViewLPs when View LPs clicked [33m 440[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays Add More button for registered by-products [33m 619[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onRegister when Add More clicked [33m 645[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays Register All button when unregistered by-products exist [33m 383[2mms[22m[39m
       [32m‚úì[39m calls onRegisterAll when Register All clicked[32m 286[2mms[22m[39m
       [32m‚úì[39m displays loading state[32m 31[2mms[22m[39m
       [32m‚úì[39m has accessible loading label[32m 63[2mms[22m[39m
       [32m‚úì[39m displays message when no by-products[32m 55[2mms[22m[39m
       [32m‚úì[39m displays genealogy info[32m 123[2mms[22m[39m
[90mstdout[2m | __tests__/api/production/scanner-output.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/planning/purchase-orders.test.ts[2m > [22m[2mBatch 3A: Purchase Orders
[22m[39mCleaned up test data for org: undefined

 [31m‚ùØ[39m __tests__/api/planning/purchase-orders.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m13 skipped[39m[2m)[22m[33m 1432[2mms[22m[39m
       [2m[90m‚Üì[39m[22m AC-3.1.1: Create purchase order
       [2m[90m‚Üì[39m[22m AC-3.1.2: List purchase orders
       [2m[90m‚Üì[39m[22m AC-3.1.3: Get PO details
       [2m[90m‚Üì[39m[22m AC-3.1.4: Update PO
       [2m[90m‚Üì[39m[22m AC-3.1.5: Delete PO
       [2m[90m‚Üì[39m[22m AC-3.2.1: Add line to PO
       [2m[90m‚Üì[39m[22m AC-3.2.4: Calculate PO totals
       [2m[90m‚Üì[39m[22m AC-3.3.1: Request approval
       [2m[90m‚Üì[39m[22m AC-3.3.2: Approve PO
       [2m[90m‚Üì[39m[22m AC-3.3.3: Reject PO
       [2m[90m‚Üì[39m[22m AC-3.4.1: Auto-populate currency from supplier
       [2m[90m‚Üì[39m[22m AC-3.4.2: Auto-populate tax_code from supplier
       [2m[90m‚Üì[39m[22m AC-3.5: PO inherits currency and tax code from supplier
 [31m‚ùØ[39m components/technical/__tests__/version-warning-banner.test.tsx [2m([22m[2m16 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 2069[2mms[22m[39m
       [32m‚úì[39m should display version increment warning[32m 247[2mms[22m[39m
[31m       [31m√ó[31m should show current version number[39m[32m 65[2mms[22m[39m
       [32m‚úì[39m should show next version number[32m 29[2mms[22m[39m
       [32m‚úì[39m should display BOM/WO impact warning[32m 56[2mms[22m[39m
       [32m‚úì[39m should handle version 1 correctly (v1 -> v2)[32m 46[2mms[22m[39m
[31m       [31m√ó[31m should handle large version numbers[39m[32m 46[2mms[22m[39m
       [32m‚úì[39m should display "View History" link when onViewHistory provided[32m 31[2mms[22m[39m
       [32m‚úì[39m should call onViewHistory when link clicked[32m 67[2mms[22m[39m
       [32m‚úì[39m should not display link when onViewHistory not provided[32m 34[2mms[22m[39m
       [32m‚úì[39m should have warning/alert styling (yellow/amber background)[32m 106[2mms[22m[39m
[31m       [31m√ó[31m should have warning icon[39m[33m 1072[2mms[22m[39m
       [32m‚úì[39m should apply custom className[32m 30[2mms[22m[39m
       [32m‚úì[39m should have appropriate ARIA role[32m 170[2mms[22m[39m
       [32m‚úì[39m should be readable by screen readers[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should handle version 0 (edge case)[39m[32m 35[2mms[22m[39m
       [32m‚úì[39m should not render when currentVersion is negative[32m 7[2mms[22m[39m
 [31m‚ùØ[39m app/api/v1/technical/routings/__tests__/operations.route.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m44 failed[39m[2m)[22m[33m 2877[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with operations list[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should include summary stats in response[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return empty list when no operations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when routing not found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 when not authenticated[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should enforce RLS - Org A cannot see Org B operations (AC-32)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return operations with parallel indicator[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 201 when operation created[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow duplicate sequence for parallel operations (AC-04)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for validation error - name too short[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for validation error - duration < 1[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for negative setup_time (AC-10)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default setup_time and cleanup_time to 0 (AC-09)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should allow null machine_id (optional)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for instructions > 2000 chars (AC-17)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when routing not found[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should enforce RLS - cannot create in Org B routing (AC-32)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 403 when user lacks PRODUCTION_MANAGER role[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 200 when operation updated[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should update machine assignment[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when operation not found[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when routing not found[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 200 when operation deleted[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should delete attachments from storage (AC-29)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when operation not found[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 200 when operation moved up (AC-25)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 200 when operation moved down[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when invalid direction[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when cannot move first operation up[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when cannot move last operation down[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle parallel operations reorder correctly (AC-27)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 201 when attachment uploaded (AC-19)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when file too large (AC-20)[39m[33m 2730[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when invalid file type[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when max attachments reached (AC-21)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should accept PDF files[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should accept PNG files[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should accept JPG files[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should accept DOCX files[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return signed URL[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when attachment not found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 200 when attachment deleted[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should remove file from storage[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when attachment not found[39m[32m 2[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/production/scanner-output.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[33m 937[2mms[22m[39m
[31m       [31m√ó[31m should return WO data within 500ms[39m[33m 349[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated request[32m 23[2mms[22m[39m
       [32m‚úì[39m should return 404 for non-existent WO[32m 21[2mms[22m[39m
       [32m‚úì[39m should return 409 for completed WO[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return by_products array from BOM[39m[32m 9[2mms[22m[39m
       [32m‚úì[39m should return 400 for empty barcode[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create LP and return LP data[39m[32m 81[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for qty = 0[39m[32m 26[2mms[22m[39m
[31m       [31m√ó[31m should update WO output_qty[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create genealogy records[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should return by-products list with expected quantities[32m 111[2mms[22m[39m
       [32m‚úì[39m should return empty array when no by-products[32m 42[2mms[22m[39m
       [32m‚úì[39m should return 404 for non-existent WO[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create by-product LP[39m[32m 107[2mms[22m[39m
[31m       [31m√ó[31m should allow qty = 0 with zero_qty_confirmed[39m[32m 19[2mms[22m[39m
       [32m‚úì[39m should return 400 for qty = 0 without confirmation[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should send ZPL to printer within 2 seconds[39m[32m 92[2mms[22m[39m
       [32m‚úì[39m should return 404 when no printer configured[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 503 when printer offline[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 504 on print timeout[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should return printer status for location[32m 28[2mms[22m[39m
       [32m‚úì[39m should return configured=false when no printer[32m 2[2mms[22m[39m
       [32m‚úì[39m should only access own org WOs[32m 2[2mms[22m[39m
[90mstdout[2m | __tests__/api/planning/dashboard-routes.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/services/__tests__/inspection-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | __tests__/services/planning-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [31m‚ùØ[39m __tests__/api/planning/dashboard-routes.test.ts [2m([22m[2m34 tests[22m[2m | [22m[33m34 skipped[39m[2m)[22m[33m 812[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should return 200 with KPI data structure
       [2m[90m‚Üì[39m[22m should return numeric values for all KPIs
       [2m[90m‚Üì[39m[22m should return 400 for missing org_id query parameter
       [2m[90m‚Üì[39m[22m should return 400 for invalid org_id format (not UUID)
       [2m[90m‚Üì[39m[22m should return 401 for unauthenticated requests
       [2m[90m‚Üì[39m[22m should include cache headers (Cache-Control)
       [2m[90m‚Üì[39m[22m should return zero values for non-existent org
       [2m[90m‚Üì[39m[22m should only return data for specified org_id (RLS enforcement)
       [2m[90m‚Üì[39m[22m should return 200 with alerts array and total
       [2m[90m‚Üì[39m[22m should return alerts with correct structure
       [2m[90m‚Üì[39m[22m should respect limit query parameter (default 10)
       [2m[90m‚Üì[39m[22m should return 400 for limit > 50
       [2m[90m‚Üì[39m[22m should return 400 for invalid limit (non-numeric)
       [2m[90m‚Üì[39m[22m should return 400 for missing org_id
       [2m[90m‚Üì[39m[22m should sort alerts by severity (critical > warning)
       [2m[90m‚Üì[39m[22m should return empty alerts when no issues exist
       [2m[90m‚Üì[39m[22m should include cache headers
       [2m[90m‚Üì[39m[22m should enforce RLS by org_id
       [2m[90m‚Üì[39m[22m should return 200 with activities array and total
       [2m[90m‚Üì[39m[22m should return activities with correct structure
       [2m[90m‚Üì[39m[22m should respect limit query parameter (default 20, max 100)
       [2m[90m‚Üì[39m[22m should return 400 for limit > 100
       [2m[90m‚Üì[39m[22m should return 400 for missing org_id
       [2m[90m‚Üì[39m[22m should sort activities by timestamp DESC (newest first)
       [2m[90m‚Üì[39m[22m should include activities from PO, TO, and WO
       [2m[90m‚Üì[39m[22m should include valid action types
       [2m[90m‚Üì[39m[22m should return empty activities when no data exists
       [2m[90m‚Üì[39m[22m should include cache headers
       [2m[90m‚Üì[39m[22m should enforce RLS by org_id
       [2m[90m‚Üì[39m[22m should handle malformed JSON requests gracefully
       [2m[90m‚Üì[39m[22m should reject unsupported HTTP methods
       [2m[90m‚Üì[39m[22m should handle database connection errors gracefully
       [2m[90m‚Üì[39m[22m should serve cached KPI data on subsequent requests
       [2m[90m‚Üì[39m[22m should invalidate cache when PO is created
[90mstdout[2m | __tests__/api/production/output-registration.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [31m‚ùØ[39m lib/services/__tests__/inspection-service.test.ts [2m([22m[2m131 tests[22m[2m | [22m[31m131 failed[39m[2m)[22m[33m 1283[2mms[22m[39m
[31m       [31m√ó[31m should generate inspection number with incoming type prefix[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should use INC prefix for incoming inspection type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should use IPR prefix for in_process inspection type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should use FIN prefix for final inspection type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should increment sequence number for each new inspection[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reset sequence on year boundary[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should ensure uniqueness per org[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should create inspection with required fields[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should auto-generate inspection_number[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set status to scheduled[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set scheduled_date to today if not provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default priority to normal[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should link specification if active spec exists for product[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should create inspection without spec if none exists[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject if no reference provided (LP, GRN, or PO)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate product exists before creating[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should warn if LP has active inspection but allow override[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set created_by to current user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set created_at to current timestamp[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should inherit org_id from user context[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should create inspections when auto-create enabled[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should skip when auto-create disabled[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should create one inspection per LP in GRN[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should set status to scheduled[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should set scheduled_date to today[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should link product from GRN item[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should link LP from GRN item[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should link GRN as reference[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should link PO if available on GRN[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should link active specification if exists[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should handle batch_number from GRN item[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should assign inspector to scheduled inspection[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set assigned_by to current user[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should set assigned_at to current timestamp[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow reassignment of assigned inspection[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should prevent assignment if completed[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should update updated_at and updated_by[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should validate inspector_id is valid UUID[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should send notification to assigned inspector[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should change status from scheduled to in_progress[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set started_at to current timestamp[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should require inspector assignment before starting[39m[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should allow take_over by different user if QA_MANAGER[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should update inspector_id when taking over[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should prevent start if already in_progress[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should prevent start if already completed[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update updated_at and updated_by[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should set status to completed[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should set result to provided value (pass/fail/conditional)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should set completed_at to current timestamp[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should set completed_by to current user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept optional result_notes[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should accept defect counts (major, minor, critical)[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should require conditional_reason for conditional result[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should require conditional_restrictions for conditional result[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should accept conditional_expires_at for conditional result[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should set conditional_approved_by for conditional[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should allow creating NCR on fail if requested[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should prevent complete if status not in_progress[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should update updated_at and updated_by[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should update LP qa_status to passed when result=pass[39m[32m 26[2mms[22m[39m
[31m       [31m√ó[31m should update LP qa_status to failed when result=fail[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should update LP qa_status to conditional when result=conditional[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should not update LP if lp_id is null[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should validate LP exists before updating[39m[32m 30[2mms[22m[39m
[31m       [31m√ó[31m should update LP updated_at timestamp[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should suggest pass when all tests passed[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should suggest fail when any test failed[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should suggest fail when critical_defects > 0[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should include test summary in response[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return reason for suggestion[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should handle inspections with no tests recorded[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should handle no specification linked[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should check quality_settings.auto_fail_on_critical flag[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should return true when all required tests recorded[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return false when tests missing[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should list untested critical parameters[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should list missing mandatory tests[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should allow complete when no spec linked[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should cancel scheduled inspection[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should set status to cancelled[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should require cancellation reason[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should prevent cancel if in_progress[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should prevent cancel if completed[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should update updated_at and updated_by[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return paginated list of inspections[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter by inspection_type=incoming[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should filter by status[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should filter by priority[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter by inspector_id[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should filter by product_id[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should filter by lp_id[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should filter by grn_id[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should filter by po_id[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should search by inspection_number or lp_number[39m[32m 29[2mms[22m[39m
[31m       [31m√ó[31m should sort by scheduled_date ascending[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should sort by inspection_number[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should sort by created_at[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should sort by priority[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should paginate correctly with limit and offset[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return pagination metadata[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id filter from user context[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should load <500ms with 1000 inspections[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should return inspection with all fields[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should include linked test results from story 06.6[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should include test result summary[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return can_complete flag[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return suggested_result[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return null if inspection not found[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should load <500ms with 50 test results[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return inspections with status scheduled or in_progress[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return counts by status[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should filter by type if provided[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id filter[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return inspections assigned to user[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should include pending and in_progress[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should order by scheduled_date[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return empty list if no assignments[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return true if LP has pending inspection[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return false if no pending inspection[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return inspection details if exists[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should check scheduled and in_progress statuses[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id isolation on select[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id isolation on insert[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id isolation on update[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should prevent delete if status != scheduled[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should prevent cross-org access via query[39m[32m 27[2mms[22m[39m
[31m       [31m√ó[31m should list 1000 inspections <500ms[39m[32m 48[2mms[22m[39m
[31m       [31m√ó[31m should get detail with 50 tests <500ms[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should create inspection <300ms[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should complete with LP update <500ms[39m[32m 6[2mms[22m[39m
[90mstdout[2m | __tests__/api/quality/inspections.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [31m‚ùØ[39m __tests__/api/production/output-registration.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[33m 630[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request[39m[33m 474[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if user not found in database[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12.2: should create output LP successfully[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12.8: should return 400 for invalid quantity[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12.8: should return 404 for non-existent WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12.8: should return 400 for WO not in_progress[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-4.12a.1: should return allocation preview[32m 96[2mms[22m[39m
       [32m‚úì[39m should return 400 for invalid qty in preview[32m 3[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12b.9: should reject over-production without parent LP[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12b.2: should accept over-production with parent LP[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m AC-4.12a.4: should return 409 for over-consumption[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return list of outputs for WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return empty array for WO with no outputs[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should not allow access to WO from different org[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/quality/inspections.test.ts [2m([22m[2m140 tests[22m[2m | [22m[31m140 failed[39m[2m)[22m[33m 1186[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with paginated list[39m[32m 80[2mms[22m[39m
[31m       [31m√ó[31m should include pagination metadata[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return default 20 items per page[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should support limit parameter up to 100[39m[32m 37[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if limit > 100[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter by inspection_type=incoming[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter by status[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should filter by priority[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter by inspector_id[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should filter by product_id[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter by date range[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should search by inspection_number[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should sort by various fields[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid filter[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id from auth[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if VIEWER role[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should respond <500ms for 1000 items[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with inspection details[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include all inspection fields[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include linked test results from 06.6[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should include test result summary[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include can_complete flag[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include suggested_result[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if not found[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if different org[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if VIEWER without read permission[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should respond <500ms with 50 test results[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 201 with new inspection[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should generate inspection_number[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set status to scheduled[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should set scheduled_date to today if not provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for missing product_id[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for missing reference (LP, GRN, PO)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid UUIDs[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid priority[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 409 if LP has active inspection (warning, allow override)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should link product[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should link LP if provided[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should link GRN if provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should link PO if provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should link active specification if exists[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should set created_by from auth user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should inherit org_id from auth user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if insufficient permissions[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should respond <300ms[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with updated inspection[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should set inspector_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set assigned_by to current user[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should set assigned_at to now[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should allow reassignment[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for missing inspector_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid UUID[39m[32m 26[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if inspection not found[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if inspection already completed[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if not QA_MANAGER[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with updated inspection[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should set status to in_progress[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set started_at to now[39m[32m 23[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if no inspector assigned[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow take_over if QA_MANAGER[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should update inspector_id when taking over[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if already in_progress[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if already completed[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if inspection not found[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if not QA_INSPECTOR or QA_MANAGER[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with completed inspection[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should set status to completed[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should set result to provided value[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should set completed_at to now[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set completed_by to current user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should update LP qa_status on pass[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should update LP qa_status on fail[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should update LP qa_status on conditional[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should accept defect counts[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if missing result[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if invalid result value[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if conditional without reason[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if conditional without restrictions[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should create NCR on fail if requested[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if status not in_progress[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if inspection not found[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if not QA_INSPECTOR or QA_MANAGER[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should respond <500ms with LP update[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with cancelled inspection[39m[32m 28[2mms[22m[39m
[31m       [31m√ó[31m should set status to cancelled[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for missing cancellation_reason[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if status not scheduled[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if inspection not found[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 if not QA_MANAGER[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with pending inspections[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include scheduled and in_progress[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should include count by status[39m[32m 31[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id filter[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with incoming inspections[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter by inspection_type=incoming[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should support pagination and filters[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should enforce org_id filter[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m VIEWER cannot create inspection[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m VIEWER cannot assign inspector[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m VIEWER cannot start inspection[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m VIEWER cannot complete inspection[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m QA_INSPECTOR cannot approve conditional[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m QA_INSPECTOR cannot reassign inspection[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m QA_MANAGER has all permissions[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m User A cannot access Org B inspections[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m Cross-org query returns 404[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m Org_id inherited from auth user[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m RLS blocks update of cross-org record[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m RLS blocks delete of cross-org record[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m Create action logged with all fields[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m Assign action logged with user[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m Start action logged[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m Complete action logged with result[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m Cancel action logged with reason[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m Result override logged[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m Audit log includes timestamp[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m Audit log includes user_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 with validation errors[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include field path in error[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should include error message[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid JSON[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m GET /inspections responds <500ms for 1000 items[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m GET /inspections/:id responds <500ms with 50 tests[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m POST /inspections responds <300ms[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m POST /inspections/:id/complete responds <500ms[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should integrate with LP service (Epic 05)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should integrate with GRN service[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should integrate with Quality Settings (06.0)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should integrate with Product Specifications (06.3)[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should integrate with Test Results Recording (06.6)[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should accept test results from 06.6 for completion[39m[32m 2[2mms[22m[39m
 [31m‚ùØ[39m __tests__/services/planning-dashboard-service.test.ts [2m([22m[2m37 tests[22m[2m | [22m[33m37 skipped[39m[2m)[22m[33m 849[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should return KPIData object with all 6 metrics
       [2m[90m‚Üì[39m[22m should return numeric values for all KPIs
       [2m[90m‚Üì[39m[22m should return zero values when no orders exist
       [2m[90m‚Üì[39m[22m should count POs pending approval correctly
       [2m[90m‚Üì[39m[22m should count POs created this month correctly
       [2m[90m‚Üì[39m[22m should count TOs in transit correctly
       [2m[90m‚Üì[39m[22m should count WOs scheduled today correctly
       [2m[90m‚Üì[39m[22m should count overdue WOs correctly
       [2m[90m‚Üì[39m[22m should NOT count completed WOs as overdue
       [2m[90m‚Üì[39m[22m should count open POs correctly (exclude closed and cancelled)
       [2m[90m‚Üì[39m[22m should cache KPI results for 2 minutes
       [2m[90m‚Üì[39m[22m should enforce RLS by filtering on org_id
       [2m[90m‚Üì[39m[22m should return AlertsResponse with alerts array and total
       [2m[90m‚Üì[39m[22m should return empty alerts when no issues exist
       [2m[90m‚Üì[39m[22m should detect overdue POs (expected_delivery_date < today)
       [2m[90m‚Üì[39m[22m should mark overdue PO as warning if 1-3 days overdue
       [2m[90m‚Üì[39m[22m should mark overdue PO as critical if 4+ days overdue
       [2m[90m‚Üì[39m[22m should detect POs pending approval for > 2 days
       [2m[90m‚Üì[39m[22m should sort alerts by severity (critical before warning)
       [2m[90m‚Üì[39m[22m should respect limit parameter (default 10, max 50)
       [2m[90m‚Üì[39m[22m should enforce RLS by org_id
       [2m[90m‚Üì[39m[22m should cache alert results for 2 minutes
       [2m[90m‚Üì[39m[22m should include alert structure with required fields
       [2m[90m‚Üì[39m[22m should return ActivityResponse with activities array and total
       [2m[90m‚Üì[39m[22m should return empty activities when no data exists
       [2m[90m‚Üì[39m[22m should return activities sorted by timestamp (newest first)
       [2m[90m‚Üì[39m[22m should respect limit parameter (default 20, max 100)
       [2m[90m‚Üì[39m[22m should include PO activities from status history
       [2m[90m‚Üì[39m[22m should include TO activities
       [2m[90m‚Üì[39m[22m should include WO activities
       [2m[90m‚Üì[39m[22m should map status changes to action types
       [2m[90m‚Üì[39m[22m should include activity structure with required fields
       [2m[90m‚Üì[39m[22m should enforce RLS by org_id
       [2m[90m‚Üì[39m[22m should cache activity results for 2 minutes
       [2m[90m‚Üì[39m[22m should clear all 3 cache keys for an org
       [2m[90m‚Üì[39m[22m should use correct cache key patterns
       [2m[90m‚Üì[39m[22m should be called when PO is created/updated/deleted
 [31m‚ùØ[39m components/production/outputs/__tests__/OutputHistoryTable.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 12913[2mms[22m[39m
       [33m[2m‚úì[22m[39m AC: displays all outputs with individual quantities [33m 484[2mms[22m[39m
       [32m‚úì[39m AC: displays each output with unique LP number[32m 269[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays quantity with UoM [33m 389[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays batch numbers [33m 338[2mms[22m[39m
       [32m‚úì[39m displays approved badge[32m 281[2mms[22m[39m
       [32m‚úì[39m displays pending badge[32m 297[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays rejected badge [33m 383[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays total outputs count [33m 320[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays total quantity [33m 491[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays approved count and qty [33m 476[2mms[22m[39m
       [32m‚úì[39m displays empty state message when no outputs[32m 35[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays Register First Output button in empty state [33m 1076[2mms[22m[39m
[31m       [31m√ó[31m filters by QA status - Approved[39m[33m 602[2mms[22m[39m
[31m       [31m√ó[31m displays location filter dropdown[39m[33m 566[2mms[22m[39m
       [33m[2m‚úì[22m[39m sorts by LP Number when header clicked [33m 1169[2mms[22m[39m
       [33m[2m‚úì[22m[39m sorts by quantity when header clicked [33m 1065[2mms[22m[39m
       [33m[2m‚úì[22m[39m toggles sort direction on second click [33m 1157[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onRegisterOutput when Register Output button clicked [33m 1094[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onExportCSV when Export CSV button clicked [33m 1139[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onViewLP with correct LP ID when View clicked [33m 417[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onPrintLabel with correct LP ID when Print clicked [33m 455[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays showing count [33m 399[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/quality-status-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m lib/services/__tests__/quality-status-service.test.ts [2m([22m[2m62 tests[22m[2m | [22m[31m26 failed[39m[2m)[22m[33m 1084[2mms[22m[39m
       [32m‚úì[39m should return all 7 quality status types[32m 60[2mms[22m[39m
       [32m‚úì[39m should return PENDING status with correct properties[32m 36[2mms[22m[39m
       [32m‚úì[39m should return PASSED status with correct properties[32m 1[2mms[22m[39m
       [32m‚úì[39m should return FAILED status with correct properties[32m 1[2mms[22m[39m
       [32m‚úì[39m should return HOLD status with correct properties[32m 17[2mms[22m[39m
       [32m‚úì[39m should return RELEASED status with correct properties[32m 1[2mms[22m[39m
       [32m‚úì[39m should return QUARANTINED status with correct properties[32m 18[2mms[22m[39m
       [32m‚úì[39m should return COND_APPROVED status with correct properties[32m 1[2mms[22m[39m
       [32m‚úì[39m should return status types within 200ms[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from PENDING[39m[32m 83[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from PASSED[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from FAILED[39m[32m 32[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from HOLD[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from QUARANTINED[39m[32m 32[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from COND_APPROVED[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return valid transitions from RELEASED[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should only return allowed transitions[32m 1[2mms[22m[39m
       [32m‚úì[39m should return empty array for invalid status[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate valid PENDING -> PASSED transition with inspection[39m[32m 31[2mms[22m[39m
       [32m‚úì[39m should block invalid transition FAILED -> RELEASED[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should require reason when requires_reason is true[39m[32m 32[2mms[22m[39m
[31m       [31m√ó[31m should require inspection when requires_inspection is true and no inspection exists[39m[32m 54[2mms[22m[39m
[31m       [31m√ó[31m should require approval when requires_approval is true and user lacks role[39m[32m 19[2mms[22m[39m
       [32m‚úì[39m should block self-transition (same from and to status)[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate transition with all requirements met[39m[32m 30[2mms[22m[39m
[31m       [31m√ó[31m should return multiple errors when multiple requirements not met[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should validate batch entity type[39m[32m 66[2mms[22m[39m
[31m       [31m√ó[31m should validate inspection entity type[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should change LP status and create history record[39m[32m 51[2mms[22m[39m
       [32m‚úì[39m should throw error for invalid transition[32m 37[2mms[22m[39m
[31m       [31m√ó[31m should record from_status and to_status in history[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should handle initial status (null from_status)[39m[32m 51[2mms[22m[39m
[31m       [31m√ó[31m should throw error when missing required reason[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should throw error when LP not found[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return status history for LP in descending order[39m[32m 19[2mms[22m[39m
       [32m‚úì[39m should return empty array if no history[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should include user name in history entries[39m[32m 28[2mms[22m[39m
[31m       [31m√ó[31m should handle batch entity type[39m[32m 38[2mms[22m[39m
[31m       [31m√ó[31m should handle inspection entity type[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should return history within 200ms performance target[32m 11[2mms[22m[39m
       [32m‚úì[39m should return current status for LP[32m 22[2mms[22m[39m
       [32m‚úì[39m should return PENDING as default for new LP[32m 1[2mms[22m[39m
       [32m‚úì[39m should throw error for unknown entity type[32m 24[2mms[22m[39m
       [32m‚úì[39m should return true for QA_MANAGER role[32m 1[2mms[22m[39m
       [32m‚úì[39m should return true for QUALITY_DIRECTOR role[32m 11[2mms[22m[39m
       [32m‚úì[39m should return true for ADMIN role[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return false for OPERATOR role[39m[32m 30[2mms[22m[39m
[31m       [31m√ó[31m should return false for VIEWER role[39m[32m 12[2mms[22m[39m
       [32m‚úì[39m should return true for PASSED status[32m 1[2mms[22m[39m
       [32m‚úì[39m should return true for RELEASED status[32m 36[2mms[22m[39m
       [32m‚úì[39m should return false for PENDING status[32m 2[2mms[22m[39m
       [32m‚úì[39m should return false for FAILED status[32m 2[2mms[22m[39m
       [32m‚úì[39m should return false for HOLD status[32m 20[2mms[22m[39m
       [32m‚úì[39m should return false for QUARANTINED status[32m 1[2mms[22m[39m
       [32m‚úì[39m should return false for COND_APPROVED status[32m 1[2mms[22m[39m
       [32m‚úì[39m should return true for PASSED status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return true for RELEASED status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return true for COND_APPROVED status[32m 8[2mms[22m[39m
       [32m‚úì[39m should return false for PENDING status[32m 1[2mms[22m[39m
       [32m‚úì[39m should return false for FAILED status[32m 19[2mms[22m[39m
       [32m‚úì[39m should return false for HOLD status[32m 13[2mms[22m[39m
       [32m‚úì[39m should return false for QUARANTINED status[32m 2[2mms[22m[39m
[90mstdout[2m | app/api/shipping/shipments/[id]/labels/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/01-settings/01.7.module-toggles.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | __tests__/services/customer-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m app/api/shipping/shipments/[id]/labels/__tests__/route.test.ts [2m([22m[2m115 tests[22m[2m | [22m[31m92 failed[39m[2m)[22m[33m 371[2mms[22m[39m
       [32m‚úì[39m should accept empty request body (default options)[32m 16[2mms[22m[39m
       [32m‚úì[39m should accept force_regenerate boolean[32m 11[2mms[22m[39m
       [32m‚úì[39m should default force_regenerate to false[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid force_regenerate type[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should generate SSCC for all boxes without existing SSCC[39m[32m 38[2mms[22m[39m
[31m       [31m√ó[31m should skip boxes that already have SSCC (idempotent)[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should regenerate SSCC when force_regenerate is true[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return boxes array with sscc and sscc_formatted[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should increment organization.next_sscc_sequence atomically[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should generate unique SSCC across all organizations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return valid SSCC-18 with correct check digit[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should format SSCC as "00 XXXX XXXX XXXX XXXX XX"[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return GS1_PREFIX_NOT_CONFIGURED when org lacks GS1 prefix[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_BOX_DATA when box lacks weight[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_BOX_DATA when box lacks dimensions[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_PACKED when status is not packed[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_FOUND for non-existent shipment[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 FORBIDDEN for unauthorized user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter by org_id from user context[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for cross-tenant access attempt[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should rollback if any SSCC generation fails[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should use SELECT FOR UPDATE to prevent concurrent duplicates[39m[32m 6[2mms[22m[39m
       [32m‚úì[39m should accept empty request body[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept force_regenerate boolean[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept include_product_list boolean[32m 0[2mms[22m[39m
       [32m‚úì[39m should default include_product_list to true[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should generate BOL PDF with bol_number[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return signed URL to PDF in Supabase Storage[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return generated_at timestamp[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return file_size_kb[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should use cached BOL if available and force_regenerate=false[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should regenerate BOL when force_regenerate=true[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include product summary when include_product_list=true[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should exclude product summary when include_product_list=false[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return NO_CARRIER_ASSIGNED when shipment lacks carrier[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_SSCC when any box lacks SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_BOX_DATA when box lacks weight[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_ADDRESS when customer address missing[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_READY when status invalid[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return PDF_GENERATION_TIMEOUT after 30 seconds[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_FOUND for non-existent shipment[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 403 FORBIDDEN for unauthorized user[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should generate BOL number in format BOL-YYYY-XXXXXX[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should increment BOL sequence per organization[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should make BOL number immutable after generation[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should store PDF at /bol/{org_id}/{shipment_id}.pdf[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should cache PDF in Redis with 24h TTL[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should invalidate cache on shipment update[39m[32m 6[2mms[22m[39m
       [32m‚úì[39m should accept valid format and output[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept format 4x6[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept format 4x8[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid format[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept output zpl[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept output pdf[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid output[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept optional box_ids array[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUID in box_ids[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should generate ZPL for all boxes when box_ids not provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should generate ZPL for specific boxes when box_ids provided[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should include GS1-128 barcode command in ZPL[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include human-readable SSCC in ZPL[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include ship-to address in ZPL[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should use 4x6 dimensions (813x1219 dots) for format=4x6[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should use 4x8 dimensions (813x1629 dots) for format=4x8[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should generate PDF labels when output=pdf[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should return pdf_url for each box[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should store PDF labels in Supabase Storage[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_SSCC when any box lacks SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return INVALID_FORMAT for unsupported format[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return INVALID_OUTPUT for unsupported output[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_FOUND for non-existent shipment[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 403 FORBIDDEN for unauthorized user[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should accept empty request body[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept force_regenerate boolean[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should generate packing slip PDF[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return signed URL to PDF[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return generated_at timestamp[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return file_size_kb[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should include line items with lots and BBD[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include allergen warnings when applicable[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should include carton summary with SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_SSCC when boxes lack SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_LOT_NUMBERS when items lack lot info[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return MISSING_ADDRESS when customer address missing[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should return PDF_GENERATION_TIMEOUT after 30 seconds[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_FOUND for non-existent shipment[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 FORBIDDEN for unauthorized user[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should accept format=4x6[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept format=4x8[32m 0[2mms[22m[39m
       [32m‚úì[39m should default format to 4x6[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid format[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return sscc (18-digit raw)[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return sscc_formatted with spaces[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return barcode_image_base64 (PNG)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return label_content.ship_to object[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should return order_number[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return box_number in format "X of Y"[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return weight with unit (kg)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return handling_instructions when present[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return SHIPMENT_NOT_FOUND for non-existent shipment[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return BOX_NOT_FOUND for non-existent box[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should return NO_SSCC when box lacks SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 FORBIDDEN for unauthorized user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter by org_id from user context[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for cross-tenant access attempt[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should allow Warehouse Manager to generate SSCC[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should allow Shipping Manager to generate SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow Admin to generate SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should deny Picker from generating SSCC[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should deny Viewer from generating SSCC[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow Packer to print labels[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow Warehouse Manager to print labels[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should deny Viewer from printing labels[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should allow all authenticated users to preview labels[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should deny unauthenticated access[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m __tests__/services/customer-service.test.ts [2m([22m[2m46 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 371[2mms[22m[39m
       [32m‚úì[39m should create customer with required fields[32m 17[2mms[22m[39m
       [32m‚úì[39m should normalize customer_code to uppercase[32m 8[2mms[22m[39m
       [32m‚úì[39m should validate customer_code format - reject special chars[32m 12[2mms[22m[39m
       [32m‚úì[39m should reject duplicate customer_code per org[32m 7[2mms[22m[39m
       [32m‚úì[39m should encrypt tax_id field[32m 10[2mms[22m[39m
       [32m‚úì[39m should validate allergen IDs exist[32m 5[2mms[22m[39m
       [32m‚úì[39m should validate payment_terms_days range (1-365)[32m 5[2mms[22m[39m
       [32m‚úì[39m should allow empty allergen_restrictions[32m 1[2mms[22m[39m
       [32m‚úì[39m should validate credit_limit is positive[32m 10[2mms[22m[39m
       [32m‚úì[39m should reject max allergens > 20[32m 7[2mms[22m[39m
       [32m‚úì[39m should update name only[32m 10[2mms[22m[39m
       [32m‚úì[39m should prevent customer_code change[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should update allergen_restrictions with validation[39m[32m 16[2mms[22m[39m
       [32m‚úì[39m should not allow archiving customer with open orders[32m 1[2mms[22m[39m
       [32m‚úì[39m should update updated_at timestamp[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent customer[39m[32m 36[2mms[22m[39m
       [32m‚úì[39m should archive customer (is_active = false)[32m 1[2mms[22m[39m
       [32m‚úì[39m should prevent delete if open orders exist[32m 1[2mms[22m[39m
       [32m‚úì[39m should preserve allergen history after archive[32m 1[2mms[22m[39m
       [32m‚úì[39m should return paginated list[32m 17[2mms[22m[39m
       [32m‚úì[39m should filter by category[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should search by customer_code case-insensitive[39m[32m 15[2mms[22m[39m
       [32m‚úì[39m should filter by is_active[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return customer with nested contacts and addresses[39m[32m 6[2mms[22m[39m
       [32m‚úì[39m should return null for cross-tenant access[32m 1[2mms[22m[39m
       [32m‚úì[39m should create contact with name only[32m 12[2mms[22m[39m
       [32m‚úì[39m should validate email format if provided[32m 9[2mms[22m[39m
       [32m‚úì[39m should prevent duplicate emails per customer[32m 14[2mms[22m[39m
       [32m‚úì[39m should allow null email[32m 1[2mms[22m[39m
       [32m‚úì[39m should update contact title[32m 3[2mms[22m[39m
       [32m‚úì[39m should set is_primary contact[32m 9[2mms[22m[39m
       [32m‚úì[39m should delete contact (hard delete)[32m 13[2mms[22m[39m
       [32m‚úì[39m should create shipping address[32m 15[2mms[22m[39m
       [32m‚úì[39m should create billing address[32m 1[2mms[22m[39m
       [32m‚úì[39m should validate postal_code not empty[32m 7[2mms[22m[39m
       [32m‚úì[39m should parse dock_hours JSON[32m 8[2mms[22m[39m
       [32m‚úì[39m should set address as default for type[32m 1[2mms[22m[39m
       [32m‚úì[39m should update city[32m 1[2mms[22m[39m
       [32m‚úì[39m should delete address (hard delete)[32m 7[2mms[22m[39m
       [32m‚úì[39m should require at least one address[32m 10[2mms[22m[39m
       [32m‚úì[39m should mark address as default for its type[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should unset other defaults of same type[39m[32m 10[2mms[22m[39m
       [32m‚úì[39m should validate allergen UUIDs against allergens table[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should store allergen array as JSONB[39m[32m 8[2mms[22m[39m
       [32m‚úì[39m should support max 20 allergens per customer[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow empty allergen restrictions[39m[32m 15[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mcreateTaxCode()[2m > [22m[2mshould create tax code with valid data (AC-02)
[22m[39mEmitted tax_code.updated event: created tc-new

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mcreateTaxCode()[2m > [22m[2mshould create tax code with valid data (AC-02)
[22m[39mSuccessfully created tax code: VAT10 (tc-new)

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mcreateTaxCode()[2m > [22m[2mshould auto-uppercase code (AC-02)
[22m[39mEmitted tax_code.updated event: created tc-001

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mcreateTaxCode()[2m > [22m[2mshould auto-uppercase code (AC-02)
[22m[39mSuccessfully created tax code: VAT10 (tc-001)

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mupdateTaxCode()[2m > [22m[2mshould update mutable fields (AC-06)
[22m[39mEmitted tax_code.updated event: updated tc-001

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mupdateTaxCode()[2m > [22m[2mshould update mutable fields (AC-06)
[22m[39mSuccessfully updated tax code: VAT23 (tc-001)

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mupdateTaxCode()[2m > [22m[2mshould warn on rate change (AC-05)
[22m[39mEmitted tax_code.updated event: updated tc-001

[90mstdout[2m | lib/services/__tests__/tax-code-service.test.ts[2m > [22m[2mTaxCodeService[2m > [22m[2mupdateTaxCode()[2m > [22m[2mshould warn on rate change (AC-05)
[22m[39mSuccessfully updated tax code: VAT23 (tc-001)

 [31m‚ùØ[39m lib/services/__tests__/tax-code-service.test.ts [2m([22m[2m46 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 523[2mms[22m[39m
         [32m‚úì[39m should validate valid tax code input[32m 11[2mms[22m[39m
         [32m‚úì[39m should reject code with lowercase letters[32m 9[2mms[22m[39m
         [32m‚úì[39m should reject code with spaces[32m 2[2mms[22m[39m
         [32m‚úì[39m should reject code with special characters[32m 6[2mms[22m[39m
         [32m‚úì[39m should reject code shorter than 2 characters[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject code longer than 20 characters[32m 6[2mms[22m[39m
         [32m‚úì[39m should accept code with hyphens[32m 1[2mms[22m[39m
         [32m‚úì[39m should validate rate is between 0 and 100 (AC-03)[32m 2[2mms[22m[39m
         [32m‚úì[39m should reject negative rate (AC-03)[32m 9[2mms[22m[39m
         [32m‚úì[39m should allow 0% rate (exempt) (AC-03)[32m 1[2mms[22m[39m
         [32m‚úì[39m should validate rate has at most 2 decimal places[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject country code with lowercase[32m 10[2mms[22m[39m
         [32m‚úì[39m should reject country code with more than 2 characters[32m 1[2mms[22m[39m
         [32m‚úì[39m should validate date format (YYYY-MM-DD)[32m 9[2mms[22m[39m
         [32m‚úì[39m should validate valid_to is after valid_from (AC-04)[32m 2[2mms[22m[39m
         [32m‚úì[39m should allow null valid_to (no expiry)[32m 7[2mms[22m[39m
         [32m‚úì[39m should allow omitted valid_to[32m 1[2mms[22m[39m
         [32m‚úì[39m should allow partial updates[32m 1[2mms[22m[39m
         [32m‚úì[39m should validate rate on partial update[32m 8[2mms[22m[39m
         [32m‚úì[39m should validate date range when both dates provided[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return org-scoped tax codes (AC-09)[39m[32m 58[2mms[22m[39m
[31m       [31m√ó[31m should filter by search query (code or name) (AC-01)[39m[32m 9[2mms[22m[39m
       [32m‚úì[39m should return error when org_id not found[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should handle database query failure[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should sort by code ascending by default[32m 73[2mms[22m[39m
       [32m‚úì[39m should create tax code with valid data (AC-02)[32m 12[2mms[22m[39m
       [32m‚úì[39m should auto-uppercase code (AC-02)[32m 19[2mms[22m[39m
       [32m‚úì[39m should reject duplicate code (AC-02)[32m 1[2mms[22m[39m
       [32m‚úì[39m should return error when org_id not found[32m 1[2mms[22m[39m
       [32m‚úì[39m should update mutable fields (AC-06)[32m 11[2mms[22m[39m
       [32m‚úì[39m should return NOT_FOUND for non-existent tax code[32m 16[2mms[22m[39m
       [32m‚úì[39m should warn on rate change (AC-05)[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should delete tax code with no references (AC-07)[39m[32m 45[2mms[22m[39m
[31m       [31m√ó[31m should return IN_USE error for referenced tax code (AC-07)[39m[32m 16[2mms[22m[39m
       [32m‚úì[39m should return error when org_id not found[32m 19[2mms[22m[39m
       [32m‚úì[39m should identify active tax code (valid_from <= today <= valid_to)[32m 1[2mms[22m[39m
       [32m‚úì[39m should identify expired tax code (valid_to < today)[32m 16[2mms[22m[39m
       [32m‚úì[39m should identify scheduled tax code (valid_from > today)[32m 5[2mms[22m[39m
       [32m‚úì[39m should treat null valid_to as indefinitely active[32m 1[2mms[22m[39m
       [32m‚úì[39m should filter by org_id in all queries[32m 21[2mms[22m[39m
       [32m‚úì[39m should handle empty tax codes list[32m 14[2mms[22m[39m
       [32m‚úì[39m should handle database connection failure[32m 15[2mms[22m[39m
     [32m‚úì[39m should accept valid codes[32m 20[2mms[22m[39m
     [32m‚úì[39m should reject invalid codes[32m 0[2mms[22m[39m
     [32m‚úì[39m should accept valid country codes[32m 0[2mms[22m[39m
     [32m‚úì[39m should reject invalid country codes[32m 0[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/products/[id]/allergens/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/technical/products.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/offline-queue-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/api/technical/products.test.ts [2m([22m[2m18 tests[22m[2m | [22m[31m18 failed[39m[2m)[22m[33m 418[2mms[22m[39m
[31m       [31m√ó[31m should return products list for authenticated user[39m[32m 141[2mms[22m[39m
[31m       [31m√ó[31m should filter products by search query (AC-2.1.2)[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should filter products by type[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should filter products by status[39m[32m 25[2mms[22m[39m
[31m       [31m√ó[31m should support sorting by name descending[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should support pagination[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if user is not authenticated[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if org_id not in user metadata[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should filter by deleted_at is null (soft delete)[39m[32m 49[2mms[22m[39m
[31m       [31m√ó[31m should create product with valid data[39m[32m 27[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for duplicate product code (AC-2.1.4)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid product code format[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for missing required fields[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid product type[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should validate max_stock_qty > min_stock_qty[39m[32m 31[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if user is not authenticated[39m[32m 29[2mms[22m[39m
[31m       [31m√ó[31m should filter products by org_id[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should set org_id on create from user metadata[39m[32m 3[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/products/[id]/history/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [31m‚ùØ[39m lib/services/__tests__/offline-queue-service.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 2215[2mms[22m[39m
       [33m[2m‚úì[22m[39m should store operation in IndexedDB [33m 2140[2mms[22m[39m
       [32m‚úì[39m should increment pending count after queue[32m 7[2mms[22m[39m
       [32m‚úì[39m should support register_output operation type[32m 9[2mms[22m[39m
       [32m‚úì[39m should support register_by_product operation type[32m 2[2mms[22m[39m
       [32m‚úì[39m should add timestamp to queued operation[32m 1[2mms[22m[39m
       [32m‚úì[39m should process all pending operations[32m 1[2mms[22m[39m
       [32m‚úì[39m should mark synced items as synced[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle partial failures gracefully[32m 1[2mms[22m[39m
       [32m‚úì[39m should return empty result when queue is empty[32m 2[2mms[22m[39m
       [32m‚úì[39m should increment retry count on failure[32m 1[2mms[22m[39m
       [32m‚úì[39m should return 0 when queue is empty[32m 1[2mms[22m[39m
       [32m‚úì[39m should return correct count after queuing[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should be synchronous for quick UI updates[39m[32m 35[2mms[22m[39m
       [32m‚úì[39m should remove all pending items[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should be idempotent (safe to call multiple times)[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m app/api/v1/technical/products/[id]/allergens/__tests__/route.test.ts [2m([22m[2m30 tests[22m[2m | [22m[31m26 failed[39m[2m)[22m[33m 546[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 48[2mms[22m[39m
[31m       [31m√ó[31m should allow any authenticated user to view allergens[39m[32m 83[2mms[22m[39m
[31m       [31m√ó[31m should return allergens with relation type, name, and source (AC-01)[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should show auto-inherited allergens with AUTO badge (AC-02)[39m[32m 29[2mms[22m[39m
[31m       [31m√ó[31m should show manual allergens with MANUAL badge (AC-03)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should show empty state when no allergens declared (AC-04)[39m[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should include inheritance status in response[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent product[39m[32m 25[2mms[22m[39m
[31m       [31m√ó[31m should enforce RLS (cross-tenant isolation, AC-23)[39m[32m 14[2mms[22m[39m
       [32m‚úì[39m should return 500 on database error[32m 16[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 403 when VIEWER tries to add allergen (AC-22)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should allow PROD_MANAGER to add allergen[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should add contains allergen with source=manual (AC-06)[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should add may_contain allergen with reason (AC-07)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for may_contain without reason (AC-08)[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for reason too short[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 409 for duplicate allergen (AC-09)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid allergen_id[39m[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid relation_type[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for missing allergen_id[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on database error[39m[32m 19[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 403 when VIEWER tries to remove allergen (AC-22)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow PROD_MANAGER to remove allergen[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should remove manually added allergen (AC-10)[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should remove auto-inherited allergen[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should support relation_type filter query param[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when allergen declaration not found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on database error[39m[32m 11[2mms[22m[39m
 [31m‚ùØ[39m app/api/shipping/sales-orders/__tests__/import.test.ts [2m([22m[2m26 tests[22m[2m | [22m[31m23 failed[39m[2m)[22m[33m 115315[2mms[22m[39m
       [32m‚úì[39m should return 401 when user not authenticated[32m 17[2mms[22m[39m
       [32m‚úì[39m should return 403 when user lacks shipping.C permission[32m 6[2mms[22m[39m
       [32m‚úì[39m should return 400 when no file uploaded[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when file is empty[39m[33m 5033[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when file too large (> 5MB)[39m[33m 5009[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when file is not CSV[39m[33m 5025[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when missing required headers[39m[33m 5002[2mms[22m[39m
[31m       [31m√ó[31m should create 3 SOs from CSV with 3 customers[39m[33m 5016[2mms[22m[39m
[31m       [31m√ó[31m should link each SO to correct customer_id[39m[33m 5014[2mms[22m[39m
[31m       [31m√ó[31m should group lines correctly per SO[39m[33m 5010[2mms[22m[39m
[31m       [31m√ó[31m should number lines sequentially per SO[39m[33m 5008[2mms[22m[39m
[31m       [31m√ó[31m should create SOs for valid rows, skip invalid[39m[33m 5016[2mms[22m[39m
[31m       [31m√ó[31m should include row numbers in error messages[39m[33m 5008[2mms[22m[39m
[31m       [31m√ó[31m should return success summary with counts[39m[33m 5005[2mms[22m[39m
[31m       [31m√ó[31m should include list of created order numbers[39m[33m 5013[2mms[22m[39m
[31m       [31m√ó[31m should return error list with row numbers and messages[39m[33m 5011[2mms[22m[39m
[31m       [31m√ó[31m should not find customer from different org[39m[33m 5001[2mms[22m[39m
[31m       [31m√ó[31m should not find product from different org[39m[33m 5012[2mms[22m[39m
[31m       [31m√ó[31m should set org_id on all created SOs[39m[33m 5013[2mms[22m[39m
[31m       [31m√ó[31m should set allergen_validated=false on all created SOs[39m[33m 5001[2mms[22m[39m
[31m       [31m√ó[31m should set status=draft on created SOs[39m[33m 5013[2mms[22m[39m
[31m       [31m√ó[31m should set order_date to today[39m[33m 5007[2mms[22m[39m
[31m       [31m√ó[31m should use customer_po from CSV if provided[39m[33m 5020[2mms[22m[39m
[31m       [31m√ó[31m should use promised_ship_date from CSV if provided[39m[33m 5020[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on database error[39m[33m 5003[2mms[22m[39m
[31m       [31m√ó[31m should rollback on partial failure[39m[33m 5013[2mms[22m[39m
 [31m‚ùØ[39m __tests__/01-settings/01.7.module-toggles.test.tsx [2m([22m[2m20 tests[22m[2m | [22m[31m20 failed[39m[2m)[22m[33m 479[2mms[22m[39m
[31m       [31m√ó[31m should_display_all_7_modules_with_toggle_switches[39m[32m 150[2mms[22m[39m
[31m       [31m√ó[31m should_show_module_descriptions_and_dependencies[39m[32m 31[2mms[22m[39m
[31m       [31m√ó[31m should_show_settings_module_as_always_enabled[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should_enable_module_when_toggle_clicked[39m[32m 27[2mms[22m[39m
[31m       [31m√ó[31m should_show_warning_if_dependencies_not_enabled[39m[32m 30[2mms[22m[39m
[31m       [31m√ó[31m should_update_navigation_sidebar_after_enabling_module[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should_show_confirmation_modal_when_disabling_module[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should_prevent_disable_if_dependent_modules_enabled[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should_show_warning_about_dependent_modules_in_modal[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should_disable_module_after_confirmation[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should_cancel_disable_when_cancel_clicked[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should_disable_toggles_for_non_admin_users[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should_show_read_only_badge_for_non_admin[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should_hide_navigation_item_when_module_disabled[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should_show_navigation_item_when_module_enabled[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should_show_loading_skeleton_while_fetching_modules[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should_show_error_message_on_fetch_failure[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should_retry_fetch_when_retry_button_clicked[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should_display_enabled_and_disabled_count[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should_update_count_after_toggle[39m[32m 28[2mms[22m[39m
 [31m‚ùØ[39m app/api/v1/technical/products/[id]/history/__tests__/route.test.ts [2m([22m[2m19 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[33m 370[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 57[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when product does not exist[39m[32m 68[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when product belongs to different org (RLS)[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return detailed history with changed_fields[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should include user details in changed_by field[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return history in descending version order[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should mark version 1 with is_initial=true[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should mark subsequent versions with is_initial=false[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should filter by from_date[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should filter by to_date[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should filter by both from_date and to_date[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should validate from_date is before to_date[39m[32m 61[2mms[22m[39m
       [32m‚úì[39m should validate date format[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should paginate with default values (page=1, limit=20)[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should paginate with custom page and limit[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return has_more=true when more history exists[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should return has_more=false on last page[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return correct response structure[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 500 when database query fails[39m[32m 1[2mms[22m[39m
[90mstdout[2m | __tests__/integration/api/production/dashboard.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/integration/api/production/dashboard.test.ts [2m([22m[2m37 tests[22m[2m | [22m[31m37 failed[39m[2m)[22m[32m 108[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request to /kpis[39m[32m 23[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request to /active-wos[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request to /alerts[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request to /export[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return all 6 KPI values[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC-23: should respond within 500ms[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return JSON content type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should cache response for 30 seconds[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return paginated list of active WOs[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should support line filter[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should support product filter[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should support pagination parameters[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should cap limit at 100[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC-24: should respond within 1 second[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should return WO fields: id, wo_number, product_name, status, planned_qty, actual_qty, progress_percent, line_name, started_at[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return material shortages and delayed WOs[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should include material shortage details[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should include delayed WO details[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return empty arrays when no alerts[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return CSV file[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set correct filename header[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should apply line filter to export[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should apply product filter to export[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should include CSV headers[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow production_manager to access dashboard[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow operator to access dashboard[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should allow admin to access dashboard[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter KPIs by org_id[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should filter active WOs by org_id[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should filter alerts by org_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on service error for /kpis[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on service error for /active-wos[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid pagination params[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate line filter as UUID[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate product filter as UUID[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should validate page as positive integer[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should validate limit as positive integer[39m[32m 4[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/costing-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/barcode-generator-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | app/api/warehouse/asns/[id]/receive/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/barcode-generator-service.test.ts[2m > [22m[2mgenerateQRCode - QR Code Display (AC-005.6)[2m > [22m[2mshould generate QR code as data URL with correct dimensions
[22m[39mGenerated QR code for barcode: LOC-WH-01-001

[90mstdout[2m | lib/services/__tests__/barcode-generator-service.test.ts[2m > [22m[2mgenerateQRCode - QR Code Display (AC-005.6)[2m > [22m[2mshould use Medium error correction level for display
[22m[39mGenerated QR code for barcode: LOC-WH-01-001

 [31m‚ùØ[39m lib/services/__tests__/barcode-generator-service.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 129[2mms[22m[39m
[31m       [31m√ó[31m should generate barcode with format LOC-{warehouse_code}-{sequence}[39m[32m 37[2mms[22m[39m
[31m       [31m√ó[31m should increment sequence for existing locations[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should pad sequence with leading zeros (3 digits)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should handle sequences over 999[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should handle warehouse codes with hyphens and numbers[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should handle database query errors[39m[32m 10[2mms[22m[39m
       [32m‚úì[39m should handle invalid warehouse code format[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should generate independent sequences per warehouse[39m[32m 3[2mms[22m[39m
[31m     [31m√ó[31m should return true when barcode is unique[39m[32m 4[2mms[22m[39m
     [32m‚úì[39m should return false when barcode already exists[32m 4[2mms[22m[39m
     [32m‚úì[39m should handle database errors gracefully[32m 2[2mms[22m[39m
     [32m‚úì[39m should generate QR code as data URL with correct dimensions[32m 1[2mms[22m[39m
     [32m‚úì[39m should use Medium error correction level for display[32m 10[2mms[22m[39m
[31m     [31m√ó[31m should handle QR code generation errors[39m[32m 6[2mms[22m[39m
[31m     [31m√ó[31m should generate high-resolution QR code for printing[39m[32m 4[2mms[22m[39m
     [32m‚úì[39m should use High error correction level for printing[32m 2[2mms[22m[39m
     [32m‚úì[39m should handle empty barcode input[32m 1[2mms[22m[39m
 [31m‚ùØ[39m lib/services/__tests__/costing-service.test.ts [2m([22m[2m37 tests[22m[2m | [22m[31m28 failed[39m[2m)[22m[32m 289[2mms[22m[39m
[31m       [31m√ó[31m should calculate total material cost for valid BOM with multiple ingredients[39m[32m 40[2mms[22m[39m
[31m       [31m√ó[31m should apply scrap percentage to material cost correctly[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return error when ingredient has no cost data[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should use current ingredient cost_per_unit value at calculation time[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should calculate operation labor cost correctly[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should calculate setup time cost correctly[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should calculate cleanup time cost correctly[39m[32m 10[2mms[22m[39m
       [32m‚úì[39m should use organization default labor rate when operation rate missing[32m 6[2mms[22m[39m
       [32m‚úì[39m should apply production line override for labor cost[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should apply routing setup cost to total[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should calculate working cost per unit correctly[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should calculate overhead percentage correctly[39m[32m 4[2mms[22m[39m
       [32m‚úì[39m should handle missing routing cost fields with defaults[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return full breakdown for valid BOM[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should calculate total cost as sum of all components[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should round all currency values to 2 decimal places[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should calculate cost per unit correctly[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should include breakdown materials and operations[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return error when BOM has no routing assigned[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return specific error for missing ingredient costs[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle database errors gracefully[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return BOM_NOT_FOUND for non-existent BOM[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should calculate material cost within 500ms for 10 items[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should handle large BOMs with 50+ items[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should calculate cost per unit correctly[39m[32m 15[2mms[22m[39m
[31m     [31m√ó[31m should return error when BOM not found[39m[32m 17[2mms[22m[39m
[31m     [31m√ó[31m should round unit cost to 2 decimal places[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should include currency in result[39m[32m 2[2mms[22m[39m
     [32m‚úì[39m should return difference between two BOMs[32m 10[2mms[22m[39m
     [32m‚úì[39m should calculate percent change between BOMs[32m 4[2mms[22m[39m
     [32m‚úì[39m should include all cost components in difference[32m 1[2mms[22m[39m
     [32m‚úì[39m should return null difference if either BOM fails[32m 2[2mms[22m[39m
     [32m‚úì[39m should handle same BOM comparison with 0 difference[32m 10[2mms[22m[39m
     [32m‚úì[39m should respect quantity parameter for comparison[32m 18[2mms[22m[39m
[31m     [31m√ó[31m should round currency values to 2 decimal places[39m[32m 6[2mms[22m[39m
[31m     [31m√ó[31m should handle zero values correctly[39m[32m 6[2mms[22m[39m
[31m     [31m√ó[31m should handle very large numbers[39m[32m 4[2mms[22m[39m
[90mstdout[2m | app/api/v1/settings/onboarding/step/1/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | app/api/v1/technical/boms/[id]/allergens/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [31m‚ùØ[39m app/api/warehouse/asns/[id]/receive/__tests__/route.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m15 failed[39m[2m)[22m[32m 160[2mms[22m[39m
[31m       [31m√ó[31m should return ASN receive preview for valid ASN[39m[32m 57[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent ASN[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for already received ASN[39m[32m 4[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated request[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should enforce RLS (cross-tenant access returns 404)[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should return preview in < 300ms[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should create GRN and LPs for full receive[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should handle partial receive and set ASN status to partial[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should track variance with reason and notes[39m[32m 23[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for over-receipt exceeding tolerance[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if batch_number missing when required[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 400 if expiry_date missing when required[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate request body with Zod schema[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated request[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should enforce RLS (cross-tenant access blocked)[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should complete receive in < 500ms for small ASN[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should handle large ASN (50 items) in < 2 seconds[39m[32m 5[2mms[22m[39m
[90mstdout[2m | __tests__/api/technical/routings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m app/api/v1/technical/boms/[id]/allergens/__tests__/route.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[32m 34[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return 403 when VIEWER tries to recalculate (AC-22)[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should allow PROD_MANAGER to recalculate allergens[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should recalculate allergens from BOM ingredients (AC-12)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should inherit Gluten from Wheat Flour (AC-13)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should preserve manual allergens during recalculation (AC-14)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should aggregate same allergen from multiple ingredients[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should remove stale auto-inherited allergens[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should only inherit contains allergens (not may_contain)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include BOM version in response[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when BOM not found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 422 when BOM ingredients have no allergen data[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on database error[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle BOM with no ingredients (empty BOM)[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m app/api/v1/settings/onboarding/step/1/__tests__/route.test.ts [2m([22m[2m25 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[32m 193[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 8[2mms[22m[39m
       [32m‚úì[39m should return 403 when user is not admin[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow super_admin to update organization[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should allow admin to update organization[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should accept valid organization profile data[39m[32m 28[2mms[22m[39m
       [32m‚úì[39m should reject empty organization name[32m 7[2mms[22m[39m
       [32m‚úì[39m should reject name with 1 character[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject name with 101 characters[32m 16[2mms[22m[39m
       [32m‚úì[39m should reject invalid IANA timezone[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unsupported language[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject unsupported currency[32m 23[2mms[22m[39m
       [32m‚úì[39m should reject missing required fields[32m 10[2mms[22m[39m
       [32m‚úì[39m should reject malformed JSON[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty request body[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should update organization with all provided fields[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should set onboarding_step to 2 on success[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should set onboarding_started_at if not already set[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should update updated_at timestamp[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should filter by org_id from context[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return 500 when database update fails[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return success response with organization data[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should return validation errors in structured format[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should handle special characters in organization name[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle all supported timezones[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should handle concurrent requests from same organization[39m[32m 3[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/technical/routings.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[32m 43[2mms[22m[39m
       [32m‚úì[39m should return routings list for authenticated user[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should filter routings by status (AC-015.3)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should filter routings by search term (AC-015.3)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should support sorting by code ascending[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should support sorting by name descending[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should return 401 if user is not authenticated[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if user not found in database[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid filter parameters[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return 500 if service fails[32m 1[2mms[22m[39m
       [32m‚úì[39m should allow operator role to view routings (read-only)[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should create routing with valid data[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create routing with all optional fields[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return 403 for non-admin/technical users (AC-015.5)[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow technical role to create routing[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid request body[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid code format[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 409 for duplicate routing code[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return 401 if not authenticated[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should transform code to uppercase[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should document RLS policy enforcement for routings[32m 0[2mms[22m[39m
       [32m‚úì[39m should pass org_id filter to service[32m 1[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/production-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [31m‚ùØ[39m lib/services/__tests__/production-dashboard-service.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m44 failed[39m[2m)[22m[32m 34[2mms[22m[39m
[31m         [31m√ó[31m should count WOs with status In Progress or Paused[39m[32m 8[2mms[22m[39m
[31m         [31m√ó[31m should return 0 when no active WOs exist[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should count WOs completed between 00:00 and 23:59 today[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should count WOs completed since start of current week (Monday)[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should calculate average cycle time in hours for completed WOs today[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should return 0 when no WOs completed today[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should exclude WOs without started_at[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should calculate on-time percentage for WOs completed today[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should return 100% when all WOs completed on-time[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should return 0% when no WOs completed today[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should return cached KPIs within 30 seconds[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should query DB and cache result when cache empty[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should return all required KPI fields[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should include ISO timestamp[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should return WOs with status In Progress or Paused[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should calculate progress percentage correctly[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should cap progress percentage at 100%[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should handle null actual_qty as 0[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should include product and line names[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should handle missing product/line as N/A and Unassigned[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should return empty array when no active WOs[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should filter WOs by production line ID[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should filter WOs by product ID[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should support multiple filters (AND logic)[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should sort by started_at descending by default[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should support pagination with default 50 per page[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should return page 2 when requested[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should cap limit at 100[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should detect WOs with material availability < 80%[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should not alert for WOs with availability >= 80%[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should include detected_at timestamp[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should detect WOs past scheduled_end_date and not completed[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should not alert for completed WOs even if past scheduled date[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should calculate days_overdue correctly[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should return empty arrays when no alerts exist[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should generate CSV with all columns[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should include data rows[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should respect filters in export[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle up to 10000 rows for export[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should filter all queries by org_id[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should pass org_id to all database queries[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should throw on database error in getDashboardKPIs[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should throw on database error in getActiveWOs[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should throw on database error in getDashboardAlerts[39m[32m 0[2mms[22m[39m
[90mstdout[2m | __tests__/api/technical/product-types.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | __tests__/lib/validation/routing-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/lib/validation/routing-schemas.test.ts [2m([22m[2m63 tests[22m[2m | [22m[31m30 failed[39m[2m)[22m[32m 44[2mms[22m[39m
       [32m‚úì[39m should accept valid routing data[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept routing with all optional fields[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should transform code to uppercase[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should reject code shorter than 2 characters[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should reject code longer than 50 characters[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should reject code with invalid characters[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid code formats (uppercase, numbers, hyphens)[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty name[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject name longer than 100 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject description longer than 1000 characters[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should default status to active[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default is_reusable to true[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid status values[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid status value[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial update with name only[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept partial update with status only[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept all updatable fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept null description[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty update (all fields optional)[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid filter options[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty filters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept status "all" for showing all routings[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid sort_by values[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid sort_direction values[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid sort_by[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept valid operation data[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should accept operation with all fields[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject non-integer sequence[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative sequence[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject zero sequence[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty operation_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject operation_name longer than 100 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid machine_id (not UUID)[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid line_id (not UUID)[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject non-positive expected_duration_minutes[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject expected_yield_percent less than 0.01[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject expected_yield_percent greater than 100[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should default expected_yield_percent to 100[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default setup_time_minutes to 0[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject negative setup_time_minutes[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative labor_cost[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept null machine_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept null line_id[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept all updatable fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept null labor_cost[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept valid reorder data[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid operation ID[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject negative sequence[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject zero sequence[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept empty operations array[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept valid product assignment[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept assignment with default_product_id[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept empty product_ids array[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid product_id (not UUID)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid default_product_id[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept valid routing assignment[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept assignment with default_routing_id[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept empty routing_ids array[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid routing_id[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid default_routing_id[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/technical/product-types.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m15 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m       [31m√ó[31m should return default types + custom types[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should mark default types as non-editable[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should filter by active status[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if not authenticated[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create custom type with valid data[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for duplicate code[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for reserved default codes (AC-2.5.3)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should enforce uppercase code format[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should enforce code length 2-10 chars[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update custom type name[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when trying to edit default type[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if type not found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should delete custom type with no products[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when trying to delete default type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 if type not found[39m[32m 1[2mms[22m[39m
[90mstdout[2m | __tests__/lib/validation/product-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [31m‚ùØ[39m __tests__/lib/validation/product-schemas.test.ts [2m([22m[2m36 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 33[2mms[22m[39m
[31m       [31m√ó[31m should accept valid product data[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should accept product with all optional fields[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject product with code < 2 chars[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject product with code > 50 chars[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject product with invalid code characters[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept valid code formats[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid product type[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept all valid product types[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject missing required fields[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject max_stock_qty <= min_stock_qty[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept max_stock_qty > min_stock_qty[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default status to active[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept valid status values[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should not allow code update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept all updatable fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid allergen arrays[32m 1[2mms[22m[39m
       [32m‚úì[39m should default to empty arrays[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial allergen data[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid custom type[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject lowercase code[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject mixed case code[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject code with numbers[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject reserved default codes[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject code < 2 chars[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject code > 10 chars[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject name > 100 chars[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept name update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept is_active update[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid query params[32m 1[2mms[22m[39m
       [32m‚úì[39m should coerce string numbers[32m 0[2mms[22m[39m
       [32m‚úì[39m should apply defaults[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept type as array[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject limit > 100[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid order value[32m 0[2mms[22m[39m
[90mstdout[2m | app/api/v1/allergens/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/lib/validation/bom-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [31m‚ùØ[39m app/api/v1/allergens/__tests__/route.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 28[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 7[2mms[22m[39m
       [32m‚úì[39m should allow any authenticated user to list allergens[32m 2[2mms[22m[39m
       [32m‚úì[39m should return 14 EU allergens (AC-18)[32m 3[2mms[22m[39m
       [32m‚úì[39m should return allergens sorted by display_order[32m 1[2mms[22m[39m
       [32m‚úì[39m should include all required fields (code, name_en, name_pl, icon_url)[32m 2[2mms[22m[39m
       [32m‚úì[39m should return allergens regardless of org (global data, AC-19)[32m 2[2mms[22m[39m
       [32m‚úì[39m should only return active allergens[32m 1[2mms[22m[39m
       [32m‚úì[39m should support language preference query param[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 500 on database error[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should return empty array if no allergens seeded (dependency check)[32m 1[2mms[22m[39m
 [31m‚ùØ[39m __tests__/lib/validation/bom-schemas.test.ts [2m([22m[2m46 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[32m 26[2mms[22m[39m
       [32m‚úì[39m should accept valid status values[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid BOM data[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept BOM with all optional fields[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid product_id (not UUID)[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid date format[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative output_qty[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject zero output_qty[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty output_uom[32m 0[2mms[22m[39m
       [32m‚úì[39m should default status to draft[32m 0[2mms[22m[39m
       [32m‚úì[39m should default output_qty to 1[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept nullable effective_to[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept all updatable fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should not include product_id (omitted)[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid clone data[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept with effective_to[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject effective_to before effective_from[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept nullable effective_to[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept valid BOM item[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should accept item with all fields[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject negative quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject zero quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject scrap_percent < 0[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject scrap_percent > 100[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative sequence[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should default scrap_percent to 0[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default is_by_product to false[39m[32m 1[2mms[22m[39m
         [32m‚úì[39m should require yield_percent when is_by_product is true[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should accept by-product with yield_percent[39m[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject yield_percent < 0[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject yield_percent > 100[32m 0[2mms[22m[39m
         [32m‚úì[39m should require condition_logic when condition_flags provided[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should accept condition flags with AND logic[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should accept condition flags with OR logic[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should accept empty condition_flags without logic[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept all updatable fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid reorder data[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty items array[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid item id[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative sequence[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept AND[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept OR[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid logic[39m[32m 0[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/organization-profile-step.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [31m‚ùØ[39m lib/validation/__tests__/organization-profile-step.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 29[2mms[22m[39m
[31m       [31m√ó[31m should accept valid organization profile data[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should accept all supported languages (pl, en, de, fr)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept all supported currencies (PLN, EUR, USD, GBP)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept valid IANA timezones[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept org name with exactly 2 characters (min boundary)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept org name with exactly 100 characters (max boundary)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept org name with special characters and numbers[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty organization name[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject org name with 1 character[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject org name with 101 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing name field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject whitespace-only name[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid IANA timezone[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject missing timezone field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty timezone[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject timezone with wrong format (not IANA)[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject unsupported language code[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing language field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty language[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject uppercase language codes[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid language format[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject unsupported currency code[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing currency field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty currency[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject lowercase currency codes[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid currency codes[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should correctly infer OrganizationProfileStepData type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have correct type for all fields[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject null values[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject undefined values[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject numeric values instead of strings[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle completely empty object[32m 0[2mms[22m[39m
[90mstdout[2m | components/settings/allergens/__tests__/AllergensDataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | __tests__/01-settings/01.6.api-permission-enforcement.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [31m‚ùØ[39m components/settings/allergens/__tests__/AllergensDataTable.test.tsx [2m([22m[2m28 tests[22m[2m | [22m[31m28 failed[39m[2m)[22m[32m 272[2mms[22m[39m
[31m       [31m√ó[31m should display loading skeleton[39m[32m 62[2mms[22m[39m
[31m       [31m√ó[31m should render all 14 EU allergens within 200ms[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should display all column headers (AC-AL-02)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display allergens sorted by display_order (AC-AL-03)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should display all allergen data (codes and names)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display icon for each allergen at 24x24 size (AC-AI-01)[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should display fallback icon when icon_url is null (AC-AI-02)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display icon with accessible alt text[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should search by English name "milk" (AC-AS-01)[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should search by Polish name "orzechy" (AC-AS-02)[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should search by allergen code "A05"[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should search across all language fields (AC-AS-03)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle case-insensitive search[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should show empty state when no matches found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should clear search and show all allergens[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should show multi-language tooltip on row hover[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should display localized name based on user language preference[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display read-only info banner (AC-RO-03)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should NOT display Add button (AC-RO-01)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should NOT display Edit buttons (AC-RO-01)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should NOT display Delete buttons (AC-RO-01)[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should NOT display Actions column[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should be read-only even for SUPER_ADMIN[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should display error state when fetch fails[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should NOT display pagination controls (only 14 items)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have accessible table structure[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should support keyboard navigation[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should render within 200ms (AC-AL-01)[39m[32m 4[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/products/[id]/versions/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/services/__tests__/org-context-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/technical/boms.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [31m‚ùØ[39m __tests__/01-settings/01.6.api-permission-enforcement.test.ts [2m([22m[2m40 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 478[2mms[22m[39m
[31m         [31m√ó[31m should allow owner to create work order[39m[32m 131[2mms[22m[39m
[31m         [31m√ó[31m should allow admin to create work order[39m[32m 5[2mms[22m[39m
[31m         [31m√ó[31m should allow production manager to create work order[39m[32m 2[2mms[22m[39m
[31m         [31m√ó[31m should allow production operator to create work order[39m[32m 11[2mms[22m[39m
[31m         [31m√ó[31m should deny viewer creating work order (403)[39m[32m 11[2mms[22m[39m
[31m         [31m√ó[31m should deny quality inspector creating work order (403)[39m[32m 11[2mms[22m[39m
[31m         [31m√ó[31m should deny warehouse operator creating work order (403)[39m[32m 17[2mms[22m[39m
         [32m‚úì[39m should allow all roles to read work orders[32m 82[2mms[22m[39m
         [32m‚úì[39m should allow owner to update work order[32m 1[2mms[22m[39m
         [32m‚úì[39m should allow production operator to update work order[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should deny viewer updating work order (403)[39m[32m 34[2mms[22m[39m
[31m         [31m√ó[31m should deny quality inspector updating work order (403)[39m[32m 1[2mms[22m[39m
         [32m‚úì[39m should allow owner to delete work order[32m 0[2mms[22m[39m
         [32m‚úì[39m should allow admin to delete work order[32m 16[2mms[22m[39m
         [32m‚úì[39m should allow production manager to delete work order[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should deny production operator deleting work order (403)[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should deny viewer deleting work order (403)[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should allow quality inspector to create inspection[39m[32m 12[2mms[22m[39m
[31m         [31m√ó[31m should allow production operator to create inspection[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should deny viewer creating inspection (403)[39m[32m 9[2mms[22m[39m
         [32m‚úì[39m should allow owner to delete inspection[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should deny quality inspector deleting inspection (403)[39m[32m 19[2mms[22m[39m
[31m         [31m√ó[31m should deny production operator deleting inspection (403)[39m[32m 15[2mms[22m[39m
[31m         [31m√ó[31m should allow owner to create user[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should allow admin to create user[39m[32m 11[2mms[22m[39m
[31m         [31m√ó[31m should deny production manager creating user (403)[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should deny viewer creating user (403)[39m[32m 1[2mms[22m[39m
         [32m‚úì[39m should allow owner to delete user[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should deny admin deleting from settings (403)[39m[32m 1[2mms[22m[39m
[31m         [31m√ó[31m should allow warehouse operator to create LP[39m[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should deny production operator creating LP (403)[39m[32m 1[2mms[22m[39m
         [32m‚úì[39m should allow warehouse manager to delete LP[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should deny warehouse operator deleting LP (403)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should include current role in error message[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should include required permission in error message[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should include helpful message[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should not reveal permission details to unauthenticated users[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should handle missing role gracefully[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle invalid role gracefully[39m[32m 1[2mms[22m[39m
[90mstdout[2m | __tests__/components/production/work-orders/StartWorkOrderButton.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/services/__tests__/wo-pause-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [31m‚ùØ[39m app/api/v1/technical/products/[id]/versions/__tests__/route.test.ts [2m([22m[2m16 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 415[2mms[22m[39m
       [32m‚úì[39m should return 401 when user is not authenticated[32m 78[2mms[22m[39m
       [32m‚úì[39m should return 401 when auth token is invalid[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when product does not exist[39m[32m 94[2mms[22m[39m
[31m       [31m√ó[31m should return 404 when product belongs to different org (RLS) (AC-23)[39m[32m 29[2mms[22m[39m
[31m       [31m√ó[31m should return versions in descending order[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should format user names correctly[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return empty list when product has no versions[39m[32m 25[2mms[22m[39m
[31m       [31m√ó[31m should paginate with default values (page=1, limit=20)[39m[32m 8[2mms[22m[39m
       [32m‚úì[39m should paginate with custom page and limit[32m 14[2mms[22m[39m
       [32m‚úì[39m should return has_more=true when more versions exist[32m 27[2mms[22m[39m
       [32m‚úì[39m should return has_more=false on last page[32m 10[2mms[22m[39m
       [32m‚úì[39m should validate page parameter (min 1)[32m 17[2mms[22m[39m
       [32m‚úì[39m should validate limit parameter (max 100)[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return correct response structure[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should return 500 when database query fails[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should only return versions for products in user org[39m[32m 2[2mms[22m[39m
 [31m‚ùØ[39m lib/services/__tests__/wo-pause-service.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 258[2mms[22m[39m
       [32m‚úì[39m should return true when allow_pause_wo is enabled in settings[32m 25[2mms[22m[39m
       [32m‚úì[39m should return false when allow_pause_wo is disabled in settings[32m 15[2mms[22m[39m
       [32m‚úì[39m should return false (default) when no settings exist[32m 1[2mms[22m[39m
       [32m‚úì[39m should return all available pause reasons[32m 11[2mms[22m[39m
       [32m‚úì[39m should pause an in_progress WO with valid reason[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should reject pause if WO is not in_progress[39m[32m 102[2mms[22m[39m
       [32m‚úì[39m should reject pause if already paused[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject pause without reason[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject pause if allow_pause_wo setting is disabled[39m[32m 13[2mms[22m[39m
       [32m‚úì[39m should return 404 for non-existent WO[32m 1[2mms[22m[39m
       [32m‚úì[39m should resume a paused WO[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should reject resume if WO is not paused[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should return 404 for non-existent WO[32m 1[2mms[22m[39m
       [32m‚úì[39m should calculate duration_minutes when resuming[32m 0[2mms[22m[39m
       [32m‚úì[39m should return list of pauses with duration[32m 5[2mms[22m[39m
       [32m‚úì[39m should return empty array for WO without pauses[32m 1[2mms[22m[39m
       [32m‚úì[39m should include summary with total downtime[32m 15[2mms[22m[39m
       [32m‚úì[39m should include user information for paused_by and resumed_by[32m 1[2mms[22m[39m
       [32m‚úì[39m should sort pauses by paused_at descending[32m 1[2mms[22m[39m
       [32m‚úì[39m should calculate total downtime summary for WO[32m 8[2mms[22m[39m
       [32m‚úì[39m should return zeros for WO without completed pauses[32m 1[2mms[22m[39m
       [32m‚úì[39m should create error with code, statusCode, and message[32m 0[2mms[22m[39m
 [31m‚ùØ[39m lib/services/__tests__/org-context-service.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m16 failed[39m[2m)[22m[32m 269[2mms[22m[39m
[31m       [31m√ó[31m should return org_id and user_id for valid authenticated user[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should return user role information[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return role permissions as JSONB object[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return organization details[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should include onboarding state in organization details[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should throw 404 error for non-existent user_id[39m[32m 43[2mms[22m[39m
[31m       [31m√ó[31m should throw 404 error (not 403) for invalid user[39m[32m 63[2mms[22m[39m
       [32m‚úì[39m should throw 401 error for undefined user_id[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should throw error for inactive user[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should throw error for inactive organization[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should complete context resolution in under 50ms[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should use single query for context resolution (no N+1)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle user with null last_name gracefully[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should handle organization with null logo_url[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject malformed UUID format[32m 7[2mms[22m[39m
     [32m‚úì[39m should return true for valid org context[32m 1[2mms[22m[39m
     [32m‚úì[39m should return false for missing org_id[32m 0[2mms[22m[39m
     [32m‚úì[39m should return false for missing user_id[32m 0[2mms[22m[39m
     [32m‚úì[39m should return false for missing role_code[32m 0[2mms[22m[39m
     [32m‚úì[39m should return false for empty permissions object[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should extract user_id from Supabase auth session[39m[32m 15[2mms[22m[39m
[31m     [31m√ó[31m should throw 401 for unauthenticated request[39m[32m 11[2mms[22m[39m
[31m     [31m√ó[31m should throw 401 for expired session[39m[32m 31[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/technical/boms.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 434[2mms[22m[39m
       [32m‚úì[39m should return BOMs list for authenticated user[32m 128[2mms[22m[39m
       [32m‚úì[39m should filter by product_id[32m 20[2mms[22m[39m
       [32m‚úì[39m should filter by status[32m 16[2mms[22m[39m
       [32m‚úì[39m should filter by search term[32m 16[2mms[22m[39m
       [32m‚úì[39m should support pagination with limit and offset[32m 14[2mms[22m[39m
       [32m‚úì[39m should return 401 if not authenticated[32m 1[2mms[22m[39m
       [32m‚úì[39m should return 404 if user not found[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should create BOM with valid data and auto-assign version[39m[32m 75[2mms[22m[39m
       [32m‚úì[39m should return 403 for non-admin/technical users[32m 44[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid request data[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for date overlap error (AC-2.8)[39m[32m 21[2mms[22m[39m
       [32m‚úì[39m should return 401 if not authenticated[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept technical role[39m[32m 18[2mms[22m[39m
       [32m‚úì[39m should document RLS policy enforcement for BOMs[32m 17[2mms[22m[39m
 [31m‚ùØ[39m __tests__/components/production/work-orders/StartWorkOrderButton.test.tsx [2m([22m[2m20 tests[22m[2m | [22m[31m20 failed[39m[2m)[22m[33m 336[2mms[22m[39m
[31m       [31m√ó[31m should render Start Production button when WO status is released[39m[32m 110[2mms[22m[39m
[31m       [31m√ó[31m should render enabled button for Released WO[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should have correct aria-label for accessibility[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should render disabled button for Draft WO[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should render disabled button for In Progress WO[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should render disabled button for Completed WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should render disabled button for Cancelled WO[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should render disabled button for Paused WO[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should show tooltip "WO must be Released to start" on disabled button hover[39m[32m 28[2mms[22m[39m
[31m       [31m√ó[31m should show button for production_operator role[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show button for production_manager role[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show button for admin role[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should hide button for viewer role[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show loading state while checking permissions[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should call onClick when button clicked[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should NOT call onClick when button is disabled[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should show loading spinner when isLoading=true[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should disable button while loading[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should show "Starting..." text while loading[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should have green/success styling when enabled[39m[32m 1[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/module-settings-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | lib/validation/__tests__/supplier-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | components/technical/routings/__tests__/OperationsTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [31m‚ùØ[39m lib/services/__tests__/module-settings-service.test.ts [2m([22m[2m39 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 220[2mms[22m[39m
[31m     [31m√ó[31m should return all 7 modules with enabled status[39m[32m 18[2mms[22m[39m
[31m     [31m√ó[31m should include org-specific enabled state for each module[39m[32m 10[2mms[22m[39m
[31m     [31m√ó[31m should compute dependents array for each module[39m[32m 2[2mms[22m[39m
     [32m‚úì[39m should throw error if org_id is invalid[32m 28[2mms[22m[39m
     [32m‚úì[39m should throw error if database query fails[32m 1[2mms[22m[39m
     [32m‚úì[39m should return valid when enabling module with no dependencies[32m 8[2mms[22m[39m
     [32m‚úì[39m should return invalid when enabling planning without technical[32m 5[2mms[22m[39m
     [32m‚úì[39m should return invalid when enabling production without technical and planning[32m 1[2mms[22m[39m
     [32m‚úì[39m should return valid when enabling production with technical and planning enabled[32m 0[2mms[22m[39m
     [32m‚úì[39m should return invalid when disabling technical with planning enabled[32m 4[2mms[22m[39m
     [32m‚úì[39m should return invalid when disabling warehouse with shipping enabled[32m 1[2mms[22m[39m
     [32m‚úì[39m should return valid when disabling module with no active dependents[32m 10[2mms[22m[39m
     [32m‚úì[39m should find all modules that depend on technical[32m 3[2mms[22m[39m
     [32m‚úì[39m should find modules that depend on planning[32m 10[2mms[22m[39m
     [32m‚úì[39m should find modules that depend on production[32m 0[2mms[22m[39m
     [32m‚úì[39m should find modules that depend on warehouse[32m 0[2mms[22m[39m
     [32m‚úì[39m should return empty array for modules with no dependents[32m 0[2mms[22m[39m
     [32m‚úì[39m should return empty array for shipping (no dependents)[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable technical when enabling planning[32m 9[2mms[22m[39m
     [32m‚úì[39m should enable technical and planning when enabling production[32m 6[2mms[22m[39m
     [32m‚úì[39m should enable full dependency chain for quality[32m 1[2mms[22m[39m
     [32m‚úì[39m should enable technical and warehouse when enabling shipping[32m 1[2mms[22m[39m
     [32m‚úì[39m should only enable target module when no dependencies exist[32m 6[2mms[22m[39m
     [32m‚úì[39m should throw error if database upsert fails[32m 1[2mms[22m[39m
     [32m‚úì[39m should disable technical and planning when disabling technical[32m 12[2mms[22m[39m
     [32m‚úì[39m should disable full chain when disabling technical with all dependents enabled[32m 1[2mms[22m[39m
     [32m‚úì[39m should disable production and quality when disabling production[32m 9[2mms[22m[39m
     [32m‚úì[39m should disable warehouse and shipping when disabling warehouse[32m 1[2mms[22m[39m
     [32m‚úì[39m should only disable target module when no dependents are enabled[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return true when module is enabled[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return false when module is disabled[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return false when module record does not exist[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should always return true for settings module[39m[32m 9[2mms[22m[39m
     [32m‚úì[39m should throw error if org_id is invalid[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should enable technical module successfully[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should disable warehouse module successfully[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should throw error when trying to disable settings module[39m[32m 22[2mms[22m[39m
     [32m‚úì[39m should throw error if module_id is invalid[32m 1[2mms[22m[39m
     [32m‚úì[39m should throw error if org_id is invalid[32m 1[2mms[22m[39m
 [31m‚ùØ[39m components/technical/routings/__tests__/OperationsTable.test.tsx [2m([22m[2m46 tests[22m[2m | [22m[31m46 failed[39m[2m)[22m[32m 239[2mms[22m[39m
[31m       [31m√ó[31m should display all 8 columns: Seq, Name, Machine, Line, Duration, Setup, Yield/Labor, Actions[39m[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should display sequence number in first column[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should display operation name in second column[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should display machine name in third column[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should display "-" when machine_id is NULL (AC-14)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display duration in minutes[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should display setup time in minutes[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display yield and labor cost in sub-row[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should append "(Parallel)" suffix to operation name when duplicate sequence (AC-03)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display "(Parallel)" for multiple parallel operations (AC-05)[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should not append "(Parallel)" for unique sequences[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should detect parallel operations correctly with mixed sequences[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should disable [^] (move up) button for first operation (AC-26)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should enable [^] (move up) button for non-first operations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should disable [v] (move down) button for last operation[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should enable [v] (move down) button for non-last operations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should call onReorder with "up" when [^] clicked[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should call onReorder with "down" when [v] clicked[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show confirmation dialog with operation name when [Del] clicked[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should call onDelete when confirmation confirmed[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should not call onDelete when confirmation cancelled[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should hide [Edit] button when canEdit=false (AC-32)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should hide [Del] button when canEdit=false (AC-32)[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should hide [^] [v] buttons when canEdit=false (AC-32)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show all action buttons when canEdit=true[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should display loading spinner when isLoading=true[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display "Loading operations..." message during loading[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should disable all interactions during loading[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display OperationsEmptyState when no operations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show "[+ Add First Operation]" button in empty state[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should show example banner with breadmaking steps[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display error banner with error message[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show retry button in error state[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should call onRetry when retry button clicked[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should display all operations in sequence order (AC-01)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display 50 operations within acceptable performance[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should call onEdit when [Edit] button clicked[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should call onDelete when confirmed in delete dialog[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have proper aria-labels on action buttons[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should support keyboard navigation[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should announce error messages to screen readers[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should announce loading state to screen readers[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle operations with very long names[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should handle operations with null optional fields[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle operations with very large duration values[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should handle rapid action clicks gracefully[39m[32m 15[2mms[22m[39m
 [31m‚ùØ[39m lib/validation/__tests__/supplier-schema.test.ts [2m([22m[2m65 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 179[2mms[22m[39m
       [32m‚úì[39m should accept valid supplier data with all required fields[32m 7[2mms[22m[39m
       [32m‚úì[39m should accept supplier with minimum required fields only (AC-03)[32m 10[2mms[22m[39m
       [32m‚úì[39m should accept supplier with all optional fields[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept supplier with optional fields as empty strings (transforms to null)[32m 12[2mms[22m[39m
       [32m‚úì[39m should accept supplier with is_active=false[32m 1[2mms[22m[39m
       [32m‚úì[39m should default is_active to true when not provided[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid code: SUP-001[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid code with minimum 2 characters[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept valid code with maximum 20 characters[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept code with numbers[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept code with hyphens[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty code[32m 8[2mms[22m[39m
       [32m‚úì[39m should reject code with less than 2 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject code with more than 20 characters[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject code with lowercase letters[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject code with special characters (@, !, #, etc)[32m 16[2mms[22m[39m
       [32m‚úì[39m should reject code with spaces[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid name with 2 characters minimum[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid name with 100 characters maximum[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept name with special characters and spaces[32m 8[2mms[22m[39m
       [32m‚úì[39m should reject empty name[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject name with less than 2 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject name with more than 100 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid email format[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept email with subdomain[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty contact_email (optional field)[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid email format[32m 4[2mms[22m[39m
       [32m‚úì[39m should accept all supported currencies (PLN, EUR, USD, GBP)[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject unsupported currency[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject lowercase currency[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid UUID for tax_code_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUID format[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty tax_code_id[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid payment terms[32m 9[2mms[22m[39m
       [32m‚úì[39m should reject empty payment_terms[32m 7[2mms[22m[39m
       [32m‚úì[39m should accept payment_terms with maximum 100 characters[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject payment_terms with more than 100 characters[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept contact_name with valid length (max 100)[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject contact_name exceeding 100 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept contact_phone with valid format (max 50)[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept address with valid length (max 200)[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept country as ISO 3166-1 alpha-2 code (exactly 2 chars)[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject country code that is not exactly 2 characters[32m 9[2mms[22m[39m
       [32m‚úì[39m should accept notes with valid length (max 1000)[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject notes with more than 1000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing code field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing name field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing currency field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing tax_code_id field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject missing payment_terms field[32m 0[2mms[22m[39m
       [32m‚úì[39m should allow partial updates[32m 4[2mms[22m[39m
       [32m‚úì[39m should allow updating single field[32m 0[2mms[22m[39m
       [32m‚úì[39m should still validate field constraints on update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid supplier_ids array[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept optional reason[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty supplier_ids array[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUIDs in array[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid supplier_ids array[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty array[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid export options[32m 0[2mms[22m[39m
       [32m‚úì[39m should default to empty array for supplier_ids[32m 7[2mms[22m[39m
       [32m‚úì[39m should accept valid query params[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should apply defaults[39m[32m 34[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 0[2mms[22m[39m
       [32m‚úì[39m should cap limit at 100[32m 0[2mms[22m[39m
[90mstdout[2m | __tests__/components/production/dashboard/KPICard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | __tests__/components/production/dashboard/ActiveWOsTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | app/api/v1/settings/dashboard/stats/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m __tests__/components/production/dashboard/KPICard.test.tsx [2m([22m[2m30 tests[22m[2m | [22m[31m30 failed[39m[2m)[22m[33m 364[2mms[22m[39m
[31m       [31m√ó[31m should render KPI title[39m[32m 123[2mms[22m[39m
[31m       [31m√ó[31m should render KPI value[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should render unit when provided[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should render percentage with % symbol[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should display count of In Progress + Paused WOs[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should have green accent color[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show tooltip on hover[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should display blue accent color[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should display purple accent color[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display value with hrs unit[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should display orange accent color[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should round to 1 decimal place[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should display green color when >= 90%[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display yellow color when 70-89%[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should display red color when < 70%[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should call onClick when card is clicked[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have cursor-pointer when clickable[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should not have cursor-pointer when not clickable[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have hover effect when clickable[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display skeleton when loading[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should not display value when loading[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display icon when provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display correct icon for each KPI type[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should format large numbers with comma separators[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should handle zero value[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should handle negative value[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should handle decimal values[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should have accessible name[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should be keyboard navigable when clickable[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should trigger onClick on Enter key[39m[32m 13[2mms[22m[39m
 [31m‚ùØ[39m __tests__/components/production/dashboard/ActiveWOsTable.test.tsx [2m([22m[2m40 tests[22m[2m | [22m[31m40 failed[39m[2m)[22m[33m 389[2mms[22m[39m
[31m       [31m√ó[31m should display all column headers[39m[32m 74[2mms[22m[39m
[31m       [31m√ó[31m should display all WO rows[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should display product name[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should display status badge with correct color[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display planned and actual quantities[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display progress bar with percentage[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should cap progress bar at 100% for over-production[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display line name[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should format started_at as "MMM DD, HH:mm"[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display empty state when no WOs[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should display "Start WO" button in empty state[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show table headers in empty state[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should display line filter dropdown[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter WOs when line selected[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should display filter badge when line selected[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should clear filter when X clicked on filter badge[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should display product filter dropdown[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter WOs when product selected[39m[32m 23[2mms[22m[39m
[31m       [31m√ó[31m should support multiple filters simultaneously[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should sort by Started At DESC on first click[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should toggle to ASC on second click[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should display sort indicator arrow[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should be sortable by all columns[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should expand row on click[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should show Materials list in expanded row[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should show Operations status in expanded row[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show "View Full Details" button in expanded row[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should navigate to execution page on "View Full Details" click[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should collapse row on second click[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should display loading skeleton when loading[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display multiple skeleton rows[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display pagination controls[39m[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should call onPageChange when next clicked[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should disable Previous on first page[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should disable Next on last page[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should preserve filters during refresh[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should preserve sort order during refresh[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should preserve expanded row during refresh[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have accessible table structure[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have aria-sort attribute on sorted column[39m[32m 1[2mms[22m[39m
[90mstdout[2m | __tests__/components/production/dashboard/AlertsPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [31m‚ùØ[39m __tests__/components/production/dashboard/AlertsPanel.test.tsx [2m([22m[2m43 tests[22m[2m | [22m[31m43 failed[39m[2m)[22m[33m 436[2mms[22m[39m
[31m       [31m√ó[31m should render alerts panel container[39m[32m 97[2mms[22m[39m
[31m       [31m√ó[31m should display panel title[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should display total alert count[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display material shortage section[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should display HIGH priority badge (red)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display shortage alert text with WO number and availability[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should display product name in shortage alert[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display detected_at timestamp[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should make alert clickable and navigate to WO detail[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should order shortage alerts by availability (lowest first)[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should display delayed WO section[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display MEDIUM priority badge (yellow)[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should display delayed alert text with WO number and days overdue[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display product name in delayed alert[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should calculate days overdue correctly[39m[32m 30[2mms[22m[39m
[31m       [31m√ó[31m should make delayed alert clickable[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should order delayed alerts by days overdue (most overdue first)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display Quality Issues placeholder[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display Machine Downtime placeholder[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should style placeholder sections with gray background[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should display info icon for placeholder sections[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display success message when no alerts[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display "no alerts at this time" text[39m[32m 44[2mms[22m[39m
[31m       [31m√ó[31m should display green success styling[39m[32m 30[2mms[22m[39m
[31m       [31m√ó[31m should display last check timestamp[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should still show placeholder sections when no active alerts[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should display loading skeleton when loading[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should not display alerts when loading[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show count badge for material shortages[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show count badge for delayed WOs[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should not show count badge when section is empty[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should collapse section when header clicked[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should expand section when collapsed header clicked[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should show chevron indicator for collapsible sections[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should style material shortage alerts with red border[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should style delayed WO alerts with yellow border[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should display warning icon for shortage alerts[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should display clock icon for delayed alerts[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have accessible alert role[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should have aria-live region for dynamic updates[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should have keyboard navigable alerts[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should update alerts when props change[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should preserve collapsed state during refresh[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m app/api/v1/settings/dashboard/stats/__tests__/route.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 389[2mms[22m[39m
[31m     [31m√ó[31m should return all dashboard stats for admin user[39m[32m 201[2mms[22m[39m
[31m     [31m√ó[31m should return filtered stats for warehouse_manager role[39m[32m 48[2mms[22m[39m
     [32m‚úì[39m should return 401 when user is not authenticated[32m 26[2mms[22m[39m
     [32m‚úì[39m should return 400 when org context is missing[32m 17[2mms[22m[39m
[31m     [31m√ó[31m should return 500 when database query fails[39m[32m 46[2mms[22m[39m
     [32m‚úì[39m should return empty stats for viewer role[32m 24[2mms[22m[39m
     [32m‚úì[39m should include cache headers in response[32m 25[2mms[22m[39m
[90mstdout[2m | __tests__/services/allergen-service-v2.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/services/allergen-service-v2.test.ts [2m([22m[2m26 tests[22m[2m | [22m[31m26 failed[39m[2m)[22m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should return all 14 EU allergens[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return allergens sorted by display_order[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter allergens by search query[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have all required fields[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should have valid code format (A01-A14)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return allergen by ID[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should throw error if allergen not found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return allergen by code A01[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return allergen by code A07 (Milk)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle lowercase codes[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should throw error for invalid code[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should search by English name[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should search by Polish name[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should search by code[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return empty array for non-existent search[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return English name when lang is en[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return Polish name when lang is pl[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return German name when lang is de[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return French name when lang is fr[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should fall back to English for invalid language[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should fall back to English when language field is null[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 14 select options[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should format label with code and name[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should use correct language for label[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should include all required fields[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should use allergen ID as value[39m[32m 0[2mms[22m[39m
[90mstdout[2m | __tests__/components/production/work-orders/StartWorkOrderModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/license-plate-detail.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [31m‚ùØ[39m __tests__/components/production/work-orders/StartWorkOrderModal.test.tsx [2m([22m[2m30 tests[22m[2m | [22m[31m30 failed[39m[2m)[22m[33m 395[2mms[22m[39m
[31m       [31m√ó[31m should display WO number in modal[39m[32m 124[2mms[22m[39m
[31m       [31m√ó[31m should display product name[39m[32m 28[2mms[22m[39m
[31m       [31m√ó[31m should display planned quantity with UOM[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display production line name[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display scheduled date[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should display overall material availability percentage[39m[32m 34[2mms[22m[39m
[31m       [31m√ó[31m should have modal title "Start Work Order"[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should display all materials in list[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display required qty for each material[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should display available qty for each material[39m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should display availability % for each material[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show empty state when no materials[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should show warning banner when material availability < 100%[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should NOT show warning when availability = 100%[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show "No materials available" warning when availability = 0%[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should highlight materials with shortage in red[39m[32m 32[2mms[22m[39m
[31m       [31m√ó[31m should show warning text "Material availability is X%. Continue?"[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show warning when line is in use by another WO[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should NOT show line warning when line is available[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should ask for confirmation when line in use[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should have "Confirm Start" button[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should have "Cancel" button[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should call onClose when Cancel clicked[39m[32m 32[2mms[22m[39m
[31m       [31m√ó[31m should call API and onSuccess when Confirm clicked[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show loading state on Confirm button while API in progress[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should disable both buttons while API in progress[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should show success toast after successful start[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show error toast on API failure[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should not render when isOpen=false[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should render when isOpen=true[39m[32m 1[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/lp-status-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/integration/api/production/work-orders-start.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [31m‚ùØ[39m lib/services/__tests__/license-plate-detail.test.ts [2m([22m[2m31 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 320[2mms[22m[39m
[31m       [31m√ó[31m should return LP detail with joined product, warehouse, location[39m[32m 145[2mms[22m[39m
       [32m‚úì[39m should return null when LP not found[32m 2[2mms[22m[39m
       [32m‚úì[39m should throw error on database failure[32m 11[2mms[22m[39m
       [32m‚úì[39m should enforce RLS by org_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should validate reason is provided[32m 13[2mms[22m[39m
       [32m‚úì[39m should validate reason length (max 500 chars)[32m 1[2mms[22m[39m
       [32m‚úì[39m should block LP and return updated LP[32m 2[2mms[22m[39m
       [32m‚úì[39m should throw error if LP already blocked[32m 21[2mms[22m[39m
       [32m‚úì[39m should create audit log entry for block action[32m 1[2mms[22m[39m
       [32m‚úì[39m should unblock LP and return updated LP[32m 2[2mms[22m[39m
       [32m‚úì[39m should throw error if LP not blocked[32m 13[2mms[22m[39m
       [32m‚úì[39m should create audit log entry for unblock action[32m 24[2mms[22m[39m
       [32m‚úì[39m should calculate days remaining correctly[32m 0[2mms[22m[39m
       [32m‚úì[39m should return negative for expired items[32m 0[2mms[22m[39m
       [32m‚úì[39m should return null for no expiry date[32m 0[2mms[22m[39m
       [32m‚úì[39m should return 0 for today expiry[32m 0[2mms[22m[39m
       [32m‚úì[39m should return green for available status[32m 1[2mms[22m[39m
       [32m‚úì[39m should return yellow for reserved status[32m 1[2mms[22m[39m
       [32m‚úì[39m should return gray for consumed status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return red for blocked status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return yellow for pending QA status[32m 12[2mms[22m[39m
       [32m‚úì[39m should return green for passed QA status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return red for failed QA status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return orange for quarantine QA status[32m 0[2mms[22m[39m
       [32m‚úì[39m should return "expired" for past dates[32m 1[2mms[22m[39m
       [32m‚úì[39m should return "critical" for 0-7 days remaining[32m 17[2mms[22m[39m
       [32m‚úì[39m should return "warning" for 8-30 days remaining[32m 1[2mms[22m[39m
       [32m‚úì[39m should return "normal" for >30 days remaining[32m 1[2mms[22m[39m
       [32m‚úì[39m should return "na" for null expiry date[32m 0[2mms[22m[39m
       [32m‚úì[39m should return empty array for Phase 0[32m 30[2mms[22m[39m
       [32m‚úì[39m should support pagination parameters[32m 1[2mms[22m[39m
 [31m‚ùØ[39m lib/validation/__tests__/lp-status-schemas.test.ts [2m([22m[2m39 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 343[2mms[22m[39m
       [32m‚úì[39m should accept all valid LP status values[32m 15[2mms[22m[39m
       [32m‚úì[39m should reject invalid LP status values[32m 14[2mms[22m[39m
       [32m‚úì[39m should accept all valid QA status values[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid QA status values[32m 31[2mms[22m[39m
       [32m‚úì[39m should accept valid status update[32m 18[2mms[22m[39m
       [32m‚úì[39m should accept all valid status values[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept optional reason[32m 29[2mms[22m[39m
       [32m‚úì[39m should accept reason with status change[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject invalid status value[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject reason too long[32m 1[2mms[22m[39m
       [32m‚úì[39m should require status field[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid QA status update with reason[32m 15[2mms[22m[39m
       [32m‚úì[39m should accept all valid QA status values[32m 1[2mms[22m[39m
       [32m‚úì[39m should require reason for failed status[32m 1[2mms[22m[39m
       [32m‚úì[39m should require reason for quarantine status[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept reason for passed status (optional)[32m 22[2mms[22m[39m
       [32m‚úì[39m should accept reason for pending status (optional)[32m 0[2mms[22m[39m
       [32m‚úì[39m should enforce minimum reason length for failed[32m 1[2mms[22m[39m
       [32m‚úì[39m should enforce minimum reason length for quarantine[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject reason too long[32m 10[2mms[22m[39m
       [32m‚úì[39m should require qa_status field[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid block reason[32m 0[2mms[22m[39m
       [32m‚úì[39m should require reason field[32m 1[2mms[22m[39m
       [32m‚úì[39m should enforce minimum reason length (10 characters)[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept reason exactly 10 characters[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept reason longer than 10 characters[39m[32m 70[2mms[22m[39m
       [32m‚úì[39m should reject reason too long[32m 22[2mms[22m[39m
       [32m‚úì[39m should reject empty string[32m 21[2mms[22m[39m
       [32m‚úì[39m should reject null reason[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept optional reason[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty object (no reason)[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept null reason[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject reason too long[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept reason up to 500 characters[32m 16[2mms[22m[39m
       [32m‚úì[39m should accept valid LP ID[32m 1[2mms[22m[39m
       [32m‚úì[39m should require lp_id field[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUID format[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty string[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject null value[32m 0[2mms[22m[39m
[90mstdout[2m | __tests__/api/technical/tracing.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/validation/__tests__/bom-clone.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m __tests__/api/technical/tracing.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 302[2mms[22m[39m
       [32m‚úì[39m should return forward trace for valid LP ID[32m 53[2mms[22m[39m
       [32m‚úì[39m should call traceForward with correct parameters[32m 23[2mms[22m[39m
       [32m‚úì[39m should handle LP with no descendants[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle deep trace (multiple levels)[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should throw error for invalid LP ID[39m[32m 63[2mms[22m[39m
       [32m‚úì[39m should return backward trace for valid LP ID[32m 1[2mms[22m[39m
       [32m‚úì[39m should call traceBackward with correct parameters[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle LP with no ancestors (root LP)[32m 1[2mms[22m[39m
       [32m‚úì[39m should trace full ancestor chain[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should throw error for invalid LP ID[39m[32m 15[2mms[22m[39m
       [32m‚úì[39m should execute recall simulation with LP ID[32m 1[2mms[22m[39m
       [32m‚úì[39m should execute recall simulation with batch number[32m 1[2mms[22m[39m
       [32m‚úì[39m should include forward and backward traces[32m 1[2mms[22m[39m
       [32m‚úì[39m should respect max_depth parameter[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should throw error for missing LP/batch[39m[32m 36[2mms[22m[39m
       [32m‚úì[39m should return simulation summary[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate LP ID format[39m[32m 52[2mms[22m[39m
       [32m‚úì[39m should validate batch number format[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate max_depth range[32m 0[2mms[22m[39m
       [32m‚úì[39m should require either lp_id or batch_number for recall[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle database errors gracefully[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle timeout errors[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle RLS policy violations[39m[32m 13[2mms[22m[39m
 [31m‚ùØ[39m __tests__/integration/api/production/work-orders-start.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m32 failed[39m[2m)[22m[33m 419[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request[39m[32m 97[2mms[22m[39m
[31m       [31m√ó[31m should return 401 if user not found in database[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 200 for successful start of Released WO[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return WO with status in_progress[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return WO with started_at timestamp (ISO format)[39m[32m 31[2mms[22m[39m
[31m       [31m√ó[31m should return WO with started_by user UUID[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should set started_at within 1 second of current time[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for Draft WO with error message[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for In Progress WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for Completed WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for Cancelled WO[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for Paused WO[39m[32m 36[2mms[22m[39m
[31m       [31m√ó[31m should include current_status in error response[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for cross-org WO access (not 403)[39m[32m 38[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent WO[39m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should return JSON content type[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return WO ID in response[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return wo_number in response[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should allow production_operator to start WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow production_manager to start WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should allow admin to start WO[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should deny viewer from starting WO with 403[39m[32m 18[2mms[22m[39m
[31m       [31m√ó[31m should accept empty request body[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept valid line_id override[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept force=true to bypass line check[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should return 400 for invalid line_id UUID[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should return 200 with material availability data[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return overall_availability_percent[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return materials array with details[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 100% in Phase 0 (mock data)[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent WO[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m lib/validation/__tests__/bom-clone.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 212[2mms[22m[39m
       [32m‚úì[39m should reject when target_product_id is missing[32m 31[2mms[22m[39m
       [32m‚úì[39m should reject when target_product_id is not a UUID[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject when target_product_id is empty string[32m 14[2mms[22m[39m
       [32m‚úì[39m should accept valid UUID for target_product_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should be optional[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid date format[32m 12[2mms[22m[39m
       [32m‚úì[39m should reject date in the past[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept today's date[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept future date[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle ISO date format (YYYY-MM-DD)[39m[32m 64[2mms[22m[39m
[31m       [31m√ó[31m should handle ISO datetime format[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should be optional[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept null[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid date format[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept future date[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject when effective_to is before effective_from[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept when effective_to equals effective_from[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should accept when effective_to is after effective_from[39m[32m 13[2mms[22m[39m
       [32m‚úì[39m should default to draft when not provided[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept draft status[32m 11[2mms[22m[39m
       [32m‚úì[39m should accept active status[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty status[32m 11[2mms[22m[39m
       [32m‚úì[39m should be optional[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept notes up to 2000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject notes exceeding 2000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty notes string[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept notes with special characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept notes with newlines[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should validate complete date range (from and to)[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should not validate date range if from is missing[32m 0[2mms[22m[39m
       [32m‚úì[39m should not validate date range if to is missing[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should validate valid complete request[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should validate minimal valid request[32m 0[2mms[22m[39m
       [32m‚úì[39m should provide helpful error messages[32m 12[2mms[22m[39m
[90mstdout[2m | __tests__/api/technical/dashboard.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [31m‚ùØ[39m __tests__/api/technical/dashboard.test.ts [2m([22m[2m36 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 263[2mms[22m[39m
       [32m‚úì[39m should return product dashboard with grouped products (AC-2.23.1)[32m 26[2mms[22m[39m
       [32m‚úì[39m should include category stats (AC-2.23.2)[32m 1[2mms[22m[39m
       [32m‚úì[39m should include overall stats (AC-2.23.3)[32m 8[2mms[22m[39m
       [32m‚úì[39m should filter by product type (AC-2.23.4)[32m 30[2mms[22m[39m
       [32m‚úì[39m should support search parameter (AC-2.23.5)[32m 1[2mms[22m[39m
       [32m‚úì[39m should support limit parameter[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should throw error on service failure[39m[32m 6[2mms[22m[39m
       [32m‚úì[39m should calculate trend this month[32m 0[2mms[22m[39m
       [32m‚úì[39m should return allergen matrix (AC-2.24.1)[32m 51[2mms[22m[39m
       [32m‚úì[39m should include product allergen status (AC-2.24.2)[32m 0[2mms[22m[39m
       [32m‚úì[39m should mark EU mandatory allergens (AC-2.24.3)[32m 20[2mms[22m[39m
       [32m‚úì[39m should filter by product types (AC-2.24.4)[32m 3[2mms[22m[39m
       [32m‚úì[39m should filter by allergen IDs[32m 0[2mms[22m[39m
       [32m‚úì[39m should filter by allergen count min/max (AC-2.24.5)[32m 41[2mms[22m[39m
       [32m‚úì[39m should filter by has_allergens flag[32m 0[2mms[22m[39m
       [32m‚úì[39m should support sorting (AC-2.24.6)[32m 1[2mms[22m[39m
       [32m‚úì[39m should support pagination[32m 1[2mms[22m[39m
       [32m‚úì[39m should return pagination info[32m 0[2mms[22m[39m
       [32m‚úì[39m should support search parameter[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should throw error on service failure[39m[32m 12[2mms[22m[39m
       [32m‚úì[39m should return allergen insights[32m 1[2mms[22m[39m
       [32m‚úì[39m should identify high-risk products (5+ allergens)[32m 11[2mms[22m[39m
       [32m‚úì[39m should identify products with missing declarations[32m 0[2mms[22m[39m
       [32m‚úì[39m should return most common allergens[32m 0[2mms[22m[39m
       [32m‚úì[39m should identify cross-contamination alerts[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should throw error on service failure[39m[32m 27[2mms[22m[39m
       [32m‚úì[39m should return recent activity feed[32m 0[2mms[22m[39m
       [32m‚úì[39m should include activity details[32m 0[2mms[22m[39m
       [32m‚úì[39m should support days parameter[32m 0[2mms[22m[39m
       [32m‚úì[39m should support limit parameter[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should throw error on service failure[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should validate product type filter values[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate sort_by values[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate sort_order values[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate page number is positive[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate pageSize is within limits[32m 0[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/production-settings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | __tests__/unit/validation/production-execution.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [31m‚ùØ[39m __tests__/unit/validation/production-execution.test.ts [2m([22m[2m24 tests[22m[2m | [22m[31m24 failed[39m[2m)[22m[32m 157[2mms[22m[39m
[31m       [31m√ó[31m should accept empty object (all fields optional)[39m[32m 40[2mms[22m[39m
[31m       [31m√ó[31m should accept valid UUID for line_id[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should accept valid UUID for machine_id[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should accept force=true[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept force=false[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept all fields together[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should default force to false when not provided[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid UUID for line_id[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid UUID for machine_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject non-boolean force value[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should reject number force value[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject empty string for line_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject null for line_id[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept draft status[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should accept released status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept in_progress status[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should accept paused status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept completed status[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should accept cancelled status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject uppercase status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid status string[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should reject number status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject null status[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject empty string status[39m[32m 14[2mms[22m[39m
 [31m‚ùØ[39m lib/validation/__tests__/production-settings.test.ts [2m([22m[2m49 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 208[2mms[22m[39m
         [32m‚úì[39m should accept valid full production settings object[32m 7[2mms[22m[39m
         [32m‚úì[39m should accept settings with all defaults[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept settings with minimal fields[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept boolean allow_pause_wo[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean allow_pause_wo[32m 16[2mms[22m[39m
         [32m‚úì[39m should accept boolean auto_complete_wo[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean auto_complete_wo[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean require_operation_sequence[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean require_operation_sequence[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean allow_over_consumption[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean allow_over_consumption[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean allow_partial_lp_consumption[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean allow_partial_lp_consumption[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean require_qa_on_output[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean require_qa_on_output[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean auto_create_by_product_lp[32m 0[2mms[22m[39m
[31m         [31m√ó[31m should reject non-boolean auto_create_by_product_lp[39m[32m 99[2mms[22m[39m
         [32m‚úì[39m should accept boolean enable_material_reservations[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject non-boolean enable_material_reservations[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept dashboard_refresh_seconds at minimum (5)[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept dashboard_refresh_seconds at maximum (300)[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept dashboard_refresh_seconds in valid range (15)[32m 9[2mms[22m[39m
         [32m‚úì[39m should reject dashboard_refresh_seconds below minimum (0)[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject dashboard_refresh_seconds below minimum (4)[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject dashboard_refresh_seconds above maximum (301)[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject non-integer dashboard_refresh_seconds[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject negative dashboard_refresh_seconds[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean show_material_alerts[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept boolean show_delay_alerts[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept boolean show_quality_alerts[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept enable_oee_tracking boolean[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept target_oee_percent at minimum (0)[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept target_oee_percent at maximum (100)[32m 1[2mms[22m[39m
         [32m‚úì[39m should accept target_oee_percent in valid range (85)[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept target_oee_percent with decimals (85.5)[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject target_oee_percent above maximum (110)[32m 1[2mms[22m[39m
         [32m‚úì[39m should reject target_oee_percent above maximum (105)[32m 0[2mms[22m[39m
         [32m‚úì[39m should reject negative target_oee_percent (-5)[32m 0[2mms[22m[39m
         [32m‚úì[39m should accept enable_downtime_tracking boolean[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty update (no fields)[32m 22[2mms[22m[39m
       [32m‚úì[39m should accept single field update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept multiple field update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept all fields update[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate dashboard_refresh_seconds in partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should validate target_oee_percent in partial update[32m 5[2mms[22m[39m
       [32m‚úì[39m should reject invalid field types in partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should strip unknown fields[32m 8[2mms[22m[39m
       [32m‚úì[39m should export ProductionSettingsInput type[32m 0[2mms[22m[39m
       [32m‚úì[39m should export UpdateProductionSettingsInput type[32m 10[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/genealogy-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/integration/api/production/outputs.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [31m‚ùØ[39m lib/services/__tests__/genealogy-service.test.ts [2m([22m[2m19 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 275[2mms[22m[39m
       [32m‚úì[39m should return trace result for valid LP ID[32m 32[2mms[22m[39m
[31m       [31m√ó[31m should call RPC with correct parameters[39m[32m 81[2mms[22m[39m
[31m       [31m√ó[31m should use default max_depth of 20[39m[32m 25[2mms[22m[39m
       [32m‚úì[39m should throw error when RPC fails[32m 40[2mms[22m[39m
       [32m‚úì[39m should calculate max_depth from results[32m 1[2mms[22m[39m
       [32m‚úì[39m should return root_lp from first result[32m 15[2mms[22m[39m
       [32m‚úì[39m should build tree from flat data[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle empty result set[32m 1[2mms[22m[39m
       [32m‚úì[39m should return trace result for valid LP ID[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should call RPC with trace_backward function[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should use default max_depth of 20[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should throw error when RPC fails[32m 2[2mms[22m[39m
       [32m‚úì[39m should calculate max_depth from ancestor chain[32m 0[2mms[22m[39m
       [32m‚úì[39m should return root_lp from first result[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle complex ancestor chain[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle LP with no descendants (forward)[32m 10[2mms[22m[39m
       [32m‚úì[39m should handle LP with no ancestors (backward)[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle database timeout[32m 33[2mms[22m[39m
       [32m‚úì[39m should handle malformed data from RPC[32m 1[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/location-move-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | app/(authenticated)/technical/components/__tests__/AllergenMatrixPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [31m‚ùØ[39m __tests__/integration/api/production/outputs.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 196[2mms[22m[39m
[31m       [31m√ó[31m returns WO summary, yields, outputs, by-products[39m[32m 63[2mms[22m[39m
[31m       [31m√ó[31m returns 404 for non-existent WO[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m returns 403 for other org WO[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m calculates yields correctly[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m returns 401 for unauthenticated request[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m AC: creates LP with correct fields[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC: creates genealogy links to consumed materials[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC: updates WO output_qty[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC: returns 400 for validation errors (qty=0)[39m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m AC: returns 400 when QA required but missing[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m returns 400 for WO not in progress[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m auto-calculates expiry date from product shelf life[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m uses WO batch_number as default[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m AC: creates by-product LP[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m AC: links genealogy to main output[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m returns 400 for invalid by-product[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m allows zero quantity with warning[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m returns CSV file[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m includes all output columns in CSV[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m returns 404 for WO without outputs[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m AC: User A from Org A only sees Org A outputs[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m AC: 404 for Org B WO when User A attempts access[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m lib/services/__tests__/location-move-validation.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m15 failed[39m[2m)[22m[32m 191[2mms[22m[39m
[31m       [31m√ó[31m should allow valid move: bin to different rack[39m[32m 73[2mms[22m[39m
[31m       [31m√ó[31m should reject move: bin to aisle (wrong level)[39m[32m 21[2mms[22m[39m
[31m       [31m√ó[31m should reject move: location to itself[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should reject move: zone (root locations cannot be moved)[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject circular move: rack to its own bin[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should reject move if new parent has no capacity[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should allow move if location has inventory (inventory moves with location)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should validate hierarchy: aisle can only go under zone[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should return valid parent types for bin[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should return valid parent types for rack[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should return empty array for zone (zones cannot be moved)[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return list of specific valid locations in warehouse[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should detect direct circular reference[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should detect indirect circular reference (deep hierarchy)[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should allow non-circular move[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m app/(authenticated)/technical/components/__tests__/AllergenMatrixPanel.test.tsx [2m([22m[2m68 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 210[2mms[22m[39m
       [32m‚úì[39m AC-12.06: should render products as rows and allergens as columns[32m 9[2mms[22m[39m
       [32m‚úì[39m should display product names in row headers[32m 1[2mms[22m[39m
       [32m‚úì[39m should display allergen names in column headers[32m 1[2mms[22m[39m
       [32m‚úì[39m should render grid with proper structure[32m 11[2mms[22m[39m
       [32m‚úì[39m should show all cells in matrix[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-12.07: should show red (#EF4444) for "contains" relation[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-12.08: should show yellow (#FBBF24) for "may_contain" relation[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-12.09: should show green (#10B981) for free_from (null) relation[32m 0[2mms[22m[39m
       [32m‚úì[39m should apply correct color to Wheat Flour/Gluten cell[32m 0[2mms[22m[39m
       [32m‚úì[39m should apply correct color to Milk Powder/Dairy cell[32m 9[2mms[22m[39m
       [32m‚úì[39m should apply correct color to Almond Flour/Tree Nuts cell[32m 0[2mms[22m[39m
       [32m‚úì[39m should apply correct color to cross-contamination cells[32m 0[2mms[22m[39m
       [32m‚úì[39m should display legend with color mapping[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-12.10: should call onCellClick with product and allergen IDs[32m 10[2mms[22m[39m
       [32m‚úì[39m should navigate to allergen management page[32m 0[2mms[22m[39m
       [32m‚úì[39m should pass correct product ID on cell click[32m 0[2mms[22m[39m
       [32m‚úì[39m should pass correct allergen ID on cell click[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle multiple cell clicks[32m 0[2mms[22m[39m
       [32m‚úì[39m should be clickable on all cells[32m 7[2mms[22m[39m
       [32m‚úì[39m AC-12.12: should filter by product_type dropdown[32m 0[2mms[22m[39m
       [32m‚úì[39m should filter to show only Finished Goods[32m 0[2mms[22m[39m
       [32m‚úì[39m should filter to show only Raw Materials[32m 0[2mms[22m[39m
       [32m‚úì[39m should show all products when filter="All"[32m 0[2mms[22m[39m
       [32m‚úì[39m should call onProductFilterChange when filter changes[32m 0[2mms[22m[39m
       [32m‚úì[39m should update grid when filter changes[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-12.11: should have Export PDF button[32m 0[2mms[22m[39m
       [32m‚úì[39m should call onExportPdf when Export PDF clicked[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should download PDF with correct filename format[39m[32m 82[2mms[22m[39m
       [32m‚úì[39m should include legend in PDF export[32m 0[2mms[22m[39m
       [32m‚úì[39m should include all products in PDF[32m 0[2mms[22m[39m
       [32m‚úì[39m should include all allergens in PDF[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle PDF export for large matrices[32m 0[2mms[22m[39m
       [32m‚úì[39m should generate PDF as landscape orientation[32m 0[2mms[22m[39m
       [32m‚úì[39m should show skeleton grid when loading=true[32m 0[2mms[22m[39m
       [32m‚úì[39m should display 5x6 skeleton grid (5 rows, 6 columns)[32m 0[2mms[22m[39m
       [32m‚úì[39m should show content when loading=false[32m 0[2mms[22m[39m
       [32m‚úì[39m should disable filter during loading[32m 0[2mms[22m[39m
       [32m‚úì[39m should disable export during loading[32m 0[2mms[22m[39m
       [32m‚úì[39m should show empty state when no data[32m 0[2mms[22m[39m
       [32m‚úì[39m should show error state on fetch failure[32m 0[2mms[22m[39m
       [32m‚úì[39m should show retry button on error[32m 0[2mms[22m[39m
       [32m‚úì[39m should call refetch on retry button click[32m 0[2mms[22m[39m
       [32m‚úì[39m should show full matrix on desktop (>1024px)[32m 0[2mms[22m[39m
       [32m‚úì[39m should enable horizontal scroll on tablet (768-1024px)[32m 0[2mms[22m[39m
       [32m‚úì[39m should enable both axes scroll on mobile (<768px)[32m 0[2mms[22m[39m
       [32m‚úì[39m should abbreviate allergen headers on mobile[32m 0[2mms[22m[39m
       [32m‚úì[39m should use smaller cell size on mobile[32m 0[2mms[22m[39m
       [32m‚úì[39m should reduce font size on mobile[32m 0[2mms[22m[39m
       [32m‚úì[39m should have ARIA grid role[32m 0[2mms[22m[39m
       [32m‚úì[39m should have ARIA row headers[32m 0[2mms[22m[39m
       [32m‚úì[39m should have ARIA column headers[32m 0[2mms[22m[39m
       [32m‚úì[39m should label cells with allergen status[32m 0[2mms[22m[39m
       [32m‚úì[39m should announce legend to screen readers[32m 0[2mms[22m[39m
       [32m‚úì[39m should be keyboard navigable[32m 0[2mms[22m[39m
       [32m‚úì[39m should show focus indicator on keyboard navigation[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle single product[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle single allergen[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle 50+ products[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle very long product names[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle very long allergen names[32m 6[2mms[22m[39m
       [32m‚úì[39m should handle all relations as "contains"[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle all relations as "may_contain"[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle all relations as "free_from"[32m 0[2mms[22m[39m
       [32m‚úì[39m should require data prop[32m 16[2mms[22m[39m
       [32m‚úì[39m should allow optional onCellClick prop[32m 12[2mms[22m[39m
       [32m‚úì[39m should allow optional onExportPdf prop[32m 0[2mms[22m[39m
       [32m‚úì[39m should allow optional loading prop[32m 0[2mms[22m[39m
       [32m‚úì[39m should allow optional error prop[32m 1[2mms[22m[39m
[90mstdout[2m | __tests__/unit/validation/production-execution-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | lib/services/__tests__/location-lp-count.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [31m‚ùØ[39m lib/services/__tests__/location-lp-count.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 133[2mms[22m[39m
[31m       [31m√ó[31m should return LP count for location with inventory[39m[32m 75[2mms[22m[39m
[31m       [31m√ó[31m should return 0 for empty location[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should aggregate LP counts for parent locations[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should cache LP counts for performance[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should calculate LP counts for entire tree[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should handle mixed empty and populated locations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should calculate counts recursively up the tree[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should optimize with single DB query for entire tree[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should invalidate cache when LP is moved[39m[32m 13[2mms[22m[39m
[31m       [31m√ó[31m should invalidate parent caches when child LP count changes[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m __tests__/unit/validation/production-execution-schema.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 51[2mms[22m[39m
[31m       [31m√ó[31m should accept valid input with optional fields[39m[32m 29[2mms[22m[39m
       [32m‚úì[39m should accept input with only required fields (empty object)[32m 9[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUID for line_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid type for force[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should apply default value of false to force field[39m[32m 9[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.12.allergens-api.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | app/api/planning/work-orders/gantt/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/services/__tests__/purchase-order-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/allergen-service-v2.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/01-settings/01.12.allergens-api.test.ts [2m([22m[2m29 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 187[2mms[22m[39m
       [32m‚úì[39m should return 401 if not authenticated[32m 14[2mms[22m[39m
       [32m‚úì[39m should allow any authenticated user to view allergens[32m 1[2mms[22m[39m
       [32m‚úì[39m should return all 14 EU allergens (AC-AL-01)[32m 8[2mms[22m[39m
       [32m‚úì[39m should return allergens sorted by display_order (AC-AL-03)[32m 1[2mms[22m[39m
       [32m‚úì[39m should include all language fields (name_en, name_pl, name_de, name_fr)[32m 0[2mms[22m[39m
       [32m‚úì[39m should return allergens within 200ms (AC-AL-01)[32m 0[2mms[22m[39m
       [32m‚úì[39m should NOT filter by org_id (global reference data)[32m 1[2mms[22m[39m
       [32m‚úì[39m should return same 14 allergens for different users[32m 13[2mms[22m[39m
       [32m‚úì[39m should search by allergen code (AC-AS-03)[32m 17[2mms[22m[39m
       [32m‚úì[39m should search by English name (AC-AS-01)[32m 1[2mms[22m[39m
       [32m‚úì[39m should search by Polish name (AC-AS-02)[32m 0[2mms[22m[39m
       [32m‚úì[39m should search across all language fields (AC-AS-03)[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle case-insensitive search[32m 11[2mms[22m[39m
       [32m‚úì[39m should return empty array for no search matches[32m 0[2mms[22m[39m
       [32m‚úì[39m should complete search within 100ms (AC-AS-01)[32m 0[2mms[22m[39m
       [32m‚úì[39m should return 500 if database query fails[32m 16[2mms[22m[39m
       [32m‚úì[39m should return single allergen by ID[32m 2[2mms[22m[39m
       [32m‚úì[39m should return 404 if allergen not found[32m 0[2mms[22m[39m
       [32m‚úì[39m should return allergen with all language fields[32m 6[2mms[22m[39m
       [32m‚úì[39m should return 401 if not authenticated[32m 0[2mms[22m[39m
     [32m‚úì[39m should return 405 Method Not Allowed (AC-RO-02)[32m 0[2mms[22m[39m
     [32m‚úì[39m should return error message explaining read-only mode[32m 5[2mms[22m[39m
     [32m‚úì[39m should return 405 even for SUPER_ADMIN (AC-RO-01)[32m 8[2mms[22m[39m
     [32m‚úì[39m should return 405 Method Not Allowed[32m 1[2mms[22m[39m
     [32m‚úì[39m should return 405 even for SUPER_ADMIN[32m 0[2mms[22m[39m
     [32m‚úì[39m should return 405 Method Not Allowed[32m 0[2mms[22m[39m
     [32m‚úì[39m should return 405 even for SUPER_ADMIN[32m 0[2mms[22m[39m
     [32m‚úì[39m should validate allergen response schema[32m 8[2mms[22m[39m
[31m     [31m√ó[31m should validate code format (A01-A14)[39m[32m 44[2mms[22m[39m
 [31m‚ùØ[39m lib/services/__tests__/dashboard-service.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 142[2mms[22m[39m
       [32m‚úì[39m should group products by type (RM, WIP, FG)[32m 2[2mms[22m[39m
       [32m‚úì[39m should calculate category percentages[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should calculate overall stats[39m[32m 81[2mms[22m[39m
       [32m‚úì[39m should limit products per category[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle empty product list[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate trend this month[32m 8[2mms[22m[39m
       [32m‚úì[39m should identify created vs updated products[32m 2[2mms[22m[39m
       [32m‚úì[39m should filter by days parameter[32m 1[2mms[22m[39m
       [32m‚úì[39m should limit activity items[32m 0[2mms[22m[39m
       [32m‚úì[39m should build matrix row with allergen status[32m 16[2mms[22m[39m
       [32m‚úì[39m should filter by allergen count min[32m 1[2mms[22m[39m
       [32m‚úì[39m should filter by allergen count max[32m 1[2mms[22m[39m
       [32m‚úì[39m should filter products with allergens[32m 1[2mms[22m[39m
       [32m‚úì[39m should filter products without allergens[32m 1[2mms[22m[39m
       [32m‚úì[39m should sort by allergen_count descending[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate pagination correctly[32m 0[2mms[22m[39m
       [32m‚úì[39m should identify EU mandatory allergens[32m 0[2mms[22m[39m
       [32m‚úì[39m should identify high-risk products (5+ allergens)[32m 6[2mms[22m[39m
       [32m‚úì[39m should identify products missing declarations[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate most common allergens[32m 0[2mms[22m[39m
       [32m‚úì[39m should identify cross-contamination alerts (may_contain)[32m 0[2mms[22m[39m
       [32m‚úì[39m should limit insights to top 5[32m 0[2mms[22m[39m
 [31m‚ùØ[39m lib/services/__tests__/allergen-service-v2.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 171[2mms[22m[39m
       [32m‚úì[39m should return product count for valid allergen[32m 57[2mms[22m[39m
       [32m‚úì[39m should return unauthorized error when not authenticated[32m 1[2mms[22m[39m
       [32m‚úì[39m should return database error on RPC failure[32m 15[2mms[22m[39m
       [32m‚úì[39m should return 0 for null data[32m 8[2mms[22m[39m
       [32m‚úì[39m should return map of all allergen counts[32m 7[2mms[22m[39m
       [32m‚úì[39m should filter by allergenIds when provided[32m 1[2mms[22m[39m
       [32m‚úì[39m should return unauthorized error when not authenticated[32m 0[2mms[22m[39m
       [32m‚úì[39m should return object instead of Map[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should fetch counts from API[39m[32m 36[2mms[22m[39m
[31m       [31m√ó[31m should return empty array on API error[39m[32m 14[2mms[22m[39m
[31m       [31m√ó[31m should return empty array on fetch error[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should fetch single allergen count from API[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 0 on API error[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 0 on fetch error[39m[32m 1[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/fifo-fefo-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/lp-genealogy-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [31m‚ùØ[39m lib/services/__tests__/purchase-order-service.test.ts [2m([22m[2m41 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 176[2mms[22m[39m
       [32m‚úì[39m AC-04-1: Should calculate subtotal correctly for single line[32m 5[2mms[22m[39m
       [32m‚úì[39m AC-04-1: Should calculate subtotal correctly for multiple lines[32m 21[2mms[22m[39m
       [32m‚úì[39m AC-03-4: Should calculate discount amounts correctly[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-03-4: Should calculate line totals with multiple discounts[32m 16[2mms[22m[39m
       [32m‚úì[39m AC-04-2: Should calculate tax amount correctly[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-04-3: Should calculate grand total correctly[32m 0[2mms[22m[39m
       [32m‚úì[39m Should handle edge case: zero quantity line[32m 0[2mms[22m[39m
       [32m‚úì[39m Should handle edge case: 100% discount[32m 0[2mms[22m[39m
       [32m‚úì[39m Should handle edge case: high tax rate[32m 1[2mms[22m[39m
       [32m‚úì[39m Should handle decimal precision correctly[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should allow valid transition draft -> submitted[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should allow valid transition draft -> cancelled[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should allow valid transition submitted -> confirmed[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should allow valid transition confirmed -> receiving[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should allow valid transition receiving -> closed[32m 7[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should block invalid transition closed -> draft[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should block invalid transition closed -> anything[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-2: Should block invalid transition cancelled -> anything[32m 0[2mms[22m[39m
       [32m‚úì[39m Should allow transition submitted -> pending_approval[32m 0[2mms[22m[39m
[31m       [31m√ó[31m Should allow transition pending_approval -> confirmed[39m[32m 33[2mms[22m[39m
       [32m‚úì[39m Should allow transition confirmed -> cancelled[32m 0[2mms[22m[39m
       [32m‚úì[39m Should allow transition receiving -> cancelled[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-1: Should allow edit for draft status[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-1: Should allow edit for submitted status[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-4: Should not allow edit for confirmed status[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-05-4: Should not allow edit for receiving status[32m 0[2mms[22m[39m
       [32m‚úì[39m Should not allow edit for closed status[32m 0[2mms[22m[39m
       [32m‚úì[39m Should not allow edit for cancelled status[32m 0[2mms[22m[39m
       [32m‚úì[39m Should not allow edit for pending_approval status[32m 0[2mms[22m[39m
       [32m‚úì[39m Should allow deletion for draft PO with no receipts[32m 0[2mms[22m[39m
       [32m‚úì[39m Should block deletion for line with receipts[32m 0[2mms[22m[39m
       [32m‚úì[39m AC-02-1: Should return supplier defaults[32m 16[2mms[22m[39m
       [32m‚úì[39m Should handle supplier without tax code[32m 8[2mms[22m[39m
       [32m‚úì[39m AC-03-2: Should return supplier-product price when available[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-03-3: Should fallback to product std_price when no supplier-product price[32m 0[2mms[22m[39m
       [32m‚úì[39m Should return zero price if product not found[32m 1[2mms[22m[39m
       [32m‚úì[39m AC-02-2: Should generate PO number in format PO-YYYY-NNNNN[32m 7[2mms[22m[39m
       [32m‚úì[39m Should increment sequence for multiple POs in same year[32m 1[2mms[22m[39m
       [32m‚úì[39m Should reset sequence for new year[32m 1[2mms[22m[39m
       [32m‚úì[39m Should calculate line total: (quantity * unit_price) - discount_amount[32m 0[2mms[22m[39m
       [32m‚úì[39m Should calculate correct discount_amount[32m 0[2mms[22m[39m
 [31m‚ùØ[39m app/api/planning/work-orders/gantt/__tests__/route.test.ts [2m([22m[2m34 tests[22m[2m | [22m[31m19 failed[39m[2m)[22m[32m 73[2mms[22m[39m
[31m     [31m√ó[31m should return 401 if user is not authenticated[39m[32m 31[2mms[22m[39m
[31m     [31m√ó[31m should accept view_by query parameter[39m[32m 5[2mms[22m[39m
[31m     [31m√ó[31m should accept from_date and to_date query parameters[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should accept multiple status[] parameters[39m[32m 4[2mms[22m[39m
[31m     [31m√ó[31m should accept line_id filter[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should accept product_id filter[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should accept search parameter[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return 200 with valid response structure[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return swimlanes array in response[39m[32m 5[2mms[22m[39m
[31m     [31m√ó[31m should return date_range in response[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return filters_applied in response[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should return work_orders in each swimlane[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should include required WO fields in response[39m[32m 4[2mms[22m[39m
[31m     [31m√ó[31m should enforce RLS org isolation[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return 400 for invalid date format[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should return error code INVALID_DATE_RANGE if from > to[39m[32m 5[2mms[22m[39m
[31m     [31m√ó[31m should return error code DATE_RANGE_TOO_LARGE if > 90 days[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should apply default status filter excluding completed[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m should load within 1 second for 50 WOs, 5 lines, 7 days[39m[32m 1[2mms[22m[39m
     [32m‚úì[39m should update WO schedule and return 200[32m 5[2mms[22m[39m
     [32m‚úì[39m should return 409 Conflict if line already scheduled[32m 0[2mms[22m[39m
     [32m‚úì[39m should return 400 Bad Request for past date[32m 0[2mms[22m[39m
     [32m‚úì[39m should return 403 Forbidden if user lacks permission[32m 0[2mms[22m[39m
     [32m‚úì[39m should return 404 Not Found if WO doesn't exist[32m 0[2mms[22m[39m
     [32m‚úì[39m should return is_available=true for open slot[32m 0[2mms[22m[39m
     [32m‚úì[39m should return conflicts array when overlapping WOs exist[32m 0[2mms[22m[39m
     [32m‚úì[39m should exclude WO being dragged from conflicts[32m 0[2mms[22m[39m
     [32m‚úì[39m should calculate capacity_utilization[32m 0[2mms[22m[39m
     [32m‚úì[39m should return warnings for high capacity[32m 0[2mms[22m[39m
     [32m‚úì[39m should return PDF file with Content-Type: application/pdf[32m 0[2mms[22m[39m
     [32m‚úì[39m should include all WOs in date range[32m 0[2mms[22m[39m
     [32m‚úì[39m should respect view_by parameter (line vs machine)[32m 0[2mms[22m[39m
     [32m‚úì[39m should generate within 3 seconds for 50 WOs[32m 0[2mms[22m[39m
     [32m‚úì[39m should set proper Content-Disposition header[32m 0[2mms[22m[39m
[90mstdout[2m | components/production/__tests__/ProductionSettingsForm.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/lp-status-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/services/__tests__/routing-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | lib/services/__tests__/product-type-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | __tests__/api/warehouse/aging-report.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/api/settings/context.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/services/__tests__/warehouse-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [31m‚ùØ[39m __tests__/api/settings/context.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 114[2mms[22m[39m
[31m       [31m√ó[31m should return complete org context for authenticated admin user[39m[32m 42[2mms[22m[39m
[31m       [31m√ó[31m should return owner role context for organization owner[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return viewer role context with limited permissions[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should include onboarding state in organization[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should show completed onboarding for Org B[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated request[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent user_id[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should return 403 for inactive user[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return 403 for user in inactive organization[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should not leak organization existence via error messages[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return consistent response structure for different orgs[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return valid UUID for org_id and user_id[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return permissions as object with string values[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should include all required organization fields[39m[32m 16[2mms[22m[39m
[31m       [31m√ó[31m should respond within 100ms[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should use single database query (no N+1)[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle user with null optional fields[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle organization with null logo_url[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle different timezones correctly[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle different currencies correctly[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should set appropriate cache headers[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should support multiple concurrent requests[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m __tests__/api/warehouse/aging-report.test.ts [2m([22m[2m10 tests[22m[2m | [22m[33m10 skipped[39m[2m)[22m[32m 73[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should calculate aging buckets by created_at
       [2m[90m‚Üì[39m[22m should aggregate summary correctly
       [2m[90m‚Üì[39m[22m should calculate aging buckets by expiry_date
       [2m[90m‚Üì[39m[22m should only include LPs with expiry_date
       [2m[90m‚Üì[39m[22m should filter by warehouse_id
       [2m[90m‚Üì[39m[22m should enforce limit parameter
       [2m[90m‚Üì[39m[22m should only return LPs from same org
       [2m[90m‚Üì[39m[22m should return top N oldest LPs in FIFO mode
       [2m[90m‚Üì[39m[22m should return top N soonest expiring LPs in FEFO mode
       [2m[90m‚Üì[39m[22m should correctly categorize days into buckets
[90mstdout[2m | lib/services/__tests__/transfer-order-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/work-order-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | __tests__/unit/services/production-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/services/__tests__/warehouse-settings-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | __tests__/unit/components/dashboard/ActiveWOsTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | app/api/shipping/shipments/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | __tests__/integration/api/production/settings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/unit/components/dashboard/KPICard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/shipping/pick-lists/__tests__/WavePickingPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | components/settings/onboarding/__tests__/TimezoneSelect.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/settings/users/__tests__/UserModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | app/(authenticated)/shipping/sales-orders/__tests__/SOLinePricingFields.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/shipping/pick-lists/__tests__/PickListModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | components/planning/purchase-orders/__tests__/TaxBreakdownTooltip.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/components/shipping/customers/CustomerModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m components/planning/purchase-orders/__tests__/TaxBreakdownTooltip.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 22088[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render tooltip trigger button [33m 1739[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show tooltip content on hover [33m 2217[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display all tax rates in tooltip [33m 1935[2mms[22m[39m
       [33m[2m‚úì[22m[39m should format currency values correctly [33m 1611[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show total tax when multiple rates [33m 1769[2mms[22m[39m
       [33m[2m‚úì[22m[39m should sort rates in descending order [33m 1668[2mms[22m[39m
       [33m[2m‚úì[22m[39m should not show total line for single rate [33m 1434[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error message in tooltip [33m 1481[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show retry button when onRetry is provided [33m 1604[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRetry when retry button is clicked [33m 1927[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show empty message when taxBreakdown is empty [33m 1208[2mms[22m[39m
       [33m[2m‚úì[22m[39m should format whole number percentages without decimals [33m 1582[2mms[22m[39m
       [33m[2m‚úì[22m[39m should format decimal percentages with 2 places [33m 1539[2mms[22m[39m
[90mstdout[2m | components/production/consumption/__tests__/ReverseConsumptionModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/components/shipping/customers/CustomerModal.test.tsx [2m([22m[2m38 tests[22m[2m)[22m[33m 43098[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show "Create Customer" title [33m 2080[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have editable customer_code field [33m 677[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have empty form fields [33m 577[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "Create" submit button [33m 841[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show "Edit Customer" title [33m 603[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have readonly/disabled customer_code field [33m 506[2mms[22m[39m
       [33m[2m‚úì[22m[39m should populate form with existing data [33m 405[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show selected allergens as chips [33m 360[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "Save" submit button [33m 929[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show metadata (created_at, created_by) [33m 459[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have customer_code input [33m 402[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have name input [33m 439[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have category select [33m 398[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have email input [33m 426[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have phone input [33m 390[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have tax_id input with encrypted hint [33m 428[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have credit_limit input [33m 353[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have payment_terms_days input [33m 563[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have notes textarea [33m 339[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when customer_code is empty [33m 1333[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for invalid customer_code format [33m 2011[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when name is empty [33m 1651[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when category not selected [33m 2305[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for invalid email format [33m 1749[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for payment_terms > 365 [33m 2077[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for negative credit_limit [33m 1362[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open dropdown when clicked [33m 3138[2mms[22m[39m
       [33m[2m‚úì[22m[39m should add allergen chip when selected [33m 2761[2mms[22m[39m
       [33m[2m‚úì[22m[39m should remove allergen chip when X clicked [33m 1008[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show warning when allergens selected [33m 2159[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onSubmit with form data [33m 2843[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when Cancel clicked [33m 775[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading state during submission [33m 2789[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable submit button during submission [33m 3047[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when clicking backdrop [33m 406[2mms[22m[39m
[90mstdout[2m | components/technical/bom/__tests__/BOMItemModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [31m‚ùØ[39m app/(authenticated)/shipping/sales-orders/__tests__/SOLinePricingFields.test.tsx [2m([22m[2m30 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 47542[2mms[22m[39m
[31m       [31m√ó[31m should auto-populate unit_price when product is selected[39m[33m 5304[2mms[22m[39m
       [33m[2m‚úì[22m[39m should keep unit_price field editable after auto-population [33m 3897[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show warning when product has no standard price [33m 2839[2mms[22m[39m
       [33m[2m‚úì[22m[39m should default unit_price to 0 when product has no std_price [33m 2426[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow manual entry when product has no price [33m 3239[2mms[22m[39m
       [33m[2m‚úì[22m[39m should calculate line total as quantity * unit_price [33m 1847[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update line total in real-time as user types [33m 2803[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onLineChange callback with calculated total [33m 1325[2mms[22m[39m
[31m       [31m√ó[31m should update line total when discount is applied[39m[33m 5240[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when discount value is negative [33m 2338[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when percentage discount exceeds 100 [33m 2309[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept percentage discount of exactly 100 [33m 2290[2mms[22m[39m
       [33m[2m‚úì[22m[39m should NOT apply 100% cap to fixed discount [33m 2018[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange with discount object [33m 2206[2mms[22m[39m
       [33m[2m‚úì[22m[39m should clear discount when type set to None [33m 2039[2mms[22m[39m
     [32m‚úì[39m should render pricing columns[32m 111[2mms[22m[39m
     [32m‚úì[39m should format currency values correctly[32m 43[2mms[22m[39m
     [32m‚úì[39m should display discount type and value[32m 72[2mms[22m[39m
     [32m‚úì[39m should show dash for lines without discount[32m 234[2mms[22m[39m
     [32m‚úì[39m should display calculated total from lines[32m 7[2mms[22m[39m
     [32m‚úì[39m should format total with currency symbol[32m 9[2mms[22m[39m
     [32m‚úì[39m should handle empty lines array[32m 3[2mms[22m[39m
     [32m‚úì[39m should handle null line_total values[32m 6[2mms[22m[39m
     [32m‚úì[39m should update when lines change[32m 13[2mms[22m[39m
     [32m‚úì[39m should be prominently displayed[32m 4[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show error when unit_price is 0 [33m 459[2mms[22m[39m
     [32m‚úì[39m should show error when unit_price is negative[32m 279[2mms[22m[39m
     [32m‚úì[39m should disable save button when validation fails[32m 298[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onLineSave with form data on save [33m 1330[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show loading state while saving [33m 2525[2mms[22m[39m
[90mstdout[2m | components/shipping/pick-confirmation/__tests__/PickConfirmationModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [31m‚ùØ[39m components/settings/users/__tests__/UserModal.test.tsx [2m([22m[2m33 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 54299[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render modal with title "Add User" [33m 3187[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display all required form fields [33m 970[2mms[22m[39m
     [33m[2m‚úì[22m[39m should NOT display warehouse access field in MVP [33m 962[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display empty form fields in create mode [33m 884[2mms[22m[39m
     [33m[2m‚úì[22m[39m should enable email field in create mode [33m 859[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display role dropdown with 10 system roles [33m 673[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display language dropdown with 4 options [33m 838[2mms[22m[39m
     [33m[2m‚úì[22m[39m should default language to "en" [33m 553[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display Create User button [33m 984[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display Cancel button [33m 932[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onClose when Cancel clicked [33m 1049[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render modal with title "Edit User" [33m 822[2mms[22m[39m
     [33m[2m‚úì[22m[39m should pre-populate email field [33m 689[2mms[22m[39m
     [33m[2m‚úì[22m[39m should disable email field in edit mode [33m 737[2mms[22m[39m
     [33m[2m‚úì[22m[39m should pre-populate first name field [33m 633[2mms[22m[39m
     [33m[2m‚úì[22m[39m should pre-populate last name field [33m 684[2mms[22m[39m
     [33m[2m‚úì[22m[39m should pre-select current role [33m 627[2mms[22m[39m
     [33m[2m‚úì[22m[39m should pre-select current language [33m 720[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display Save Changes button [33m 663[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show error when email is empty [33m 1296[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show error when email format is invalid [33m 3148[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show error when first name is empty [33m 1137[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show error when last name is empty [33m 1503[2mms[22m[39m
[31m     [31m√ó[31m should show error when role is not selected[39m[33m 5117[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show error when first name exceeds 100 characters [33m 1725[2mms[22m[39m
[31m     [31m√ó[31m should clear validation errors when user starts typing[39m[33m 2370[2mms[22m[39m
[31m     [31m√ó[31m should submit valid form data in create mode[39m[33m 5114[2mms[22m[39m
[31m     [31m√ó[31m should show duplicate email error inline[39m[33m 5165[2mms[22m[39m
     [33m[2m‚úì[22m[39m should submit updated data in edit mode [33m 3175[2mms[22m[39m
[31m     [31m√ó[31m should disable submit button while submitting[39m[33m 4479[2mms[22m[39m
     [33m[2m‚úì[22m[39m should have proper ARIA labels on all fields [33m 1253[2mms[22m[39m
     [33m[2m‚úì[22m[39m should trap focus within modal [33m 627[2mms[22m[39m
     [33m[2m‚úì[22m[39m should close on Escape key [33m 681[2mms[22m[39m
[90mstdout[2m | app/(authenticated)/shipping/packing/components/__tests__/PackingModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m components/shipping/pick-lists/__tests__/PickListModal.test.tsx [2m([22m[2m35 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 55846[2mms[22m[39m
       [33m[2m‚úì[22m[39m renders modal with title when open [33m 2727[2mms[22m[39m
       [32m‚úì[39m does not render when closed[32m 20[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays SO selection table [33m 942[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays priority selector [33m 795[2mms[22m[39m
       [33m[2m‚úì[22m[39m displays optional picker assignment selector [33m 805[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows selecting single SO [33m 1638[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows selecting multiple SOs [33m 2085[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows "Select All" checkbox [33m 1490[2mms[22m[39m
       [33m[2m‚úì[22m[39m updates pick type preview based on selection count [33m 2023[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows total line count in preview [33m 1968[2mms[22m[39m
       [33m[2m‚úì[22m[39m filters SOs by search term [33m 1557[2mms[22m[39m
       [33m[2m‚úì[22m[39m defaults to "normal" priority [33m 719[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows selecting different priorities [33m 2893[2mms[22m[39m
       [33m[2m‚úì[22m[39m has all priority options: low, normal, high, urgent [33m 3263[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows "Unassigned" as default option [33m 775[2mms[22m[39m
       [33m[2m‚úì[22m[39m lists available pickers in dropdown [33m 2115[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows selecting a picker [33m 3224[2mms[22m[39m
       [33m[2m‚úì[22m[39m picker is optional - can submit without picker [33m 2126[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows preview when SO selected [33m 1284[2mms[22m[39m
       [33m[2m‚úì[22m[39m hides preview when no SO selected [33m 465[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows pick type: "Single Order" for 1 SO [33m 1401[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows pick type: "Wave" for 2+ SOs [33m 1815[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows warning for >10 SOs [33m 2308[2mms[22m[39m
       [33m[2m‚úì[22m[39m disables Create button when no SO selected [33m 690[2mms[22m[39m
       [33m[2m‚úì[22m[39m enables Create button when SO selected [33m 1455[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows error for SO without allocations [33m 1873[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onSubmit with correct data [33m 1623[2mms[22m[39m
       [33m[2m‚úì[22m[39m includes selected priority in submission [33m 1581[2mms[22m[39m
       [33m[2m‚úì[22m[39m includes assigned picker if selected [33m 2962[2mms[22m[39m
[31m       [31m√ó[31m shows loading state during submission[39m[33m 2150[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onClose after successful submission [33m 2063[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onClose when Cancel clicked [33m 993[2mms[22m[39m
       [33m[2m‚úì[22m[39m has proper form labels [33m 710[2mms[22m[39m
       [33m[2m‚úì[22m[39m has dialog role [33m 594[2mms[22m[39m
       [33m[2m‚úì[22m[39m has aria-modal attribute [33m 666[2mms[22m[39m
[90mstdout[2m | components/quality/__tests__/StatusTransitionModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m components/production/consumption/__tests__/ReverseConsumptionModal.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 36537[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open is true [33m 2366[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render consumption details correctly [33m 951[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display warning message about reversal effects [33m 468[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display all 5 reversal reason options [33m 2295[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show "Reason for Reversal" as required field [33m 450[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable confirm button until reason is selected [33m 772[2mms[22m[39m
       [33m[2m‚úì[22m[39m should enable confirm button when reason is selected (not other) [33m 2484[2mms[22m[39m
       [33m[2m‚úì[22m[39m should require notes when reason is "other" [33m 2237[2mms[22m[39m
       [33m[2m‚úì[22m[39m should enable confirm button when reason is "other" and notes provided [33m 4758[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show required indicator on notes when reason is "other" [33m 1115[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update character count when typing notes [33m 1893[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onSuccess callback on successful reversal [33m 2964[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose callback on successful reversal [33m 2813[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display error message on failure [33m 2533[2mms[22m[39m
       [33m[2m‚úì[22m[39m should reset form state when modal closes [33m 4833[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading spinner during submission [33m 617[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable all inputs during submission [33m 481[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable cancel button during submission [33m 413[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when Cancel button clicked [33m 591[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when X button clicked [33m 409[2mms[22m[39m
       [33m[2m‚úì[22m[39m should not call onSuccess when cancelled [33m 370[2mms[22m[39m
[90mstdout[2m | __tests__/components/warehouse/inventory/adjustments-tab.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/shipping/pick-lists/__tests__/WavePickingPanel.test.tsx [2m([22m[2m42 tests[22m[2m)[22m[33m 72669[2mms[22m[39m
       [33m[2m‚úì[22m[39m renders panel with wizard title [33m 793[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows 3-step indicator [33m 310[2mms[22m[39m
       [33m[2m‚úì[22m[39m starts at Step 1 by default [33m 1187[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows Back, Next, Cancel buttons [33m 1907[2mms[22m[39m
       [33m[2m‚úì[22m[39m disables Back button on Step 1 [33m 768[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows multi-select with checkboxes [33m 1778[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows "Select All" option [33m 1090[2mms[22m[39m
       [33m[2m‚úì[22m[39m filters SOs by customer search [33m 687[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows total lines count for selection [33m 1335[2mms[22m[39m
       [33m[2m‚úì[22m[39m requires at least 2 SOs for wave picking [33m 1305[2mms[22m[39m
       [33m[2m‚úì[22m[39m enables Next when 2+ SOs selected [33m 1933[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows warning when >10 SOs selected [33m 1808[2mms[22m[39m
       [33m[2m‚úì[22m[39m navigates to Step 2 on Next click [33m 2522[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows Zone-based strategy option [33m 2112[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows Route-based strategy option [33m 2145[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows FIFO strategy option [33m 2570[2mms[22m[39m
       [33m[2m‚úì[22m[39m defaults to Zone-based strategy [33m 2282[2mms[22m[39m
       [33m[2m‚úì[22m[39m allows selecting different strategy [33m 2947[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows priority selector [33m 2614[2mms[22m[39m
       [33m[2m‚úì[22m[39m enables Back button on Step 2 [33m 2681[2mms[22m[39m
       [33m[2m‚úì[22m[39m returns to Step 1 on Back click [33m 3102[2mms[22m[39m
       [33m[2m‚úì[22m[39m navigates to Step 3 on Next click from Step 2 [33m 2663[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows summary of selected SOs [33m 2530[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows selected strategy [33m 2731[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows selected priority [33m 1326[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows consolidated lines preview table when provided [33m 893[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows consolidation stats when provided [33m 1998[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows pick sequence in preview [33m 2855[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows source SO count per line [33m 2891[2mms[22m[39m
       [33m[2m‚úì[22m[39m changes Next button to Create on Step 3 [33m 3543[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onSubmit with correct data [33m 3512[2mms[22m[39m
       [33m[2m‚úì[22m[39m includes selected strategy in submission [33m 3736[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows loading state during submission [33m 1433[2mms[22m[39m
       [33m[2m‚úì[22m[39m disables buttons during submission [33m 1205[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows error message on submission failure [33m 1378[2mms[22m[39m
       [33m[2m‚úì[22m[39m shows confirmation if selections made [33m 427[2mms[22m[39m
       [33m[2m‚úì[22m[39m has proper focus management between steps [33m 515[2mms[22m[39m
       [33m[2m‚úì[22m[39m has proper form labels [33m 476[2mms[22m[39m
[90mstdout[2m | components/settings/__tests__/POApprovalSettings.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m components/technical/bom/__tests__/BOMItemModal.test.tsx [2m([22m[2m37 tests[22m[2m)[22m[33m 22028[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open in create mode with empty form [33m 3300[2mms[22m[39m
       [33m[2m‚úì[22m[39m should pre-fill sequence with default value [33m 1186[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have empty product selector initially [33m 1222[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show Save Item button in create mode [33m 1174[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open in edit mode with pre-populated data [33m 1308[2mms[22m[39m
       [33m[2m‚úì[22m[39m should pre-fill quantity field [33m 858[2mms[22m[39m
       [33m[2m‚úì[22m[39m should pre-fill sequence field [33m 837[2mms[22m[39m
       [33m[2m‚úì[22m[39m should pre-fill scrap percent field [33m 946[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable product selector in edit mode [33m 1046[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show Save Changes button in edit mode [33m 939[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have quantity input [33m 645[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have UoM field (read-only) [33m 439[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have sequence input [33m 320[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have notes textarea [33m 321[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show operations dropdown when routing assigned [33m 358[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for empty quantity on submit [33m 499[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for zero quantity [33m 967[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for negative quantity [33m 706[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow up to 6 decimal places [33m 758[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when Cancel clicked [33m 349[2mms[22m[39m
       [33m[2m‚úì[22m[39m should support keyboard navigation [33m 305[2mms[22m[39m
       [33m[2m‚úì[22m[39m should reset form when switching between create and edit [33m 487[2mms[22m[39m
 [32m‚úì[39m app/(authenticated)/shipping/packing/components/__tests__/PackingModal.test.tsx [2m([22m[2m37 tests[22m[2m)[22m[33m 14385[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render loading skeleton while fetching data [33m 1813[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display 3-column grid layout [33m 837[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display LPSelector in left column [33m 683[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display BoxBuilder in center column [33m 528[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display PackingSummary in right column [33m 454[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display available LPs list [33m 314[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow search by LP number [33m 811[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow filter by product [33m 525[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show Add Box button [33m 332[2mms[22m[39m
       [33m[2m‚úì[22m[39m should create new box on Add Box click [33m 808[2mms[22m[39m
       [33m[2m‚úì[22m[39m should switch active box on tab click [33m 445[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show weight input for active box [33m 304[2mms[22m[39m
       [33m[2m‚úì[22m[39m should validate weight > 0 [33m 413[2mms[22m[39m
       [33m[2m‚úì[22m[39m should validate weight <= 25kg [33m 435[2mms[22m[39m
       [33m[2m‚úì[22m[39m should validate dimensions 10-200cm [33m 404[2mms[22m[39m
       [33m[2m‚úì[22m[39m should add LP to active box on selection [33m 575[2mms[22m[39m
       [33m[2m‚úì[22m[39m should remove LP from available list after adding [33m 497[2mms[22m[39m
       [33m[2m‚úì[22m[39m should capture lot_number when adding LP [33m 488[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show Complete Packing button [33m 338[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable Complete button if not all LPs packed [33m 487[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable Complete button if boxes missing weight [33m 338[2mms[22m[39m
       [33m[2m‚úì[22m[39m should complete packing on button click [33m 625[2mms[22m[39m
[90mstdout[2m | components/planning/purchase-orders/__tests__/POApprovalModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m components/shipping/pick-confirmation/__tests__/PickConfirmationModal.test.tsx [2m([22m[2m87 tests[22m[2m)[22m[33m 18669[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when isOpen is true [33m 2430[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display "Short Pick Detected" header [33m 891[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display product name and SKU [33m 730[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display required quantity [33m 450[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display available quantity [33m 500[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display short quantity (difference) [33m 476[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display backorder info message [33m 528[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display reason dropdown [33m 583[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "insufficient_inventory" option [33m 1045[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "damaged" option [33m 659[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "expired" option [33m 609[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "location_empty" option [33m 508[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "quality_hold" option [33m 348[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have "other" option [33m 479[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update selected reason on change [33m 1341[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept notes input [33m 960[2mms[22m[39m
       [33m[2m‚úì[22m[39m should enable Confirm button when reason selected [33m 641[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onConfirm with reason and notes [33m 729[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading spinner when submitting [33m 678[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable buttons while submitting [33m 896[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onShortPick with quantity [33m 305[2mms[22m[39m
 [32m‚úì[39m components/quality/__tests__/StatusTransitionModal.test.tsx [2m([22m[2m24 tests[22m[2m)[22m[33m 13594[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open is true [33m 1748[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onOpenChange when Cancel clicked [33m 470[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display all valid transitions as radio options [33m 744[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show character count [33m 1062[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call API on valid form submission [33m 3266[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show success state after successful submission [33m 3973[2mms[22m[39m
[90mstdout[2m | components/shipping/__tests__/AllergenValidationWarning.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | __tests__/components/production/reservations/WOReservationsPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | __tests__/components/production/reservations/AvailableLPsPicker.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m components/planning/purchase-orders/__tests__/POApprovalModal.test.tsx [2m([22m[2m33 tests[22m[2m)[22m[33m 5024[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open is true [33m 326[2mms[22m[39m
 [32m‚úì[39m __tests__/components/warehouse/inventory/adjustments-tab.test.tsx [2m([22m[2m33 tests[22m[2m)[22m[33m 10073[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders loading state with skeletons [33m 334[2mms[22m[39m
     [33m[2m‚úì[22m[39m requires minimum 10 characters for rejection reason [33m 2629[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows validation error on blur [33m 399[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onConfirm with reason when confirm clicked [33m 2577[2mms[22m[39m
     [33m[2m‚úì[22m[39m opens approve dialog when approve clicked [33m 480[2mms[22m[39m
     [33m[2m‚úì[22m[39m opens reject dialog when reject clicked [33m 370[2mms[22m[39m
     [33m[2m‚úì[22m[39m filters by status when filter changed [33m 725[2mms[22m[39m
 [32m‚úì[39m components/settings/__tests__/POApprovalSettings.test.tsx [2m([22m[2m30 tests[22m[2m)[22m[33m 8890[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display toggle OFF when approval disabled [33m 396[2mms[22m[39m
       [33m[2m‚úì[22m[39m should keep roles dropdown always enabled [33m 328[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept valid decimal threshold [33m 303[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display currency formatting on blur [33m 301[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display all available roles in dropdown [33m 874[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show checkboxes for each role [33m 846[2mms[22m[39m
       [33m[2m‚úì[22m[39m should select role when checkbox clicked [33m 770[2mms[22m[39m
       [33m[2m‚úì[22m[39m should deselect role when checkbox clicked again [33m 754[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when all roles deselected [33m 626[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onSave with form data when Save clicked [33m 312[2mms[22m[39m
       [33m[2m‚úì[22m[39m should not call onSave if form invalid [33m 832[2mms[22m[39m
[90mstdout[2m | components/scanner/shipping/pack/__tests__/ScannerPackWizard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | __tests__/components/shipping/customers/CustomerDataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [31m‚ùØ[39m components/settings/onboarding/__tests__/TimezoneSelect.test.tsx [2m([22m[2m33 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 86546[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render timezone select button [33m 1350[2mms[22m[39m
       [32m‚úì[39m should show placeholder when no value selected[32m 147[2mms[22m[39m
       [32m‚úì[39m should display selected timezone value[32m 122[2mms[22m[39m
       [32m‚úì[39m should render chevron icon[32m 285[2mms[22m[39m
       [32m‚úì[39m should load IANA timezones on mount[32m 191[2mms[22m[39m
[31m       [31m√ó[31m should group timezones by region[39m[33m 5242[2mms[22m[39m
[31m       [31m√ó[31m should display multiple timezones in list[39m[33m 13699[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show search input when dropdown opened [33m 3699[2mms[22m[39m
       [33m[2m‚úì[22m[39m should filter timezones when searching for "war" [33m 3991[2mms[22m[39m
       [33m[2m‚úì[22m[39m should filter timezones when searching for "new_york" [33m 4617[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show "No timezone found" when search has no matches [33m 4358[2mms[22m[39m
       [33m[2m‚úì[22m[39m should be case-insensitive in search [33m 3687[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onValueChange when timezone selected [33m 4986[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close dropdown after selection [33m 2124[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update displayed value after selection [33m 3958[2mms[22m[39m
[31m       [31m√ó[31m should show checkmark icon for selected timezone[39m[33m 15728[2mms[22m[39m
       [33m[2m‚úì[22m[39m should hide checkmark for unselected timezones [33m 1084[2mms[22m[39m
       [32m‚úì[39m should have combobox role[32m 47[2mms[22m[39m
       [32m‚úì[39m should have aria-expanded attribute[32m 45[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update aria-expanded when opened [33m 968[2mms[22m[39m
       [32m‚úì[39m should have aria-label for accessibility[32m 83[2mms[22m[39m
       [32m‚úì[39m should support keyboard navigation with Tab[32m 133[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open dropdown with Enter key [33m 1004[2mms[22m[39m
       [33m[2m‚úì[22m[39m should support keyboard navigation in dropdown [33m 1069[2mms[22m[39m
       [32m‚úì[39m should handle empty value prop[32m 40[2mms[22m[39m
       [32m‚úì[39m should handle fallback timezones in older browsers[32m 20[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display UTC timezone correctly [33m 749[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle rapid dropdown open/close [33m 2081[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle timezone with underscores [33m 1117[2mms[22m[39m
       [33m[2m‚úì[22m[39m should scroll to selected timezone when dropdown opens [33m 4283[2mms[22m[39m
       [32m‚úì[39m should have loading state (implicit via useMemo)[32m 66[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have empty state when no timezones match search [33m 1209[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have success state when timezone selected [33m 4362[2mms[22m[39m
[90mstdout[2m | app/(authenticated)/shipping/shipments/[id]/components/__tests__/ShipmentManifestModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/components/shipping/customers/CustomerDataTable.test.tsx [2m([22m[2m28 tests[22m[2m)[22m[33m 1844[2mms[22m[39m
 [32m‚úì[39m components/shipping/__tests__/AllergenValidationWarning.test.tsx [2m([22m[2m83 tests[22m[2m)[22m[33m 7453[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update character count as user types [33m 903[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when reason is less than 20 characters after blur [33m 418[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept reason with exactly 20 characters [33m 331[2mms[22m[39m
 [32m‚úì[39m __tests__/components/production/reservations/WOReservationsPanel.test.tsx [2m([22m[2m38 tests[22m[2m)[22m[33m 7023[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open reserve modal when Reserve button clicked [33m 627[2mms[22m[39m
       [33m[2m‚úì[22m[39m should expand to show reserved LPs list when arrow clicked [33m 372[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display LP number in expanded row [33m 365[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display lot number in expanded row [33m 359[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display expiry date in expanded row [33m 350[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display location in expanded row [33m 303[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display reserved and consumed qty per LP [33m 358[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display reserved_by user name and date [33m 355[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display Release button for active reservations [33m 361[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call release mutation when Release button clicked [33m 648[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display total reserved at bottom of expanded section [33m 402[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display total consumed [33m 344[2mms[22m[39m
[90mstdout[2m | components/production/operations/__tests__/CompleteOperationModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/components/production/reservations/AvailableLPsPicker.test.tsx [2m([22m[2m55 tests[22m[2m)[22m[33m 7293[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display LP number column [33m 306[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onQuantityChange when input changes [33m 392[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show validation error when qty > available [33m 440[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.3.onboarding-wizard-launcher.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | components/shipping/labels/__tests__/LabelPreview.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | __tests__/api/warehouse/settings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/warehouse/license-plates/detail/__tests__/LPDetailComponents.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m __tests__/01-settings/01.3.onboarding-wizard-launcher.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[33m 2156[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display wizard modal when onboarding_step = 0 [33m 581[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open skip confirmation dialog when "Skip Onboarding" clicked [33m 568[2mms[22m[39m
 [32m‚úì[39m components/scanner/shipping/pack/__tests__/ScannerPackWizard.test.tsx [2m([22m[2m64 tests[22m[2m)[22m[33m 7529[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onCancel when cancel button clicked [33m 316[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onItemScanned when valid LP scanned [33m 877[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show success animation on valid scan [33m 308[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show allergen warning when LP has allergens [33m 332[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display number pad [33m 1175[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update quantity on number pad click [33m 583[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have quick adjust buttons (+1, -1, +10, -10) [33m 512[2mms[22m[39m
 [32m‚úì[39m __tests__/api/warehouse/settings.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 4033[2mms[22m[39m
       [33m[2m‚úì[22m[39m should return warehouse settings with defaults (AC-13) [33m 532[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update updated_at timestamp automatically [33m 311[2mms[22m[39m
       [33m[2m‚úì[22m[39m should return audit trail after updates (AC-14) [33m 365[2mms[22m[39m
       [33m[2m‚úì[22m[39m should isolate settings by org_id [33m 414[2mms[22m[39m
[90mstdout[2m | components/scanner/shipping/pick/__tests__/ScannerPickWizard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | app/(authenticated)/production/work-orders/[id]/components/__tests__/WOPauseButton.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/components/warehouse/inventory/expiring-items-tab.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m components/production/operations/__tests__/CompleteOperationModal.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[33m 10142[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal title with operation name [33m 599[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept yield at boundary values (0 and 100) [33m 503[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update character count as user types [33m 473[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onComplete with yield and notes on submit [33m 1130[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable buttons while submitting [33m 366[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose on successful submit [33m 353[2mms[22m[39m
       [33m[2m‚úì[22m[39m should keep modal open on error [33m 304[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when Cancel clicked [33m 525[2mms[22m[39m
       [33m[2m‚úì[22m[39m should reset form when modal reopens [33m 748[2mms[22m[39m
       [33m[2m‚úì[22m[39m should submit on Enter key (non-shift) [33m 827[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show started time [33m 484[2mms[22m[39m
 [32m‚úì[39m app/(authenticated)/shipping/shipments/[id]/components/__tests__/ShipmentManifestModal.test.tsx [2m([22m[2m81 tests[22m[2m)[22m[33m 9435[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display Manifest button [33m 444[2mms[22m[39m
       [33m[2m‚úì[22m[39m should enable Ship button when checkbox checked [33m 358[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onConfirm when Ship Shipment clicked [33m 357[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading text on Ship button when loading [33m 314[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable both buttons when loading [33m 907[2mms[22m[39m
       [33m[2m‚úì[22m[39m should disable checkbox when loading [33m 629[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close dialog on Escape key [33m 383[2mms[22m[39m
       [33m[2m‚úì[22m[39m should focus Cancel button by default [33m 594[2mms[22m[39m
 [32m‚úì[39m components/shipping/labels/__tests__/LabelPreview.test.tsx [2m([22m[2m96 tests[22m[2m)[22m[33m 10172[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show count on Print All button [33m 720[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onGenerateAll when clicked [33m 601[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onPrintAll when clicked [33m 586[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have Preview button per row [33m 673[2mms[22m[39m
 [32m‚úì[39m components/warehouse/license-plates/detail/__tests__/LPDetailComponents.test.tsx [2m([22m[2m46 tests[22m[2m)[22m[33m 5678[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open [33m 686[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show validation error when reason exceeds 500 chars [33m 1070[2mms[22m[39m
       [33m[2m‚úì[22m[39m should submit with valid reason [33m 1157[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onClose when Cancel clicked [33m 309[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show character count [33m 551[2mms[22m[39m
[90mstdout[2m | components/technical/products/__tests__/ProductsDataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | components/planning/work-orders/reservations/__tests__/ReservedLPsList.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | app/(authenticated)/shipping/shipments/components/__tests__/PackListTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | components/planning/work-orders/reservations/__tests__/AvailableLPsTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m __tests__/components/warehouse/inventory/expiring-items-tab.test.tsx [2m([22m[2m35 tests[22m[2m)[22m[33m 6578[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onDaysChange when slider changes [33m 822[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onTierClick when card is clicked [33m 439[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onAction with correct action type [33m 435[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders table with data [33m 366[2mms[22m[39m
     [33m[2m‚úì[22m[39m applies correct row colors based on tier [33m 464[2mms[22m[39m
     [33m[2m‚úì[22m[39m selects item when checkbox clicked [33m 513[2mms[22m[39m
     [33m[2m‚úì[22m[39m selects all items when select all checkbox clicked [33m 499[2mms[22m[39m
     [33m[2m‚úì[22m[39m deselects all when all selected and select all clicked [33m 626[2mms[22m[39m
 [32m‚úì[39m components/scanner/shipping/pick/__tests__/ScannerPickWizard.test.tsx [2m([22m[2m81 tests[22m[2m)[22m[33m 11438[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show settings button [33m 1066[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show Start button for assigned picks [33m 683[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onScan on Enter key [33m 358[2mms[22m[39m
     [33m[2m‚úì[22m[39m should clear field after scan [33m 324[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render digits 0-9 [33m 1941[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render clear button [33m 450[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render backspace button [33m 328[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onChange when digit pressed [33m 432[2mms[22m[39m
     [33m[2m‚úì[22m[39m should clear on C button press [33m 326[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onConfirm with data when confirmed [33m 753[2mms[22m[39m
 [32m‚úì[39m app/(authenticated)/production/work-orders/[id]/components/__tests__/WOPauseButton.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[33m 10307[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render when isPauseEnabled=true and status=in_progress [33m 1567[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open modal when button clicked [33m 627[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show work order number in modal [33m 453[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close modal on cancel [33m 960[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onPauseSuccess after successful pause [33m 3122[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onPauseError on API failure [33m 1833[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show tooltip on disabled button hover [33m 1028[2mms[22m[39m
[90mstdout[2m | components/technical/bom/__tests__/BOMComparisonModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | __tests__/components/production/ByProductsSection.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/quality/__tests__/StatusHistoryTimeline.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/planning/work-orders/reservations/__tests__/ReservedLPsList.test.tsx [2m([22m[2m39 tests[22m[2m)[22m[33m 7411[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display retry button [33m 622[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open confirmation dialog when release clicked [33m 516[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display LP number in confirmation [33m 541[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display quantity in confirmation [33m 532[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close dialog when Cancel clicked [33m 847[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRelease when confirmed [33m 722[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have table headers [33m 331[2mms[22m[39m
 [32m‚úì[39m app/(authenticated)/shipping/shipments/components/__tests__/PackListTable.test.tsx [2m([22m[2m46 tests[22m[2m)[22m[33m 8031[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render table with correct columns [33m 883[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display "-" for null SSCC [33m 363[2mms[22m[39m
       [33m[2m‚úì[22m[39m should expand row to show contents on click [33m 584[2mms[22m[39m
       [33m[2m‚úì[22m[39m should collapse expanded row on second click [33m 410[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onDeleteBox when delete clicked [33m 306[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow sorting by weight [33m 416[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show all columns on desktop [33m 360[2mms[22m[39m
       [33m[2m‚úì[22m[39m should update aria-expanded when expanded [33m 334[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render table with correct columns [33m 455[2mms[22m[39m
 [32m‚úì[39m components/planning/work-orders/reservations/__tests__/AvailableLPsTable.test.tsx [2m([22m[2m34 tests[22m[2m)[22m[33m 7763[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display LP count in header [33m 761[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onSelect when checkbox clicked [33m 328[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show selected row highlighted [33m 355[2mms[22m[39m
       [33m[2m‚úì[22m[39m should check checkbox for selected LPs [33m 330[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have accessible aria-label on checkboxes [33m 383[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show quantity input for selected LPs [33m 307[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onQuantityChange when quantity changed [33m 532[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have column headers [33m 537[2mms[22m[39m
 [32m‚úì[39m components/technical/products/__tests__/ProductsDataTable.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 8494[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render skeleton when loading [33m 1000[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show create CTA in empty state [33m 330[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show retry button in error state [33m 360[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle search input [33m 898[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle type filter change [33m 2031[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle status filter change [33m 1260[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle page change [33m 301[2mms[22m[39m
[90mstdout[2m | components/technical/routings/__tests__/CloneRoutingModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | components/settings/users/__tests__/UsersDataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | components/scanner/shared/__tests__/NumberPad.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m components/quality/__tests__/StatusHistoryTimeline.test.tsx [2m([22m[2m38 tests[22m[2m)[22m[33m 3503[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRetry when retry button clicked [33m 604[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show all entries when "View more" clicked [33m 338[2mms[22m[39m
       [33m[2m‚úì[22m[39m should collapse back when "Show less" clicked [33m 431[2mms[22m[39m
[90mstdout[2m | components/planning/purchase-orders/__tests__/POTotalsSection.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/technical/routings/__tests__/CloneRoutingModal.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2464[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display source routing info (read-only, AC-19) [33m 942[2mms[22m[39m
     [33m[2m‚úì[22m[39m should clone routing with operations on submit (AC-20) [33m 395[2mms[22m[39m
     [33m[2m‚úì[22m[39m should validate unique name for clone [33m 330[2mms[22m[39m
[90mstdout[2m | components/technical/bom/__tests__/BOMVersionTimeline.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/technical/bom/__tests__/BOMComparisonModal.test.tsx [2m([22m[2m40 tests[22m[2m)[22m[33m 6966[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders modal with title [33m 807[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows summary cards after loading [33m 873[2mms[22m[39m
     [33m[2m‚úì[22m[39m displays comparison counts correctly [33m 717[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows added items section [33m 593[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows removed items section [33m 493[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows modified items with changes [33m 332[2mms[22m[39m
     [33m[2m‚úì[22m[39m close button responds to Enter key [33m 778[2mms[22m[39m
 [32m‚úì[39m components/planning/purchase-orders/__tests__/POTotalsSection.test.tsx [2m([22m[2m32 tests[22m[2m)[22m[33m 2567[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have accessible region landmark [33m 368[2mms[22m[39m
       [33m[2m‚úì[22m[39m should toggle inline breakdown when clicking expand button [33m 358[2mms[22m[39m
       [33m[2m‚úì[22m[39m should collapse breakdown when clicking collapse button [33m 397[2mms[22m[39m
       [33m[2m‚úì[22m[39m should sort tax rates in descending order [33m 385[2mms[22m[39m
[90mstdout[2m | components/shipping/dashboard/__tests__/ShippingDashboard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/components/production/ByProductsSection.test.tsx [2m([22m[2m35 tests[22m[2m)[22m[33m 8909[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render By-Products section heading [33m 743[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRegister when Register Now clicked [33m 316[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open [33m 622[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display product info (read-only) [33m 357[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display expected qty [33m 308[2mms[22m[39m
       [33m[2m‚úì[22m[39m should pre-fill quantity with expected qty [33m 328[2mms[22m[39m
       [33m[2m‚úì[22m[39m should submit form and call onSuccess [33m 440[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading state during submission [33m 457[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error on failed submission [33m 584[2mms[22m[39m
       [33m[2m‚úì[22m[39m should validate required quantity [33m 431[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onOpenChange(false) when Cancel clicked [33m 434[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onCancel when Cancel clicked [33m 308[2mms[22m[39m
[90mstdout[2m | components/planning/work-orders/availability/__tests__/WOAvailabilityPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | components/shipping/dashboard/__tests__/ShippingKPIs.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m components/scanner/shared/__tests__/NumberPad.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[33m 6791[2mms[22m[39m
       [33m[2m‚úì[22m[39m should work normally when disabled=false [33m 346[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allow all digit clicks when not disabled [33m 610[2mms[22m[39m
       [33m[2m‚úì[22m[39m should ignore all key clicks when disabled [33m 1824[2mms[22m[39m
       [33m[2m‚úì[22m[39m should preserve value when disabled keys are clicked [33m 531[2mms[22m[39m
       [33m[2m‚úì[22m[39m should apply disabled styling to digit buttons [33m 481[2mms[22m[39m
[90mstdout[2m | __tests__/components/warehouse/inventory/overview-tab.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/settings/users/__tests__/UsersDataTable.test.tsx [2m([22m[2m28 tests[22m[2m)[22m[33m 8191[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render user list with correct columns [33m 420[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display role name not role code [33m 743[2mms[22m[39m
     [33m[2m‚úì[22m[39m should combine role and status filters [33m 336[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onEdit when Edit action clicked [33m 1477[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show Deactivate for active users [33m 974[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show Activate for inactive users [33m 789[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onDeactivate when Deactivate clicked [33m 956[2mms[22m[39m
[90mstdout[2m | components/settings/users/__tests__/RoleDropdown.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m components/technical/bom/__tests__/BOMVersionTimeline.test.tsx [2m([22m[2m37 tests[22m[2m)[22m[33m 7347[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show tooltip on hover [33m 1812[2mms[22m[39m
       [33m[2m‚úì[22m[39m should include version number in tooltip [33m 732[2mms[22m[39m
       [33m[2m‚úì[22m[39m should include status in tooltip [33m 561[2mms[22m[39m
       [33m[2m‚úì[22m[39m should include effective dates in tooltip [33m 556[2mms[22m[39m
       [33m[2m‚úì[22m[39m should include output quantity and UoM in tooltip [33m 502[2mms[22m[39m
       [33m[2m‚úì[22m[39m should include notes preview in tooltip [33m 565[2mms[22m[39m
       [33m[2m‚úì[22m[39m should hide tooltip on mouse leave [33m 614[2mms[22m[39m
       [33m[2m‚úì[22m[39m should be keyboard navigable [33m 427[2mms[22m[39m
[90mstdout[2m | components/onboarding/__tests__/OnboardingWizardModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m components/planning/work-orders/availability/__tests__/WOAvailabilityPanel.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[33m 4870[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show retry button in error state [33m 544[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display availability panel header [33m 360[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have collapsible header [33m 310[2mms[22m[39m
       [33m[2m‚úì[22m[39m should filter materials by search [33m 768[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have focusable filter controls [33m 360[2mms[22m[39m
 [32m‚úì[39m components/shipping/dashboard/__tests__/ShippingKPIs.test.tsx [2m([22m[2m56 tests[22m[2m)[22m[33m 5155[2mms[22m[39m
       [33m[2m‚úì[22m[39m should be clickable when action provided [33m 537[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show breakdown tooltip on hover [33m 681[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show Load More button when onLoadMore provided [33m 433[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show tooltip on disabled buttons [33m 1394[2mms[22m[39m
[90mstdout[2m | components/technical/costing/__tests__/CostTrendChart.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | app/(authenticated)/production/work-orders/[id]/components/__tests__/WOPauseHistory.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/shipping/dashboard/__tests__/ShippingDashboard.test.tsx [2m([22m[2m39 tests[22m[2m)[22m[33m 5426[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render dashboard page with correct title [33m 417[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render in correct order: Header, Filter, KPIs, Alerts, Charts, Activity, Actions [33m 646[2mms[22m[39m
     [33m[2m‚úì[22m[39m should open date picker when Custom clicked [33m 721[2mms[22m[39m
     [33m[2m‚úì[22m[39m should support keyboard navigation through all interactive elements [33m 355[2mms[22m[39m
[90mstdout[2m | components/production/operations/__tests__/OperationsTimeline.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m __tests__/components/warehouse/inventory/overview-tab.test.tsx [2m([22m[2m30 tests[22m[2m)[22m[33m 5837[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders all three grouping options [33m 770[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onChange when a different option is clicked [33m 308[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onFiltersChange when warehouse is selected [33m 1301[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onFiltersChange with debounce when search input changes [33m 588[2mms[22m[39m
       [33m[2m‚úì[22m[39m calls onPageChange when page button is clicked [33m 517[2mms[22m[39m
 [32m‚úì[39m components/settings/users/__tests__/RoleDropdown.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 5904[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display all 10 roles in dropdown when current user is owner [33m 1128[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display role names, not codes [33m 593[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show role names in alphabetical order [33m 566[2mms[22m[39m
     [33m[2m‚úì[22m[39m should hide owner role option when current user is admin [33m 525[2mms[22m[39m
     [33m[2m‚úì[22m[39m should hide owner role when current user is viewer [33m 402[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show owner role when current user is owner [33m 468[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show 9 roles when admin (excluding owner) [33m 583[2mms[22m[39m
     [33m[2m‚úì[22m[39m should trigger onRoleChange when role selected [33m 752[2mms[22m[39m
[90mstdout[2m | components/production/operations/__tests__/OperationCard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | components/settings/onboarding/__tests__/OnboardingWizardModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m app/(authenticated)/production/work-orders/[id]/components/__tests__/WOPauseHistory.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[33m 3028[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have retry button on error [33m 580[2mms[22m[39m
       [33m[2m‚úì[22m[39m should retry fetch on retry button click [33m 659[2mms[22m[39m
 [32m‚úì[39m components/onboarding/__tests__/OnboardingWizardModal.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 6456[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display launcher view when step=0 [33m 1044[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show skip button on step 5 (near end) [33m 331[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open confirmation dialog when skip clicked [33m 621[2mms[22m[39m
       [33m[2m‚úì[22m[39m should cancel skip and return to wizard when "Continue Setup" clicked [33m 662[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call skip API and redirect to dashboard when confirmed [33m 561[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show "Step 1 of 6" on step 1 [33m 746[2mms[22m[39m
       [33m[2m‚úì[22m[39m should not show Back button on step 1 (step 1 uses embedded form navigation) [33m 650[2mms[22m[39m
       [33m[2m‚úì[22m[39m should enable Back button on step 3 [33m 319[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error when skip API fails [33m 607[2mms[22m[39m
 [32m‚úì[39m components/technical/costing/__tests__/CostTrendChart.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 5277[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render LineChart component with cost data [33m 694[2mms[22m[39m
     [33m[2m‚úì[22m[39m should toggle Material line when checkbox unchecked [33m 454[2mms[22m[39m
     [33m[2m‚úì[22m[39m should toggle Total line when checkbox state changes [33m 407[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display tooltip when hovering over data point [33m 332[2mms[22m[39m
     [33m[2m‚úì[22m[39m should allow independent control of all cost component toggles [33m 532[2mms[22m[39m
 [32m‚úì[39m components/production/operations/__tests__/OperationCard.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 1979[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show Start button when canStart is true [33m 498[2mms[22m[39m
[90mstdout[2m | app/(authenticated)/production/work-orders/[id]/components/__tests__/PauseReasonSelect.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m components/production/operations/__tests__/OperationsTimeline.test.tsx [2m([22m[2m22 tests[22m[2m)[22m[33m 3799[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRetry when retry button clicked [33m 560[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onOperationSelect when operation clicked [33m 1233[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show popover with details on click [33m 612[2mms[22m[39m
[90mstdout[2m | components/planning/work-orders/availability/__tests__/AvailabilityWarningModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/settings/allergens/__tests__/LanguageSelector.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | components/planning/purchase-orders/__tests__/DiscountInput.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/components/warehouse/inventory/aging-report-tab.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | components/production/consumption/__tests__/ConsumptionQtyInput.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m components/production/consumption/__tests__/ConsumptionQtyInput.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 1921[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange when value changes [33m 350[2mms[22m[39m
 [32m‚úì[39m components/planning/work-orders/availability/__tests__/AvailabilityWarningModal.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[33m 5003[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render when open=true [33m 1249[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display warning title [33m 327[2mms[22m[39m
 [32m‚úì[39m components/settings/onboarding/__tests__/OnboardingWizardModal.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[33m 5468[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render modal when open is true [33m 1533[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display welcome title [33m 331[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle skip error gracefully [33m 303[2mms[22m[39m
 [32m‚úì[39m components/planning/purchase-orders/__tests__/DiscountInput.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[33m 4189[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render mode toggle buttons [33m 437[2mms[22m[39m
       [33m[2m‚úì[22m[39m should format value on blur in amount mode [33m 373[2mms[22m[39m
[90mstdout[2m | components/production/operations/__tests__/SequenceWarning.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/(authenticated)/production/work-orders/[id]/components/__tests__/PauseReasonSelect.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 5251[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render with placeholder when no value selected [33m 1025[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render all 5 pause reason options [33m 1107[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show option descriptions [33m 756[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onValueChange when option selected [33m 788[2mms[22m[39m
 [32m‚úì[39m components/production/operations/__tests__/SequenceWarning.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 740[2mms[22m[39m
 [32m‚úì[39m components/settings/allergens/__tests__/LanguageSelector.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 5511[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render with current value displayed [33m 346[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open dropdown on click [33m 1298[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange when selecting a language [33m 822[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange with correct language code [33m 878[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onChange when selecting [33m 1043[2mms[22m[39m
[90mstdout[2m | components/scanner/putaway/__tests__/ScannerPutawayWizard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | components/settings/onboarding/__tests__/OnboardingGuard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/components/warehouse/inventory/aging-report-tab.test.tsx [2m([22m[2m33 tests[22m[2m)[22m[33m 6003[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders FIFO and FEFO options [33m 758[2mms[22m[39m
     [33m[2m‚úì[22m[39m calls onChange when toggling mode [33m 350[2mms[22m[39m
     [33m[2m‚úì[22m[39m supports pagination [33m 911[2mms[22m[39m
     [33m[2m‚úì[22m[39m supports keyboard navigation for toggle [33m 502[2mms[22m[39m
[90mstdout[2m | components/technical/routings/__tests__/DeleteRoutingDialog.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/(authenticated)/production/work-orders/[id]/components/__tests__/WOResumeButton.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | components/planning/purchase-orders/__tests__/ShippingCostInput.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | __tests__/components/scanner/NumberPad.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | components/planning/work-orders/availability/__tests__/AvailabilitySummaryCard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m __tests__/components/scanner/NumberPad.test.tsx [2m([22m[2m24 tests[22m[2m)[22m[33m 2272[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have keys with minimum 64x64dp size [33m 475[2mms[22m[39m
 [32m‚úì[39m components/planning/work-orders/availability/__tests__/AvailabilitySummaryCard.test.tsx [2m([22m[2m22 tests[22m[2m)[22m[33m 2055[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render refresh button when onRefresh provided [33m 710[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onRefresh when button clicked [32m 300[2mms[22m[39m
 [32m‚úì[39m components/settings/onboarding/__tests__/OnboardingGuard.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 5542[2mms[22m[39m
       [33m[2m‚úì[22m[39m should always render children [33m 1474[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show modal for admin users with incomplete onboarding [33m 566[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show modal for owner users with incomplete onboarding [33m 422[2mms[22m[39m
       [33m[2m‚úì[22m[39m should remove dismissed flag after successful skip [33m 469[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call skip API when skip button clicked [33m 369[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close modal after successful skip [33m 376[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle skip API error [33m 445[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close modal after navigating to wizard [33m 301[2mms[22m[39m
 [32m‚úì[39m components/planning/purchase-orders/__tests__/ShippingCostInput.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[33m 4420[2mms[22m[39m
       [33m[2m‚úì[22m[39m should display current value in input [33m 783[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange when input value changes [33m 495[2mms[22m[39m
       [33m[2m‚úì[22m[39m should accept decimal values [33m 303[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show error for negative values [33m 363[2mms[22m[39m
 [32m‚úì[39m components/scanner/putaway/__tests__/ScannerPutawayWizard.test.tsx [2m([22m[2m63 tests[22m[2m)[22m[33m 6272[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render with Step 1 by default [33m 458[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show header with title "Putaway" [33m 956[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onLPScanned when LP scanned successfully [33m 707[2mms[22m[39m
[90mstdout[2m | components/planning/work-orders/reservations/__tests__/ReservationStatusBadge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m components/technical/routings/__tests__/DeleteRoutingDialog.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 7067[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display success indicator for unused routing [33m 1560[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show simple confirmation message [33m 590[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show impact statement (no BOMs affected) [33m 505[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onConfirm when Delete button clicked [33m 571[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display BOM usage list (first 5) [33m 526[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show overflow indicator for more than 5 BOMs [33m 313[2mms[22m[39m
     [33m[2m‚úì[22m[39m should show impact statement (BOMs will be unassigned) [33m 345[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onMakeInactive when Make Inactive clicked [33m 330[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onConfirm with affected_boms when Delete clicked [33m 558[2mms[22m[39m
     [33m[2m‚úì[22m[39m should use alertdialog role for destructive action [33m 316[2mms[22m[39m
     [33m[2m‚úì[22m[39m should have descriptive button labels [33m 719[2mms[22m[39m
 [32m‚úì[39m app/(authenticated)/production/work-orders/[id]/components/__tests__/WOResumeButton.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 5245[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render when status=paused [33m 1005[2mms[22m[39m
       [33m[2m‚úì[22m[39m should open modal when button clicked [33m 563[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show pause info in modal [33m 415[2mms[22m[39m
       [33m[2m‚úì[22m[39m should close modal on cancel [33m 655[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call API on resume [33m 595[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onResumeSuccess after successful resume [33m 681[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onResumeError on API failure [33m 796[2mms[22m[39m
[90mstdout[2m | components/production/operations/__tests__/YieldInput.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/settings/users/__tests__/WarehouseMultiSelect.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | components/settings/modules/__tests__/ModuleCard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | components/settings/__tests__/SettingsNav.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m components/planning/work-orders/reservations/__tests__/ReservationStatusBadge.test.tsx [2m([22m[2m22 tests[22m[2m)[22m[33m 2282[2mms[22m[39m
       [33m[2m‚úì[22m[39m should use green color for full coverage [33m 623[2mms[22m[39m
 [32m‚úì[39m components/production/operations/__tests__/YieldInput.test.tsx [2m([22m[2m22 tests[22m[2m)[22m[33m 1814[2mms[22m[39m
       [33m[2m‚úì[22m[39m should call onChange when number input changes [33m 437[2mms[22m[39m
[90mstdout[2m | components/quality/__tests__/QualityStatusBadge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | __tests__/components/production/work-orders/MaterialAvailabilityCard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m components/settings/users/__tests__/WarehouseMultiSelect.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 1833[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display dropdown trigger with placeholder [33m 720[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onChange when badge remove button is clicked [33m 431[2mms[22m[39m
 [32m‚úì[39m components/settings/modules/__tests__/ModuleCard.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 2071[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onToggle when switch is clicked [33m 834[2mms[22m[39m
 [32m‚úì[39m components/settings/__tests__/SettingsNav.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 1824[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render all 6 sections for admin role [33m 342[2mms[22m[39m
     [33m[2m‚úì[22m[39m should highlight active navigation item based on pathname [33m 1321[2mms[22m[39m
[90mstdout[2m | __tests__/api/warehouse/inventory.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | __tests__/api/warehouse/inventory.test.ts[2m > [22m[2mInventory Overview API Integration
[22m[39mSetting up test data for Inventory Overview API...

 [32m‚úì[39m components/quality/__tests__/QualityStatusBadge.test.tsx [2m([22m[2m38 tests[22m[2m)[22m[33m 1793[2mms[22m[39m
       [33m[2m‚úì[22m[39m should apply gray colors for PENDING [33m 468[2mms[22m[39m
[90mstdout[2m | components/technical/routings/__tests__/RoutingsDataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | __tests__/api/warehouse/inventory.test.ts[2m > [22m[2mInventory Overview API Integration
[22m[39mCleaning up test data...
Cleanup complete

 [32m‚úì[39m __tests__/api/warehouse/inventory.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 457[2mms[22m[39m
 [32m‚úì[39m __tests__/components/production/work-orders/MaterialAvailabilityCard.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 1941[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show progress bar for each material [33m 1078[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/password-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/onboarding/__tests__/OnboardingGuard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/navigation/__tests__/Sidebar.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/services/__tests__/password-service.test.ts [2m([22m[2m43 tests[22m[2m)[22m[33m 1130[2mms[22m[39m
[90mstdout[2m | lib/hooks/__tests__/useOnboardingStatus.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/technical/routings/__tests__/RoutingsDataTable.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[33m 2064[2mms[22m[39m
[90mstdout[2m | __tests__/api/production/consumption-reversal.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | app/(authenticated)/planning/work-orders/gantt/__tests__/GanttWOBar.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/api/production/consumption-reversal.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 137[2mms[22m[39m
 [32m‚úì[39m components/onboarding/__tests__/OnboardingGuard.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 1346[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle error state correctly [33m 906[2mms[22m[39m
 [32m‚úì[39m lib/hooks/__tests__/useOnboardingStatus.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 836[2mms[22m[39m
 [32m‚úì[39m components/navigation/__tests__/Sidebar.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 2176[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render scanner link with correct href [33m 891[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render scanner with teal color icon [33m 380[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display scanner after warehouse in the menu [33m 383[2mms[22m[39m
     [33m[2m‚úì[22m[39m should display scanner before quality in the menu [33m 332[2mms[22m[39m
 [32m‚úì[39m app/(authenticated)/planning/work-orders/gantt/__tests__/GanttWOBar.test.tsx [2m([22m[2m36 tests[22m[2m)[22m[33m 1387[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render draft WO with gray background [33m 608[2mms[22m[39m
[90mstdout[2m | __tests__/integration/api/warehouse/over-receipt-approvals.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | components/technical/__tests__/version-badge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m components/technical/__tests__/version-badge.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[32m 77[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/shipping-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | __tests__/api/production/by-product-registration.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/planning/work-orders/[id]/reserve-all/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m __tests__/integration/api/warehouse/over-receipt-approvals.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 733[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/shipping-dashboard-service.test.ts [2m([22m[2m59 tests[22m[2m)[22m[32m 246[2mms[22m[39m
 [32m‚úì[39m app/api/planning/work-orders/[id]/reserve-all/__tests__/route.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 211[2mms[22m[39m
 [32m‚úì[39m __tests__/api/production/by-product-registration.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 529[2mms[22m[39m
[90mstdout[2m | components/planning/work-orders/availability/__tests__/AvailabilityTrafficLight.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | components/settings/__tests__/SettingsNavItem.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/services/__tests__/session-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m lib/services/__tests__/session-service.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 88[2mms[22m[39m
 [32m‚úì[39m components/settings/__tests__/SettingsNavItem.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 892[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render icon and label [33m 504[2mms[22m[39m
 [32m‚úì[39m components/planning/work-orders/availability/__tests__/AvailabilityTrafficLight.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 1488[2mms[22m[39m
       [33m[2m‚úì[22m[39m should have role="img" for accessibility [33m 809[2mms[22m[39m
[90mstdout[2m | components/settings/onboarding/__tests__/SetupInProgressMessage.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/unit/invitation-utils.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m __tests__/unit/invitation-utils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 228[2mms[22m[39m
[90mstdout[2m | components/settings/__tests__/SettingsLayout.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | components/production/operations/__tests__/OperationStatusBadge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | components/production/operations/__tests__/OperationLogTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | __tests__/api/shipping/customers.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m components/production/operations/__tests__/OperationStatusBadge.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[32m 122[2mms[22m[39m
 [32m‚úì[39m components/settings/__tests__/SettingsLayout.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 455[2mms[22m[39m
 [32m‚úì[39m components/settings/onboarding/__tests__/SetupInProgressMessage.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 1562[2mms[22m[39m
       [33m[2m‚úì[22m[39m should render alert component [33m 930[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/scanner-output-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m lib/services/__tests__/scanner-output-service.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 330[2mms[22m[39m
       [33m[2m‚úì[22m[39m should return WO data for valid barcode within 500ms [33m 303[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/lp-merge-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m __tests__/api/shipping/customers.test.ts [2m([22m[2m39 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m[33m 656[2mms[22m[39m
 [32m‚úì[39m components/production/operations/__tests__/OperationLogTable.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 1426[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show loading skeleton when isLoading is true [33m 321[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/lp-merge-service.test.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 549[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/license-plate-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/api/warehouse/inventory-overview-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | __tests__/integration/api/warehouse/stock-moves.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/services/__tests__/license-plate-service.test.ts [2m([22m[2m61 tests[22m[2m)[22m[33m 578[2mms[22m[39m
[90mstdout[2m | __tests__/api/warehouse/inventory-overview-service.test.ts[2m > [22m[2mInventory Overview Service Tests
[22m[39mSetting up test data for Inventory Overview Service...

[90mstdout[2m | app/api/shipping/dashboard/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | app/api/v1/settings/users/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/integration/api/warehouse/stock-moves.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 420[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/so-clone-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | __tests__/api/warehouse/inventory-overview-service.test.ts[2m > [22m[2mInventory Overview Service Tests
[22m[39mCleaning up test data...
Cleanup complete

 [32m‚úì[39m __tests__/api/warehouse/inventory-overview-service.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 814[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/so-clone-service.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32m‚úì[39m app/api/v1/settings/users/__tests__/route.test.ts [2m([22m[2m31 tests[22m[2m | [22m[33m14 skipped[39m[2m)[22m[32m 188[2mms[22m[39m
 [32m‚úì[39m app/api/shipping/dashboard/__tests__/route.test.ts [2m([22m[2m40 tests[22m[2m)[22m[33m 422[2mms[22m[39m
[90mstdout[2m | app/api/technical/costing/variance/report/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | __tests__/integration/api/shipping/scanner-pick.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m app/api/technical/costing/variance/report/__tests__/route.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 280[2mms[22m[39m
[90mstdout[2m | __tests__/api/production/consumption-reversal-04.6d.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | components/production/outputs/__tests__/OutputProgressCard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/services/__tests__/inventory-allocation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | app/api/planning/work-orders/[id]/availability/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m __tests__/api/production/consumption-reversal-04.6d.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 130[2mms[22m[39m
 [32m‚úì[39m __tests__/integration/api/shipping/scanner-pick.test.ts [2m([22m[2m40 tests[22m[2m)[22m[33m 436[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/inventory-allocation-service.test.ts [2m([22m[2m70 tests[22m[2m)[22m[33m 703[2mms[22m[39m
       [33m[2m‚úì[22m[39m should allocate oldest LPs first when FIFO strategy selected [33m 325[2mms[22m[39m
 [32m‚úì[39m app/api/planning/work-orders/[id]/availability/__tests__/route.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 239[2mms[22m[39m
[90mstdout[2m | lib/utils/__tests__/browser-detection.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | app/api/planning/work-orders/[id]/materials/[materialId]/reservations/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m components/production/outputs/__tests__/OutputProgressCard.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[33m 1614[2mms[22m[39m
[90mstdout[2m | app/api/planning/transfer-orders/[id]/lines/[lineId]/assign-lps/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | app/api/production/work-orders/[id]/operations/[opId]/complete/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m app/api/planning/work-orders/[id]/materials/[materialId]/reservations/__tests__/route.test.ts [2m([22m[2m35 tests[22m[2m)[22m[33m 827[2mms[22m[39m
       [33m[2m‚úì[22m[39m should export GET handler [33m 766[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/planning-settings-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m app/api/planning/transfer-orders/[id]/lines/[lineId]/assign-lps/__tests__/route.test.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 360[2mms[22m[39m
       [33m[2m‚úì[22m[39m should export POST handler [33m 314[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/nutrition-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/planning-settings-schemas.test.ts [2m([22m[2m67 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m lib/utils/__tests__/browser-detection.test.ts [2m([22m[2m29 tests[22m[2m)[22m[33m 2871[2mms[22m[39m
       [33m[2m‚úì[22m[39m should not cause memory leaks on repeated calls [33m 2835[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/nutrition-service.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 438[2mms[22m[39m
       [33m[2m‚úì[22m[39m should calculate 10% DV for 230mg sodium (AC-13.20) [33m 343[2mms[22m[39m
 [32m‚úì[39m app/api/production/work-orders/[id]/operations/[opId]/complete/__tests__/route.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 268[2mms[22m[39m
[90mstdout[2m | __tests__/api/production/over-consumption.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/integration/api/warehouse/lp-split.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | components/production/outputs/__tests__/OutputsSummary.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/yield-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | __tests__/01-settings/01.13.tax-codes-api.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | app/api/warehouse/license-plates/barcode/[barcode]/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/integration/api/warehouse/lp-split.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 261[2mms[22m[39m
 [32m‚úì[39m __tests__/01-settings/01.13.tax-codes-api.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 70[2mms[22m[39m
 [32m‚úì[39m __tests__/api/production/over-consumption.test.ts [2m([22m[2m24 tests[22m[2m | [22m[33m16 skipped[39m[2m)[22m[33m 700[2mms[22m[39m
         [33m[2m‚úì[22m[39m should return 401 for unauthenticated request [33m 411[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/yield-service.test.ts [2m([22m[2m56 tests[22m[2m)[22m[32m 191[2mms[22m[39m
 [32m‚úì[39m app/api/warehouse/license-plates/barcode/[barcode]/__tests__/route.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 166[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/asn-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m components/production/outputs/__tests__/OutputsSummary.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 1113[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/asn-service.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 180[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/routings/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | lib/services/__tests__/scanner-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | app/api/warehouse/dashboard/__tests__/activity.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/label-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/scanner-service.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/label-service.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 199[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/routings/__tests__/route.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 187[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/scanner-pick-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m app/api/warehouse/dashboard/__tests__/activity.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 282[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/scanner-pick-service.test.ts [2m([22m[2m61 tests[22m[2m)[22m[32m 175[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/lp-split-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/services/__tests__/wo-reservation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m lib/services/__tests__/lp-split-service.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 278[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/label-generation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m lib/services/__tests__/wo-reservation-service.test.ts [2m([22m[2m58 tests[22m[2m)[22m[33m 1393[2mms[22m[39m
       [33m[2m‚úì[22m[39m should select oldest LP first by created_at [33m 1137[2mms[22m[39m
[90mstdout[2m | __tests__/api/warehouse/expiring-items.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/services/__tests__/label-generation-service.test.ts [2m([22m[2m95 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | app/api/shipping/sales-orders/[id]/status/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/shipping/sales-orders/[id]/status/__tests__/route.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/transfer-order.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m __tests__/api/warehouse/expiring-items.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 72[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/bom-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/transfer-order.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/bom-service.test.ts [2m([22m[2m67 tests[22m[2m)[22m[33m 531[2mms[22m[39m
[90mstdout[2m | components/production/consumption/__tests__/VarianceIndicator.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | app/api/quality/specifications/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/sampling-plan-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m app/api/quality/specifications/__tests__/route.test.ts [2m([22m[2m77 tests[22m[2m)[22m[32m 22[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/gantt-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | app/api/production/work-orders/[id]/operations/[opId]/logs/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m lib/validation/__tests__/sampling-plan-schemas.test.ts [2m([22m[2m112 tests[22m[2m)[22m[32m 238[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/gantt-service.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 264[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/purchase-order-approval-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m app/api/production/work-orders/[id]/operations/[opId]/logs/__tests__/route.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 149[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/purchase-order-approval-schemas.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 184[2mms[22m[39m
 [32m‚úì[39m components/production/consumption/__tests__/VarianceIndicator.test.tsx [2m([22m[2m31 tests[22m[2m)[22m[33m 842[2mms[22m[39m
[90mstdout[2m | app/api/warehouse/license-plates/[id]/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m app/api/warehouse/license-plates/[id]/__tests__/route.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 285[2mms[22m[39m
[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/packing-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/services/__tests__/product-allergen-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/product-allergen-service.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 135[2mms[22m[39m
[90mstdout[2m | components/production/consumption/__tests__/FullLPRequiredBadge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/services/__tests__/packing-service.test.ts [2m([22m[2m68 tests[22m[2m)[22m[33m 591[2mms[22m[39m
[90mstdout[2m | app/api/shipping/rma/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m components/production/consumption/__tests__/FullLPRequiredBadge.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[32m 164[2mms[22m[39m
 [32m‚úì[39m app/api/shipping/rma/__tests__/route.test.ts [2m([22m[2m84 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSystem Prompts (Layer 1)[2m > [22m[2mshould return system prompt for each agent type
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSystem Prompts (Layer 1)[2m > [22m[2mshould have cache_control on all prompts
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould cache schema on first fetch
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould cache schema on first fetch
[22m[39m[AgentCache] Schema cache MISS: test_table, fetching...

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould cache schema on first fetch
[22m[39mRedis client initialized successfully

[90mstdout[2m | lib/services/__tests__/product-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould cache schema on first fetch
[22m[39m[AgentCache] Schema cache HIT: test_table

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould track cache hits and misses
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould track cache hits and misses
[22m[39m[AgentCache] Schema cache MISS: stats_table, fetching...

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould track cache hits and misses
[22m[39m[AgentCache] Schema cache HIT: stats_table

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould track cache hits and misses
[22m[39m[AgentCache] Schema cache HIT: stats_table

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould invalidate schema cache
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould invalidate schema cache
[22m[39m[AgentCache] Schema cache MISS: invalidate_table, fetching...

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould invalidate schema cache
[22m[39m[AgentCache] Schema invalidated: invalidate_table

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSchema Cache (Layer 2)[2m > [22m[2mshould invalidate schema cache
[22m[39m[AgentCache] Schema cache MISS: invalidate_table

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mContext Cache (Layer 3)[2m > [22m[2mshould cache context data
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mContext Cache (Layer 3)[2m > [22m[2mshould cache context data
[22m[39m[AgentCache] Context cache MISS: project, fetching...

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mContext Cache (Layer 3)[2m > [22m[2mshould cache context data
[22m[39m[AgentCache] Context cache HIT: project

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mContext Cache (Layer 3)[2m > [22m[2mshould cache context data
[22m[39m[AgentCache] Context cache HIT: project

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mContext Cache (Layer 3)[2m > [22m[2mshould return project context
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mContext Cache (Layer 3)[2m > [22m[2mshould return project context
[22m[39m[AgentCache] Context cache MISS: monopilot-project, fetching...

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mQuery Cache (Layer 4)[2m > [22m[2mshould cache query results
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mQuery Cache (Layer 4)[2m > [22m[2mshould cache query results
[22m[39m[AgentCache] Query cache MISS: products-list

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mQuery Cache (Layer 4)[2m > [22m[2mshould cache query results
[22m[39m[AgentCache] Query cache HIT: products-list

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mCache Stats[2m > [22m[2mshould return cache statistics
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mAgentCacheSystem[2m > [22m[2mSingleton[2m > [22m[2mshould return same instance
[22m[39m[AgentCache] All caches cleared

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mSchemaFetcher[2m > [22m[2mKnown Schemas[2m > [22m[2mshould return schema for known table
[22m[39m[AgentCache] Schema cache MISS: products, fetching...
[SchemaFetcher] Using pre-defined schema for: products

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mSchemaFetcher[2m > [22m[2mKnown Schemas[2m > [22m[2mshould return multiple schemas at once
[22m[39m[AgentCache] Schema cache HIT: products
[AgentCache] Schema cache MISS: boms, fetching...
[SchemaFetcher] Using pre-defined schema for: boms
[AgentCache] Schema cache MISS: warehouses, fetching...
[SchemaFetcher] Using pre-defined schema for: warehouses

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mSchemaFetcher[2m > [22m[2mSchema Compact[2m > [22m[2mshould generate compact schema representation
[22m[39m[AgentCache] Schema cache HIT: products

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mSchemaFetcher[2m > [22m[2mCache Integration[2m > [22m[2mshould cache schema on repeated calls
[22m[39m[AgentCache] Schema cache cleared
[AgentCache] Schema cache MISS: products, fetching...
[SchemaFetcher] Using pre-defined schema for: products

[90mstdout[2m | lib/cache/__tests__/agent-cache.test.ts[2m > [22m[2mSchemaFetcher[2m > [22m[2mCache Integration[2m > [22m[2mshould cache schema on repeated calls
[22m[39m[AgentCache] Schema cache HIT: products

 [32m‚úì[39m lib/cache/__tests__/agent-cache.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 236[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/product-service.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 199[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/routing-operations-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/user-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/validation/__tests__/user-schemas.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/spec-parameter-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | app/api/shipping/sales-orders/__tests__/clone.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/planning/work-orders/[id]/materials/[materialId]/available-lps/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m lib/services/__tests__/routing-operations-service.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32m‚úì[39m app/api/shipping/sales-orders/__tests__/clone.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/spec-parameter-schema.test.ts [2m([22m[2m78 tests[22m[2m)[22m[32m 167[2mms[22m[39m
[90mstdout[2m | app/api/warehouse/dashboard/__tests__/kpis.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/planning/work-orders/[id]/materials/[materialId]/available-lps/__tests__/route.test.ts [2m([22m[2m25 tests[22m[2m)[22m[33m 338[2mms[22m[39m
[90mstdout[2m | __tests__/api/warehouse/scanner-putaway-confirm.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m app/api/warehouse/dashboard/__tests__/kpis.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32m‚úì[39m __tests__/api/warehouse/scanner-putaway-confirm.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 295[2mms[22m[39m
[90mstdout[2m | __tests__/api/warehouse/lp-genealogy.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/validation/__tests__/traceability.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | app/api/v1/technical/boms/[id]/items/[itemId]/alternatives/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m lib/validation/__tests__/traceability.test.ts [2m([22m[2m57 tests[22m[2m)[22m[32m 16[2mms[22m[39m
[90mstdout[2m | components/production/outputs/__tests__/YieldIndicator.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | __tests__/lib/services/by-product-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m __tests__/lib/services/by-product-service.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/boms/[id]/items/[itemId]/alternatives/__tests__/route.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 142[2mms[22m[39m
[90mstdout[2m | app/api/planning/work-orders/[id]/reservations/[reservationId]/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m components/production/outputs/__tests__/YieldIndicator.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 551[2mms[22m[39m
 [32m‚úì[39m __tests__/api/warehouse/lp-genealogy.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 289[2mms[22m[39m
 [32m‚úì[39m app/api/planning/work-orders/[id]/reservations/[reservationId]/__tests__/route.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 535[2mms[22m[39m
       [33m[2m‚úì[22m[39m should export DELETE handler [33m 507[2mms[22m[39m
[90mstdout[2m | components/settings/machines/__tests__/MachinesDataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m components/settings/machines/__tests__/MachinesDataTable.test.tsx [2m([22m[2m26 tests[22m[2m)[22m[32m 174[2mms[22m[39m
[90mstdout[2m | app/api/production/work-orders/barcode/[barcode]/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | app/(authenticated)/technical/components/__tests__/DashboardStatsCard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | app/api/v1/settings/allergens/[id]/count/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m app/(authenticated)/technical/components/__tests__/DashboardStatsCard.test.tsx [2m([22m[2m56 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m app/api/production/work-orders/barcode/[barcode]/__tests__/route.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 253[2mms[22m[39m
 [32m‚úì[39m app/api/v1/settings/allergens/[id]/count/__tests__/route.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 177[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/bom-alternatives-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m lib/services/__tests__/bom-alternatives-service.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 18[2mms[22m[39m
[90mstdout[2m | app/api/planning/transfer-orders/[id]/lines/[lineId]/available-lps/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/pick-list-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/pick-list-service.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 217[2mms[22m[39m
 [32m‚úì[39m app/api/planning/transfer-orders/[id]/lines/[lineId]/available-lps/__tests__/route.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 825[2mms[22m[39m
       [33m[2m‚úì[22m[39m should export GET handler [33m 765[2mms[22m[39m
[90mstdout[2m | __tests__/unit/validation/output-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/label-print-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m __tests__/unit/validation/output-schemas.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 54[2mms[22m[39m
[90mstdout[2m | components/technical/bom/cost/__tests__/CostSummary.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/label-print-service.test.ts [2m([22m[2m62 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32m‚úì[39m components/technical/bom/cost/__tests__/CostSummary.test.tsx [2m([22m[2m54 tests[22m[2m)[22m[32m 90[2mms[22m[39m
[90mstdout[2m | components/technical/bom/__tests__/ConditionalFlagsSelect.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m components/technical/bom/__tests__/ConditionalFlagsSelect.test.tsx [2m([22m[2m57 tests[22m[2m)[22m[32m 73[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/shelf-life-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/shelf-life-service.test.ts [2m([22m[2m93 tests[22m[2m)[22m[32m 139[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/po-status-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/validation/__tests__/po-status-schemas.test.ts [2m([22m[2m71 tests[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstdout[2m | app/(authenticated)/planning/__tests__/page.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/(authenticated)/planning/__tests__/page.test.tsx [2m([22m[2m67 tests[22m[2m)[22m[32m 211[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/product-history-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | lib/services/__tests__/shipment-manifest-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | components/production/operations/__tests__/DurationDisplay.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/product-history-service.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 92[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/shipment-manifest-service.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 166[2mms[22m[39m
[90mstdout[2m | lib/hooks/__tests__/use-scanner-flow.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m components/production/operations/__tests__/DurationDisplay.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 590[2mms[22m[39m
 [32m‚úì[39m lib/hooks/__tests__/use-scanner-flow.test.ts [2m([22m[2m18 tests[22m[2m)[22m[33m 615[2mms[22m[39m
[90mstdout[2m | lib/hooks/__tests__/use-scanner-output.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | lib/services/__tests__/wo-complete-auto-release.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/over-consumption-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m lib/services/__tests__/wo-complete-auto-release.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/over-consumption-service.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 152[2mms[22m[39m
 [32m‚úì[39m lib/hooks/__tests__/use-scanner-output.test.ts [2m([22m[2m41 tests[22m[2m)[22m[33m 542[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/shelf-life.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/services/__tests__/wo-operations-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/wo-operations-service.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/shelf-life.test.ts [2m([22m[2m110 tests[22m[2m)[22m[32m 185[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/warehouse-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/services/__tests__/warehouse-dashboard-service.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.10.machines-api.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m __tests__/01-settings/01.10.machines-api.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 199[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/lp-reservation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/services/__tests__/bom-clone-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m lib/services/__tests__/bom-clone-service.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | app/api/planning/suppliers/[supplierId]/products/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/lp-reservation-service.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 198[2mms[22m[39m
 [32m‚úì[39m app/api/planning/suppliers/[supplierId]/products/__tests__/route.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstdout[2m | app/api/warehouse/dashboard/__tests__/alerts.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | __tests__/01-settings/01.7.module-toggles-api.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/01-settings/01.7.module-toggles-api.test.tsx [2m([22m[2m37 tests[22m[2m)[22m[32m 13[2mms[22m[39m
[90mstdout[2m | app/api/v1/settings/allergens/counts/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m app/api/warehouse/dashboard/__tests__/alerts.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32m‚úì[39m app/api/v1/settings/allergens/counts/__tests__/route.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 43[2mms[22m[39m
[90mstdout[2m | __tests__/api/production/multiple-outputs.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/production/work-orders/[id]/yield/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/services/__tests__/quality-hold-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | components/technical/bom/__tests__/ProductionLinesCheckbox.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | lib/validation/__tests__/purchase-order.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | app/api/settings/planning/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m app/api/production/work-orders/[id]/yield/__tests__/route.test.ts [2m([22m[2m53 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32m‚úì[39m app/api/settings/planning/__tests__/route.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/quality-hold-service.test.ts [2m([22m[2m106 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32m‚úì[39m components/technical/bom/__tests__/ProductionLinesCheckbox.test.tsx [2m([22m[2m66 tests[22m[2m)[22m[32m 60[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/purchase-order.test.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32m‚úì[39m __tests__/api/production/multiple-outputs.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 324[2mms[22m[39m
[90mstdout[2m | app/api/warehouse/license-plates/[id]/status/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m app/api/warehouse/license-plates/[id]/status/__tests__/route.test.ts [2m([22m[2m45 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/work-order.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/services/__tests__/to-lp-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/validation/__tests__/scanner-receive-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/validation/__tests__/work-order.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/boms/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/scanner-receive-schemas.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/nutrition-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/services/__tests__/to-lp-service.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/nutrition-schema.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | components/quality/test-results/__tests__/test-results-summary.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m components/quality/test-results/__tests__/test-results-summary.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/boms/__tests__/route.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 86[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/production-line-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/production-line-service.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstdout[2m | components/shipping/rma/__tests__/RMAModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/planning-settings-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m components/shipping/rma/__tests__/RMAModal.test.tsx [2m([22m[2m78 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/planning-settings-schema.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/supplier-product-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/unit/services/output-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/supplier-product-validation.test.ts [2m([22m[2m47 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/scanner-putaway-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/services/__tests__/location-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/services/__tests__/scanner-putaway-service.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32m‚úì[39m __tests__/unit/services/output-service.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 69[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/location-service.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 88[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/so-pricing-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/so-pricing-service.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 59[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/yield-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | app/api/technical/boms/__tests__/yield.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/validation/__tests__/yield-validation.test.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m app/api/technical/boms/__tests__/yield.test.ts [2m([22m[2m72 tests[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/spec-parameter-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | __tests__/integration/api/settings/warehouses.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m __tests__/integration/api/settings/warehouses.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | app/api/technical/boms/__tests__/compare.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m app/api/technical/boms/__tests__/compare.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | components/settings/onboarding/__tests__/WizardStep3Locations.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/settings/onboarding/__tests__/WizardStep3Locations.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/spec-parameter-service.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 109[2mms[22m[39m
[90mstdout[2m | __tests__/api/planning/dashboard.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/api/planning/dashboard.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 96[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.5b.warehouse-access.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | lib/test-utils/__tests__/factories.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/01-settings/01.5b.warehouse-access.test.tsx [2m([22m[2m30 tests[22m[2m | [22m[33m7 skipped[39m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m lib/test-utils/__tests__/factories.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/so-status-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | app/api/planning/transfer-orders/__tests__/integration.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/types/__tests__/wo-materials.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m app/api/planning/transfer-orders/__tests__/integration.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/so-status-service.test.ts [2m([22m[2m56 tests[22m[2m)[22m[32m 124[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/work-order-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m lib/types/__tests__/wo-materials.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/work-order-schemas.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 66[2mms[22m[39m
[90mstdout[2m | lib/activity/__tests__/log-activity.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m lib/activity/__tests__/log-activity.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/wo-snapshot-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/services/__tests__/sales-order-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/wo-snapshot-service.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstdout[2m | __tests__/rls/users-rls.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m __tests__/rls/users-rls.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/sales-order-service.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 104[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/to-lp-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/rma-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/to-lp-validation.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/rma-service.test.ts [2m([22m[2m88 tests[22m[2m)[22m[32m 34[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/warehouse-dashboard-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/warehouse-dashboard-schemas.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/so-import-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/services/__tests__/so-import-service.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 34[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/traceability-config-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/validation/__tests__/license-plate-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/services/__tests__/traceability-config-service.test.ts [2m([22m[2m42 tests[22m[2m)[22m[33m 329[2mms[22m[39m
[90mstdout[2m | app/api/technical/costing/products/[id]/history/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/grn-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/validation/__tests__/license-plate-schemas.test.ts [2m([22m[2m66 tests[22m[2m)[22m[32m 203[2mms[22m[39m
[90mstdout[2m | lib/hooks/__tests__/useSettingsPermissions.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/services/__tests__/grn-service.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 160[2mms[22m[39m
 [32m‚úì[39m lib/hooks/__tests__/useSettingsPermissions.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 221[2mms[22m[39m
 [32m‚úì[39m app/api/technical/costing/products/[id]/history/__tests__/route.test.ts [2m([22m[2m18 tests[22m[2m)[22m[33m 382[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/dashboard-service-02-12.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/dashboard-service-02-12.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 194[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/serving-calculator-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/stock-move-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/material-availability-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/serving-calculator-service.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 59[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/pick-confirmation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | app/api/v1/technical/boms/[id/]/items/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/services/__tests__/stock-move-service.test.ts [2m([22m[2m44 tests[22m[2m)[22m[33m 317[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/material-availability-service.test.ts [2m([22m[2m57 tests[22m[2m)[22m[33m 349[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/boms/[id/]/items/__tests__/route.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/pick-confirmation-service.test.ts [2m([22m[2m83 tests[22m[2m)[22m[33m 305[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/packing-scanner-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/services/__tests__/packing-scanner-service.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 198[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/quality-status-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/asn-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/license-plate-service-search-filters.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | app/api/production/work-orders/[id]/operations/[opId]/start/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | lib/utils/__tests__/format-quantity.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/quality-status-schemas.test.ts [2m([22m[2m59 tests[22m[2m)[22m[32m 271[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/asn-schemas.test.ts [2m([22m[2m51 tests[22m[2m)[22m[32m 201[2mms[22m[39m
 [32m‚úì[39m lib/utils/__tests__/format-quantity.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 200[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/license-plate-service-search-filters.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 211[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/scanner-receive-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/scanner-receive-service.test.ts [2m([22m[2m45 tests[22m[2m)[22m[32m 170[2mms[22m[39m
 [32m‚úì[39m app/api/production/work-orders/[id]/operations/[opId]/start/__tests__/route.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 310[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/bom-items-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/quality-hold-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m lib/services/__tests__/bom-items-service.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 133[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/quality-hold-validation.test.ts [2m([22m[2m98 tests[22m[2m)[22m[32m 73[2mms[22m[39m
[90mstdout[2m | lib/hooks/__tests__/useSettingsGuard.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | app/api/v1/settings/users/me/preferences/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/warehouse/scanner-putaway-suggest.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/over-receipt-approval-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m lib/hooks/__tests__/useSettingsGuard.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 140[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/po-calculation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/services/__tests__/po-calculation-service.test.ts [2m([22m[2m61 tests[22m[2m)[22m[32m 72[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/over-receipt-approval-service.test.ts [2m([22m[2m47 tests[22m[2m)[22m[32m 152[2mms[22m[39m
 [32m‚úì[39m app/api/v1/settings/users/me/preferences/__tests__/route.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32m‚úì[39m __tests__/api/warehouse/scanner-putaway-suggest.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 132[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/lp-genealogy-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | __tests__/01-settings/01.6.role-permissions.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | __tests__/api/planning/po-statuses.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | app/api/v1/technical/products/__tests__/traceability-config.route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | app/api/technical/nutrition/__tests__/override.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/services/__tests__/so-allergen-validation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | lib/validation/__tests__/po-bulk-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/validation/__tests__/lp-genealogy-schemas.test.ts [2m([22m[2m39 tests[22m[2m)[22m[33m 309[2mms[22m[39m
 [32m‚úì[39m __tests__/api/planning/po-statuses.test.ts [2m([22m[2m86 tests[22m[2m)[22m[32m 110[2mms[22m[39m
 [32m‚úì[39m __tests__/01-settings/01.6.role-permissions.test.ts [2m([22m[2m288 tests[22m[2m)[22m[32m 251[2mms[22m[39m
 [32m‚úì[39m app/api/technical/nutrition/__tests__/override.test.ts [2m([22m[2m56 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/products/__tests__/traceability-config.route.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 95[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/po-bulk-schemas.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 208[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/so-allergen-validation-service.test.ts [2m([22m[2m67 tests[22m[2m)[22m[33m 341[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/po-status-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/services/__tests__/production-settings-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/services/__tests__/po-status-service.test.ts [2m([22m[2m85 tests[22m[2m)[22m[32m 160[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/bom-items-phase1b.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/services/__tests__/production-settings-service.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 118[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/excel-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/bom-items-phase1b.test.ts [2m([22m[2m71 tests[22m[2m)[22m[32m 126[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/excel-service.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 96[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/consumption-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/specification-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m lib/services/__tests__/consumption-service.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 160[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/specification-service.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 107[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/user-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/user-service.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 84[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/boms/[id]/clone/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m app/api/v1/technical/boms/[id]/clone/__tests__/route.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/supplier-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | components/settings/onboarding/__tests__/WizardStep4Product.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/services/__tests__/supplier-service.test.ts [2m([22m[2m45 tests[22m[2m)[22m[32m 43[2mms[22m[39m
 [32m‚úì[39m components/settings/onboarding/__tests__/WizardStep4Product.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.6.permission-matrix.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m __tests__/01-settings/01.6.permission-matrix.test.ts [2m([22m[2m59 tests[22m[2m)[22m[32m 18[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/bom-items.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/validation/__tests__/grn-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/validation/__tests__/bom-items.test.ts [2m([22m[2m63 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/grn-schemas.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/scanner-move-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/transfer-order-schemas.receive.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | lib/services/__tests__/permission-service-rbac.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/transfer-order-schemas.receive.test.ts [2m([22m[2m65 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/permission-service-rbac.test.ts [2m([22m[2m51 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/scanner-move-service.test.ts [2m([22m[2m74 tests[22m[2m)[22m[32m 172[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/bom-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m lib/validation/__tests__/bom-schema.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 24[2mms[22m[39m
[90mstdout[2m | app/api/quality/holds/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m app/api/quality/holds/__tests__/route.test.ts [2m([22m[2m153 tests[22m[2m)[22m[33m 377[2mms[22m[39m
[90mstdout[2m | __tests__/lib/validation/reversal-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | components/planning/purchase-orders/__tests__/POStatusTimeline.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m __tests__/lib/validation/reversal-schemas.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32m‚úì[39m components/planning/purchase-orders/__tests__/POStatusTimeline.test.tsx [2m([22m[2m77 tests[22m[2m)[22m[32m 119[2mms[22m[39m
[90mstdout[2m | __tests__/unit/services/material-reservation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/validation/__tests__/product.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/unit/services/material-reservation-service.test.ts [2m([22m[2m53 tests[22m[2m)[22m[32m 155[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/product.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 129[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/quality-settings-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/validation/__tests__/inspection-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/services/__tests__/grn-po-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/services/__tests__/quality-settings-service.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 133[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/inspection-schemas.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 170[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/lp-merge-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/grn-po-service.test.ts [2m([22m[2m51 tests[22m[2m | [22m[33m13 skipped[39m[2m)[22m[32m 196[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/lp-merge-schemas.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 232[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/purchase-order-service.approval.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/grn-to-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/services/__tests__/purchase-order-service.approval.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 191[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.11.production-lines-api.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/grn-to-service.test.ts [2m([22m[2m50 tests[22m[2m | [22m[33m6 skipped[39m[2m)[22m[32m 160[2mms[22m[39m
 [32m‚úì[39m __tests__/01-settings/01.11.production-lines-api.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 193[2mms[22m[39m
[90mstdout[2m | app/api/technical/dashboard/__tests__/integration.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | components/shipping/allocation/__tests__/AllocationPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m components/shipping/allocation/__tests__/AllocationPanel.test.tsx [2m([22m[2m48 tests[22m[2m)[22m[32m 142[2mms[22m[39m
 [32m‚úì[39m app/api/technical/dashboard/__tests__/integration.test.ts [2m([22m[2m68 tests[22m[2m)[22m[32m 225[2mms[22m[39m
[90mstdout[2m | components/shipping/sales-orders/__tests__/SODataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/bom-items-service.phase1b.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/validation/__tests__/wo-operations-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/shipping/sales-orders/__tests__/SODataTable.test.tsx [2m([22m[2m61 tests[22m[2m)[22m[32m 106[2mms[22m[39m
[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/services/__tests__/bom-items-service.phase1b.test.ts [2m([22m[2m57 tests[22m[2m)[22m[32m 238[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/sampling-plan-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/validation/__tests__/wo-operations-schemas.test.ts [2m([22m[2m57 tests[22m[2m)[22m[32m 172[2mms[22m[39m
[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould load required skills for backend-dev
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould match skills based on task keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould match validation skill for validation task
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould load required skills for frontend-dev
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould match form skills for form task
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould match test skills for test-engineer
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould respect maxSkills limit
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mpreviewSkillsForTask[2m > [22m[2mshould prioritize optional skills from agent definition
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mgetAgentSkills[2m > [22m[2mshould return skills for backend-dev
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mgetAgentSkills[2m > [22m[2mshould return skills for frontend-dev
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mgetAgentSkills[2m > [22m[2mshould return empty arrays for unknown agent
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mgetSkillDefinition[2m > [22m[2mshould return skill definition
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mgetSkillDefinition[2m > [22m[2mshould return null for unknown skill
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mgetAllSkillNames[2m > [22m[2mshould return all skill names
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mKeyword Matching[2m > [22m[2mshould match API keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mKeyword Matching[2m > [22m[2mshould match database keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mKeyword Matching[2m > [22m[2mshould match auth keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mKeyword Matching[2m > [22m[2mshould match testing keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mKeyword Matching[2m > [22m[2mshould match styling keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mKeyword Matching[2m > [22m[2mshould match accessibility keywords
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mDifferent Agent Types[2m > [22m[2mshould handle test-engineer
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mDifferent Agent Types[2m > [22m[2mshould handle architect-agent
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mDifferent Agent Types[2m > [22m[2mshould handle ux-designer
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mDifferent Agent Types[2m > [22m[2mshould handle devops-agent
[22m[39m[SkillLoader] Skill cache cleared

[90mstdout[2m | lib/cache/__tests__/skill-loader.test.ts[2m > [22m[2mSkillLoader[2m > [22m[2mDifferent Agent Types[2m > [22m[2mshould handle code-reviewer
[22m[39m[SkillLoader] Skill cache cleared

 [32m‚úì[39m lib/cache/__tests__/skill-loader.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 290[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/sampling-plan-service.test.ts [2m([22m[2m64 tests[22m[2m)[22m[32m 115[2mms[22m[39m
[90mstdout[2m | app/(authenticated)/technical/components/__tests__/CostTrendsChart.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/services/__tests__/output-aggregation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m app/(authenticated)/technical/components/__tests__/CostTrendsChart.test.tsx [2m([22m[2m71 tests[22m[2m)[22m[32m 149[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/output-aggregation-service.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 207[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/operation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/services/__tests__/work-order-service.schedule.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/work-order-service.schedule.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 97[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/operation-service.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 163[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/po-calculation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/validation/__tests__/po-calculation.test.ts [2m([22m[2m55 tests[22m[2m)[22m[32m 167[2mms[22m[39m
[90mstdout[2m | app/api/shipping/pick-lists/[id]/confirm/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/services/__tests__/gs1-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/services/__tests__/wo-complete-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | app/api/shipping/scanner/pack/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/shipping/pick-lists/[id]/confirm/__tests__/route.test.ts [2m([22m[2m80 tests[22m[2m)[22m[32m 114[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/gantt-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m lib/services/__tests__/gs1-service.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 85[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/wo-complete-service.test.ts[2m > [22m[2mWO Complete Service (Story 04.2c)[2m > [22m[2mMaterial Reservations Release - AC-11[2m > [22m[2mAC-11: placeholder should not throw error
[22m[39mMaterial reservation release skipped - Epic 05 required

 [32m‚úì[39m lib/services/__tests__/wo-complete-service.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 83[2mms[22m[39m
 [32m‚úì[39m app/api/shipping/scanner/pack/__tests__/route.test.ts [2m([22m[2m67 tests[22m[2m)[22m[32m 210[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/gantt-schemas.test.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 161[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/boms/[id]/items/bulk/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/validation/__tests__/lp-split-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m app/api/v1/technical/boms/[id]/items/bulk/__tests__/route.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 245[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/lp-split-schema.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 218[2mms[22m[39m
[90mstdout[2m | __tests__/lib/validation/over-consumption-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/validation/__tests__/product-allergen-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/product-history.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/quality-settings.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m __tests__/lib/validation/over-consumption-schemas.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 127[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/product-allergen-schema.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 177[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/product-history.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 161[2mms[22m[39m
[90mstdout[2m | __tests__/unit/services/production-execution-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/quality-settings.test.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 131[2mms[22m[39m
 [32m‚úì[39m __tests__/unit/services/production-execution-service.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 250[2mms[22m[39m
[90mstdout[2m | app/api/technical/boms/__tests__/scale.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | lib/validation/__tests__/output-query-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m app/api/technical/boms/__tests__/scale.test.ts [2m([22m[2m62 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/output-query-schema.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 164[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.7.module-toggles-integration.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | lib/validation/__tests__/sales-order-import.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m __tests__/01-settings/01.7.module-toggles-integration.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[32m 116[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/sales-order-import.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 123[2mms[22m[39m
[90mstdout[2m | __tests__/api/quality/spec-parameters.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m __tests__/api/quality/spec-parameters.test.ts [2m([22m[2m81 tests[22m[2m)[22m[32m 169[2mms[22m[39m
[90mstdout[2m | app/api/warehouse/scanner/move/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [32m‚úì[39m app/api/warehouse/scanner/move/__tests__/route.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 150[2mms[22m[39m
[90mstdout[2m | __tests__/integration/api/warehouse/lp-merge.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/services/__tests__/user-preference-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m __tests__/integration/api/warehouse/lp-merge.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 175[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/user-preference-service.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 191[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/auth-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/integration/api/planning/work-orders.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m lib/validation/__tests__/auth-schemas.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 205[2mms[22m[39m
 [32m‚úì[39m __tests__/integration/api/planning/work-orders.test.ts [2m([22m[2m51 tests[22m[2m)[22m[32m 233[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/bom-alternative.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m lib/validation/__tests__/bom-alternative.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 215[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/scanner-output-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | components/planning/__tests__/supplier-products-table.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | components/technical/bom/__tests__/BOMBulkImportModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/validation/__tests__/scanner-output-schemas.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 120[2mms[22m[39m
 [32m‚úì[39m components/planning/__tests__/supplier-products-table.test.tsx [2m([22m[2m36 tests[22m[2m)[22m[32m 197[2mms[22m[39m
 [32m‚úì[39m components/technical/bom/__tests__/BOMBulkImportModal.test.tsx [2m([22m[2m99 tests[22m[2m)[22m[32m 143[2mms[22m[39m
[90mstdout[2m | app/api/v1/technical/boms/[id]/cost/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/services/__tests__/iso-2859-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m app/api/v1/technical/boms/[id]/cost/__tests__/route.test.ts [2m([22m[2m51 tests[22m[2m)[22m[32m 129[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/iso-2859-service.test.ts [2m([22m[2m94 tests[22m[2m)[22m[32m 139[2mms[22m[39m
[90mstdout[2m | app/api/technical/shelf-life/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | lib/services/__tests__/planning-settings-service.po-approval.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | app/api/quality/test-results/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/services/__tests__/allergen-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m app/api/technical/shelf-life/__tests__/route.test.ts [2m([22m[2m97 tests[22m[2m)[22m[32m 192[2mms[22m[39m
[90mstdout[2m | __tests__/lib/validation/by-product-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m app/api/quality/test-results/__tests__/route.test.ts [2m([22m[2m84 tests[22m[2m)[22m[32m 154[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/allergen-service.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 206[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/planning-settings-service.po-approval.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 170[2mms[22m[39m
 [32m‚úì[39m __tests__/lib/validation/by-product-schemas.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 82[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/planning-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [32m‚úì[39m lib/services/__tests__/planning-dashboard-service.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 159[2mms[22m[39m
[90mstdout[2m | app/api/shipping/shipments/[id]/manifest/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | components/quality/test-results/__tests__/test-results-form.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/services/__tests__/over-receipt-control.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | __tests__/integration/api/planning/po-calculations.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | components/settings/machines/__tests__/MachineModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m lib/services/__tests__/over-receipt-control.test.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 114[2mms[22m[39m
 [32m‚úì[39m __tests__/integration/api/planning/po-calculations.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 90[2mms[22m[39m
 [32m‚úì[39m components/quality/test-results/__tests__/test-results-form.test.ts [2m([22m[2m57 tests[22m[2m)[22m[32m 132[2mms[22m[39m
 [32m‚úì[39m app/api/shipping/shipments/[id]/manifest/__tests__/route.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 53[2mms[22m[39m
[90mstdout[2m | app/api/planning/transfer-orders/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m app/api/planning/transfer-orders/__tests__/route.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 183[2mms[22m[39m
 [32m‚úì[39m components/settings/machines/__tests__/MachineModal.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[32m 177[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/supplier-product-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/supplier-product-service.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 109[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/consumption-reversal-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

 [32m‚úì[39m lib/services/__tests__/consumption-reversal-service.test.ts [2m([22m[2m15 tests[22m[2m | [22m[33m5 skipped[39m[2m)[22m[32m 66[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/settings-dashboard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[90mstdout[2m | components/settings/production-lines/__tests__/MachineSequenceEditor.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/services/__tests__/settings-dashboard-service.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 70[2mms[22m[39m
[90mstdout[2m | __tests__/lib/validation/transfer-order-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m components/settings/production-lines/__tests__/MachineSequenceEditor.test.tsx [2m([22m[2m30 tests[22m[2m)[22m[32m 83[2mms[22m[39m
 [32m‚úì[39m __tests__/lib/validation/transfer-order-schemas.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 84[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/planning-settings-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/shipping/sales-orders/[id]/validate-allergens/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | lib/services/__tests__/transfer-order-service.ship.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/shipping/sales-orders/[id]/validate-allergens/__tests__/route.test.ts [2m([22m[2m72 tests[22m[2m)[22m[32m 149[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/planning-settings-service.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 137[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/transfer-order-service.ship.test.ts [2m([22m[2m59 tests[22m[2m)[22m[32m 148[2mms[22m[39m
[90mstdout[2m | app/api/technical/nutrition/__tests__/calculate.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m app/api/technical/nutrition/__tests__/calculate.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 221[2mms[22m[39m
[90mstdout[2m | components/technical/bom/__tests__/BOMByproductsSection.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m components/technical/bom/__tests__/BOMByproductsSection.test.tsx [2m([22m[2m47 tests[22m[2m)[22m[32m 144[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/asn-receive-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/services/__tests__/asn-receive-service.test.ts [2m([22m[2m24 tests[22m[2m | [22m[33m10 skipped[39m[2m)[22m[32m 32[2mms[22m[39m
[90mstdout[2m | components/planning/dashboard/__tests__/AlertPanel.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m components/planning/dashboard/__tests__/AlertPanel.test.tsx [2m([22m[2m33 tests[22m[2m)[22m[32m 58[2mms[22m[39m
[90mstdout[2m | components/planning/dashboard/__tests__/ActivityFeed.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m components/planning/dashboard/__tests__/ActivityFeed.test.tsx [2m([22m[2m50 tests[22m[2m)[22m[32m 57[2mms[22m[39m
[90mstdout[2m | __tests__/api/planning/purchase-orders/approval.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/api/planning/purchase-orders/approval.test.ts [2m([22m[2m81 tests[22m[2m)[22m[32m 73[2mms[22m[39m
[90mstdout[2m | app/api/quality/status/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[90mstdout[2m | lib/services/__tests__/machine-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/planning/suppliers/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/quality/status/__tests__/route.test.ts [2m([22m[2m75 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/machine-service.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32m‚úì[39m app/api/planning/suppliers/__tests__/route.test.ts [2m([22m[2m72 tests[22m[2m)[22m[32m 88[2mms[22m[39m
[90mstdout[2m | app/api/shipping/pick-lists/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m app/api/shipping/pick-lists/__tests__/route.test.ts [2m([22m[2m67 tests[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/consumption-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m lib/validation/__tests__/consumption-schema.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstdout[2m | app/api/shipping/sales-orders/[id]/allocate/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/shipping/sales-orders/[id]/allocate/__tests__/route.test.ts [2m([22m[2m62 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/wizard-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m lib/services/__tests__/wizard-service.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | components/planning/dashboard/__tests__/KPICard.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m components/planning/dashboard/__tests__/KPICard.test.tsx [2m([22m[2m28 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | components/technical/__tests__/tree-transformation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m components/technical/__tests__/tree-transformation.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/recall-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/services/__tests__/recall-service.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 157[2mms[22m[39m
[90mstdout[2m | components/shipping/sales-orders/__tests__/SOModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m components/shipping/sales-orders/__tests__/SOModal.test.tsx [2m([22m[2m68 tests[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/cost-history-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

 [32m‚úì[39m lib/services/__tests__/cost-history-service.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 104[2mms[22m[39m
[90mstdout[2m | app/api/shipping/sales-orders/__tests__/lines.route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/services/__tests__/po-bulk-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [32m‚úì[39m app/api/shipping/sales-orders/__tests__/lines.route.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 97[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/po-bulk-service.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 68[2mms[22m[39m
[90mstdout[2m | app/api/shipping/sales-orders/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üì° add observability to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/shipping/sales-orders/__tests__/route.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | app/api/production/work-orders/[id]/pause-history/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m app/api/production/work-orders/[id]/pause-history/__tests__/route.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 107[2mms[22m[39m
[90mstdout[2m | app/api/planning/work-orders/[id]/materials/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [32m‚úì[39m app/api/planning/work-orders/[id]/materials/__tests__/route.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | __tests__/01-settings/01.6.permission-middleware.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m __tests__/01-settings/01.6.permission-middleware.test.tsx [2m([22m[2m27 tests[22m[2m)[22m[32m 121[2mms[22m[39m
[90mstdout[2m | lib/utils/__tests__/po-permissions.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/utils/__tests__/po-permissions.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 85[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/variance-analysis-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/technical/boms/__tests__/explosion.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/services/__tests__/variance-analysis-service.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/test-results-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m app/api/technical/boms/__tests__/explosion.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/test-results-service.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/label-export-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | components/shipping/rma/__tests__/RMADataTable.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m lib/services/__tests__/label-export-service.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 110[2mms[22m[39m
 [32m‚úì[39m components/shipping/rma/__tests__/RMADataTable.test.tsx [2m([22m[2m69 tests[22m[2m)[22m[32m 114[2mms[22m[39m
[90mstdout[2m | components/quality/test-results/__tests__/test-results-table.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | __tests__/01-settings/01.14.wizard-steps-api.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | components/planning/purchase-orders/__tests__/POStatusBadge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | __tests__/unit/dashboard-kpi-calculations.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

 [32m‚úì[39m components/planning/purchase-orders/__tests__/POStatusBadge.test.tsx [2m([22m[2m59 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | app/api/production/work-orders/[id]/resume/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m __tests__/unit/dashboard-kpi-calculations.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m app/api/production/work-orders/[id]/resume/__tests__/route.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m __tests__/01-settings/01.14.wizard-steps-api.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32m‚úì[39m components/quality/test-results/__tests__/test-results-table.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 67[2mms[22m[39m
[90mstdout[2m | lib/validation/__tests__/ingredient-nutrition-schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m lib/validation/__tests__/ingredient-nutrition-schema.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/bom-advanced.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m lib/services/__tests__/bom-advanced.test.ts [2m([22m[2m45 tests[22m[2m)[22m[32m 47[2mms[22m[39m
[90mstdout[2m | components/settings/locations/__tests__/LocationModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | components/settings/locations/__tests__/LocationTree.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | lib/validation/__tests__/routing-schemas.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

[90mstdout[2m | app/api/production/work-orders/[id]/pause/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m components/settings/locations/__tests__/LocationTree.test.tsx [2m([22m[2m28 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m lib/validation/__tests__/routing-schemas.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m components/settings/locations/__tests__/LocationModal.test.tsx [2m([22m[2m34 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m app/api/production/work-orders/[id]/pause/__tests__/route.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/permission-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m lib/services/__tests__/permission-service.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | app/api/planning/purchase-orders/__tests__/bulk-operations.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m app/api/planning/purchase-orders/__tests__/bulk-operations.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 79[2mms[22m[39m
[90mstdout[2m | app/api/warehouse/license-plates/[id]/qa-status/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | __tests__/api/production/full-lp-api.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | components/shipping/allocation/__tests__/AllocationStatusBadge.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

[90mstdout[2m | lib/utils/__tests__/tax-code-helpers.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

 [32m‚úì[39m app/api/warehouse/license-plates/[id]/qa-status/__tests__/route.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 55[2mms[22m[39m
[90mstdout[2m | __tests__/unit/services/yield-service-04.7a.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

 [32m‚úì[39m __tests__/api/production/full-lp-api.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m lib/utils/__tests__/tax-code-helpers.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m components/shipping/allocation/__tests__/AllocationStatusBadge.test.tsx [2m([22m[2m26 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m __tests__/unit/services/yield-service-04.7a.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | components/settings/onboarding/__tests__/WizardStep6Complete.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

 [32m‚úì[39m components/settings/onboarding/__tests__/WizardStep6Complete.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[32m 51[2mms[22m[39m
[90mstdout[2m | __tests__/unit/services/by-product-service-04.7a.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | lib/utils/__tests__/gs1-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[90mstdout[2m | lib/services/__tests__/full-lp-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

[90mstdout[2m | app/api/v1/technical/routings/[id]/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | components/settings/onboarding/__tests__/WizardStep2Warehouse.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

 [32m‚úì[39m lib/utils/__tests__/gs1-validation.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/routings/[id]/__tests__/route.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/full-lp-validation.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/settings-navigation-service.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m components/settings/onboarding/__tests__/WizardStep2Warehouse.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m lib/services/__tests__/settings-navigation-service.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m __tests__/unit/services/by-product-service-04.7a.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 66[2mms[22m[39m
[90mstdout[2m | lib/utils/__tests__/wo-reservation-errors.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

 [32m‚úì[39m lib/utils/__tests__/wo-reservation-errors.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 34[2mms[22m[39m
[90mstdout[2m | app/api/planning/work-orders/[id]/snapshot/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | components/technical/routings/__tests__/CreateRoutingModal.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | app/api/v1/technical/routings/[id]/boms/__tests__/route.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [32m‚úì[39m app/api/planning/work-orders/[id]/snapshot/__tests__/route.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m app/api/v1/technical/routings/[id]/boms/__tests__/route.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m components/technical/routings/__tests__/CreateRoutingModal.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstdout[2m | lib/services/__tests__/user-validation.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

 [32m‚úì[39m lib/services/__tests__/user-validation.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstdout[2m | __tests__/integration/onboarding-flow.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

 [2m[90m‚Üì[39m[22m __tests__/integration/onboarding-flow.test.tsx [2m([22m[2m8 tests[22m[2m | [22m[33m8 skipped[39m[2m)[22m
[90mstdout[2m | __tests__/api/warehouse/adjustments.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

 [2m[90m‚Üì[39m[22m __tests__/api/warehouse/adjustments.test.ts [2m([22m[2m11 tests[22m[2m | [22m[33m11 skipped[39m[2m)[22m
[90mstdout[2m | __tests__/integration/api/warehouse/grn-from-po.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

 [2m[90m‚Üì[39m[22m __tests__/integration/api/warehouse/grn-from-po.test.ts [2m([22m[2m35 tests[22m[2m | [22m[33m35 skipped[39m[2m)[22m
[90mstdout[2m | __tests__/integration/api/production/work-orders-reservations.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

 [2m[90m‚Üì[39m[22m __tests__/integration/api/production/work-orders-reservations.test.ts [2m([22m[2m46 tests[22m[2m | [22m[33m46 skipped[39m[2m)[22m
[90mstdout[2m | __tests__/api/warehouse/license-plates.test.ts
[22m[39m[dotenv@17.2.3] injecting env (20) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

 [2m[90m‚Üì[39m[22m __tests__/api/warehouse/license-plates.test.ts [2m([22m[2m28 tests[22m[2m | [22m[33m28 skipped[39m[2m)[22m

[2m Test Files [22m [1m[31m125 failed[39m[22m[2m | [22m[1m[32m411 passed[39m[22m[2m | [22m[33m5 skipped[39m[90m (541)[39m
[2m      Tests [22m [1m[31m1678 failed[39m[22m[2m | [22m[1m[32m17048 passed[39m[22m[2m | [22m[33m366 skipped[39m[90m (19092)[39m
[2m   Start at [22m 21:22:28
[2m   Duration [22m 530.00s[2m (transform 150.55s, setup 560.08s, collect 357.70s, tests 1445.43s, environment 872.71s, prepare 23.78s)[22m

‚ÄâELIFECYCLE‚Äâ Test failed. See above for more details.
‚ÄâELIFECYCLE‚Äâ Command failed with exit code 1.
