# Handoff: 01.17 Audit Trail - Frontend

## Story
Audit logs page with table, filters, search, row expansion, CSV export.

## Page
- `apps/frontend/app/(authenticated)/settings/audit-logs/page.tsx`

## Components to Create
All in `apps/frontend/components/settings/audit/`:
1. `AuditLogsTable.tsx` - DataTable with infinite scroll (100 per load)
2. `AuditLogRow.tsx` - Expandable row with action icon, user, entity, timestamp
3. `AuditLogDetails.tsx` - Expanded panel showing before/after changes (JSON diff)
4. `AuditLogFilters.tsx` - User filter (multi-select), Action filter (multi-select), Entity type filter, Date range
5. `AuditLogSearch.tsx` - Full-text search input with 300ms debounce
6. `AuditLogExportButton.tsx` - "Export CSV" button with progress, warning for >10k
7. `AuditLogEmptyState.tsx` - Empty state when no logs match filters

## Data Fetching
- React Query: `useAuditLogs(filters)` with infinite query
- Endpoint: `GET /api/settings/audit-logs?search=&user_id=&action=&entity_type=&date_from=&date_to=&limit=100&offset=0`

## UI Patterns
- ShadCN DataTable for main table
- ShadCN Select/MultiSelect for filters
- ShadCN DateRangePicker for date filter (presets: Today, Last 7 days, Last 30 days)
- ShadCN Sheet/Dialog for row expansion
- Color-coded action badges: CREATE=green, UPDATE=blue, DELETE=red, LOGIN=gray

## data-testid
- `audit-logs-table`
- `audit-log-row-{id}`
- `audit-log-expand-{id}`
- `audit-log-details-{id}`
- `audit-filter-user`
- `audit-filter-action`
- `audit-filter-entity`
- `audit-filter-date`
- `audit-search-input`
- `audit-export-button`
- `audit-empty-state`
- `audit-loading-skeleton`
